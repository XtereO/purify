(this["webpackJsonpmini-app"]=this["webpackJsonpmini-app"]||[]).push([[0],{143:function(e,t,c){},145:function(e,t,c){},146:function(e,t,c){},165:function(e,t,c){},168:function(e,t,c){"use strict";c.r(t);var i=c(1),n=c.n(i),a=c(37),s=c.n(a),r=c(23),l=c.n(r),o=c(28),d=c(17),j=c.n(d),b=c(12),u=c(26),h=c(15),O=c(5),x=(c(142),c(143),c(170)),p=c(171),_=c(172),m=c(173),g=c(0),f="#4475F1",y=function(e){var t=e.id,c=e.bgApp,n=e.handlerClose,a=e.checkInfo,s=e.requestPermissionLocation;return Object(g.jsx)(O.n,{id:t,onClose:n,header:Object(g.jsx)(O.o,{className:"bg__app__light"===c?"modal__app__light":"modal__app__dark"}),children:Object(g.jsx)("div",{className:c,children:Object(g.jsxs)(i.Fragment,{children:[Object(g.jsxs)(O.j,{children:[Object(g.jsx)(O.g,{className:"center__x text__big",children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 Purify"}),Object(g.jsxs)(O.g,{children:[Object(g.jsx)(v,{Icon:x.a,description:"\u041f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0439\u0442\u0435 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u0443\u044e \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443 \u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0439\u0442\u0435 \u0432\u0430\u0436\u043d\u044b\u0435 \u0441\u043e\u0432\u0435\u0442\u044b, \u0447\u0442\u043e\u0431\u044b \u0441\u0431\u0435\u0440\u0435\u0447\u044c \u0437\u0434\u043e\u0440\u043e\u0432\u044c\u0435. ",title:"\u0421\u043b\u0435\u0434\u0438\u0442\u0435 \u0437\u0430 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e\u043c \u0432\u043e\u0437\u0434\u0443\u0445\u0430"}),Object(g.jsx)(v,{Icon:p.a,description:"\u041f\u043e\u043b\u0443\u0447\u0430\u0439\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0440\u0430\u043d\u0435\u0435 \u0437\u043d\u0430\u0442\u044c \u043e\u0431 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\u0445 \u0432 \u0445\u0443\u0434\u0448\u0443\u044e \u0441\u0442\u043e\u0440\u043e\u043d\u0443.",title:"\u0411\u0443\u0434\u044c\u0442\u0435 \u0432 \u043a\u0443\u0440\u0441\u0435"}),Object(g.jsx)(v,{Icon:_.a,description:"\u0418\u043d\u0444\u043e\u0440\u043c\u0438\u0440\u0443\u0439\u0442\u0435 \u0438\u0445 \u0432 \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044f\u0445 \u0447\u0435\u0440\u0435\u0437 \u0438\u0441\u0442\u043e\u0440\u0438\u0438 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435.",title:"\u0421\u043e\u043e\u0431\u0449\u0430\u0439\u0442\u0435 \u0431\u043b\u0438\u0437\u043a\u0438\u043c"})]})]}),Object(g.jsx)(O.g,{className:"center__x",children:Object(g.jsx)(O.d,{size:"l",onClick:s,className:"intro__button__location",style:{background:f},before:Object(g.jsx)(m.a,{}),children:"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044e"})}),Object(g.jsx)(O.g,{onClick:function(){a()},className:"w-100 highlight_on_touch center__x text__gray",children:"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c"}),Object(g.jsx)(O.w,{size:32})]})})})},v=function(e){var t=e.description,c=e.title,i=e.Icon;return Object(g.jsxs)(O.g,{className:"intro__info",children:[Object(g.jsx)("div",{className:"center__y",children:Object(g.jsx)(i,{fill:f})}),Object(g.jsxs)(O.g,{children:[Object(g.jsx)("div",{children:Object(g.jsx)("strong",{children:c})}),Object(g.jsx)("div",{className:"text__gray",children:t})]})]})},C=(c(145),c(178)),A=c(179),N=c.p+"static/media/IQAir_logo.60893679.svg",w=c(180),S=c.p+"static/media/loader.4eb6b9ea.gif",k=function(e){return Object(g.jsx)("img",{className:"w-100",src:S})},I=c(60),F=["description","onClick","className","bgApp"],E=Object(i.memo)((function(e){var t=e.description,c=e.onClick,i=e.className,n=e.bgApp,a=Object(I.a)(e,F);return Object(g.jsxs)("div",{className:"",onClick:c||function(){},style:{display:"flex",color:"bg__app__light"===n?"#454545":"white"},children:[Object(g.jsx)("div",{className:i||"center__y",style:{paddingRight:16,paddingLeft:8},children:a.children}),Object(g.jsx)("div",{className:"center__y",children:t})]})})),T=c(174),R=(c(146),function(e){var t=e.tooltipDescription,c=e.children;return Object(g.jsx)("div",{tooltip:t,"tooltip-position":"bottom",style:{padding:0,margin:0},children:c})}),L=Object(i.memo)((function(e){var t=e.title,c=e.value,n=e.tooltipDescription,a=e.bar,s=e.aqi,r=e.bgApp,l=Object(i.useState)(!1),o=Object(h.a)(l,2);o[0],o[1];return Object(g.jsxs)("div",{style:{paddingRight:4,paddingLeft:4,color:"bg__app__light"===r?"#454545":"white"},className:"w-100 pollution__item",children:[Object(g.jsx)("div",{style:{fontSize:16},children:t}),Object(g.jsx)("div",{className:"center__y",children:Object(g.jsx)("progress",{className:a,value:s||c,max:100})}),Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"end"},children:[Object(g.jsxs)("div",{className:"text__gray",style:{fontSize:14,height:20,overflow:"hidden"},children:[c,"  \u03bcm",Object(g.jsx)("sup",{children:"3"})]}),Object(g.jsx)("div",{style:{marginLeft:3},children:Object(g.jsx)(R,{tooltipDescription:n,children:Object(g.jsx)(T.a,{fill:"#C1C1C1"})})})]})]})})),D=c(175),P=Object(i.memo)((function(e){var t=e.value,c=e.color,i=e.style;return Object(g.jsx)("span",Object(b.a)(Object(b.a)({},i),{},{className:"badge "+c,children:t}))})),U=function(e){for(var t=e;t>7;)t-=7;return["\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430","\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435"][t-1]},z=Object(i.memo)((function(e){var t=e.day,c=e.value,i=e.mode,n=(e.onClick,"bg__"+i);return Object(g.jsx)("div",{style:{fontSize:16,color:"#454545"},className:"w-100",children:Object(g.jsx)(O.f,{disabled:!0,after:Object(g.jsx)("div",{children:Object(g.jsx)(P,{value:c,color:n})}),before:"danger"===i&&Object(g.jsx)(D.a,{fill:"#EF462F"}),children:Object(g.jsx)("div",{children:Object(g.jsx)("div",{className:"center__y",children:U(t)})})})})})),q=c.p+"static/media/mask.ca4eeaf1.svg",H=c.p+"static/media/window.a4f0a59c.svg",V=c.p+"static/media/score_high.8b2dd071.svg",W=c.p+"static/media/score_low.272815f5.svg",Y=c(176),B="#4475F1",K=function(e){var t=e.isGoodWind,c=e.pollution,i=e.bgApp,n=e.doStory;return Object(g.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(g.jsxs)("div",{children:[Object(g.jsx)(E,{bgApp:i,description:t?"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c \u041e\u041e\u041d. \u041d\u0430\u0441\u043b\u0430\u0436\u0434\u0430\u0439\u0442\u0435\u0441\u044c.":Object(g.jsx)("span",{children:"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u043f\u043b\u043e\u0445\u043e\u0435 \u0438 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u041e\u041e\u041d."}),children:t?Object(g.jsx)("img",{src:W}):Object(g.jsx)("img",{src:V})}),"green"!==c.mask.value&&"hidden"!==c.mask.value&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(O.w,{className:"spacing",size:32,separator:!0}),Object(g.jsx)(E,{bgApp:i,description:"\u041d\u043e\u0441\u0438\u0442\u0435 \u043c\u0430\u0441\u043a\u0443 \u043d\u0430 \u0443\u043b\u0438\u0446\u0435.",children:Object(g.jsx)("img",{src:q})})]}),"hidden"!==c.windows.value&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(O.w,{size:32,separator:!0,className:"spacing"}),Object(g.jsx)(E,{bgApp:i,description:"green"!==c.windows.value?"\u0417\u0430\u043a\u0440\u043e\u0439\u0442\u0435 \u043e\u043a\u043d\u0430.":"\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u043e\u043a\u043d\u0430 \u0438 \u043f\u0440\u043e\u0432\u0435\u0442\u0440\u0438\u0442\u0435 \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u0441\u0432\u0435\u0436\u0438\u043c \u0432\u043e\u0437\u0434\u0443\u0445\u043e\u043c.",children:Object(g.jsx)("div",{style:{width:28},className:"center__x",children:Object(g.jsx)("img",{src:H})})})]}),"hidden"!==c.exercice.value&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(O.w,{size:32,separator:!0}),Object(g.jsx)(E,{bgApp:i,description:"green"!==c.exercice.value?"\u0418\u0437\u0431\u0435\u0433\u0430\u0439\u0442\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043e\u043a \u043d\u0430 \u0443\u043b\u0438\u0446\u0435.":"\u0425\u043e\u0440\u043e\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0434\u043b\u044f \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438.",children:Object(g.jsx)(Y.a,{fill:B})})]}),Object(g.jsx)(O.w,{size:32,separator:!0,className:"spacing"}),Object(g.jsx)(E,{onClick:n,bgApp:i,description:Object(g.jsxs)("div",{style:{color:B},children:[Object(g.jsx)("div",{children:"\u0421\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u0434\u0440\u0443\u0437\u044c\u044f\u043c \u0438 \u0431\u043b\u0438\u0437\u043a\u0438\u043c"}),Object(g.jsx)("div",{children:"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u0435\u0441\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u0435\u0439"})]}),children:Object(g.jsx)(_.a,{fill:B})})]})})},G=function(e){switch(e){case"pm25":return"PM2.5";case"pm10":return"PM10";case"o3":return"O3";case"no2":return"NO2";case"so2":return"SO2";case"co":return"CO";default:return e.toUpperCase()}},M=function(e){switch(e){case"pm25":return"\u041a\u0440\u043e\u0448\u0435\u0447\u043d\u044b\u0435 \u0447\u0430\u0441\u0442\u0438\u0446\u044b (<2.5 \u03bcm) \u0432 \u0432\u043e\u0437\u0434\u0443\u0445\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0435, \u043f\u0440\u0438 \u0432\u0434\u044b\u0445\u0430\u043d\u0438\u0438, \u043f\u043e\u043f\u0430\u0434\u0430\u044e\u0442 \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0432 \u043a\u0440\u043e\u0432\u044c.";case"pm10":return"\u041a\u0440\u043e\u0448\u0435\u0447\u043d\u044b\u0435 \u0447\u0430\u0441\u0442\u0438\u0446\u044b (<10 \u03bcm) \u0432 \u0432\u043e\u0437\u0434\u0443\u0445\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0435, \u043f\u0440\u0438 \u0432\u0434\u044b\u0445\u0430\u043d\u0438\u0438, \u043f\u043e\u043f\u0430\u0434\u0430\u044e\u0442 \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0432 \u043a\u0440\u043e\u0432\u044c.";case"o3":return"\u041e\u0437\u043e\u043d \u2014 \u0442\u043e\u043a\u0441\u0438\u0447\u043d\u044b\u0439 \u0438 \u043a\u0430\u043d\u0446\u0435\u0440\u043e\u0433\u0435\u043d\u043d\u044b\u0439 \u0433\u0430\u0437, \u0432\u043b\u0438\u044f\u044e\u0449\u0438\u0439 \u043d\u0430 \u043e\u0440\u0433\u0430\u043d\u044b \u0434\u044b\u0445\u0430\u043d\u0438\u044f.";case"no2":return"\u041e\u043a\u0441\u0438\u0434 \u0430\u0437\u043e\u0442\u0430 \u2014 \u043e\u0441\u043e\u0431\u043e \u0442\u043e\u043a\u0441\u0438\u0447\u0435\u043d, \u0440\u0430\u0437\u0434\u0440\u0430\u0436\u0430\u0435\u0442 \u0434\u044b\u0445\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0443\u0442\u0438 \u0438 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u0433\u0435\u043c\u043e\u0433\u043b\u043e\u0431\u0438\u043d\u0430 \u0432 \u043a\u0440\u043e\u0432\u0438.";case"so2":return"\u041e\u043a\u0441\u0438\u0434 \u0441\u0435\u0440\u044b \u2014 \u043f\u0440\u0438 \u0434\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u043c \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u043d\u0435\u0441\u0442\u0438 \u043d\u0435\u043f\u043e\u043f\u0440\u0430\u0432\u0438\u043c\u044b\u0439 \u0432\u0440\u0435\u0434 \u043b\u0451\u0433\u043a\u0438\u043c.";case"co":return"\u041c\u043e\u043d\u043e\u043e\u043a\u0441\u0438\u0434 \u0443\u0433\u043b\u0435\u0440\u043e\u0434\u0430 \u2014 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u0437\u0430\u043f\u0430\u0445\u0430 \u0438 \u0446\u0432\u0435\u0442\u0430. \u0421\u0438\u043c\u043f\u0442\u043e\u043c\u044b \u043e\u0442\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442 \u0441\u043b\u0430\u0431\u043e\u0441\u0442\u044c, \u0433\u043e\u043b\u043e\u0432\u043d\u0443\u044e \u0431\u043e\u043b\u044c, \u0442\u043e\u0448\u043d\u043e\u0442\u0443 \u0438 \u0434\u0440.";default:return"\u0415\u0449\u0435 \u043d\u0435\u0442 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430."}},Q=c(45),X=c.n(Q),J=X.a.create({baseURL:"https://vk-showtime.herokuapp.com/api/ecology/"}),Z=function(e){return J.post("search".concat(window.location.search),{searchQ:e}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},$=function(e){return J.post("eco-info".concat(window.location.search),{id:e,target:"city"}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},ee=function(e,t){return X.a.get("https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=".concat(e,"&longitude=").concat(t,"&localityLanguage=ru")).then((function(e){return e.data})).catch((function(e){return e.response.data}))},te=c.p+"static/media/station.933949ec.svg",ce=c(177),ie=Object(i.memo)((function(e){var t=e.value,c=e.mode,i=e.stationName,n=e.distance,a="bg__"+c;return Object(g.jsx)("div",{style:{fontSize:16,color:"#454545"},className:"w-100",children:Object(g.jsx)(O.f,{disabled:!0,after:Object(g.jsx)("div",{children:Object(g.jsx)(P,{value:t,color:a})}),children:Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)("div",{className:"center__y",children:Object(g.jsx)("img",{src:te,style:{marginRight:16}})}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{style:{fontSize:16,width:200,overflowX:"scroll"},children:i}),Object(g.jsx)("div",{className:"text__gray",children:n>10&&Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)("div",{style:{height:18,marginRight:5},className:"center__y",children:Object(g.jsx)(ce.a,{fill:"C1C1C1"})}),Object(g.jsx)("div",{className:"center__y",style:{fontSize:15,height:18},children:"\u041c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043d\u0435\u0442\u043e\u0447\u043d\u043e\u0439"})]})})]})]})})})})),ne=function(e){var t=e.point1,c=e.point2,i=Math.PI,n=Math.pow(Math.pow(t.latitude-c.latitude,2)+Math.pow(c.longitude-c.longitude,2),.5)/180*i*6371;return+String(n).slice(0,3)},ae=function(e){var t=e.id,c=e.snackbar,n=e.bgApp,a=e.isGoodWind,s=e.city,r=e.go,l=e.isInit,d=e.nativeCityId,j=e.isCitySubscribed,b=e.subscribeNoticification,u=e.unsubsubscribeNoticification,x=e.doStory,m=Object(i.useState)(!1),f=Object(h.a)(m,2),y=f[0],v=f[1],S=Object(i.useState)(!1),I=Object(h.a)(S,2),F=I[0],T=I[1],R=Object(i.useState)([]),D=Object(h.a)(R,2),P=D[0],U=D[1];Object(i.useEffect)((function(){return s&&(Z(s.name).then((function(e){e.data&&U(e.data.stations)})),v(!1)),function(){v(!1)}}),[s]);var q=function(){r("FORECAST_POLLUTION_FOR_THE_DAY")},H=s?P.map((function(e,t){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(ie,{distance:ne({point1:e.coordinates,point2:s.coordinates}),stationName:e.name,value:e.aqi,mode:e.aqi>100?"danger":e.aqi>50?"okay":"good"},"".concat(t).concat(e.name)),t+1!==P.length&&Object(g.jsx)(O.w,{className:"spacing",separator:!0,size:16})]})})):[],V=s?s.current.pollutants.map((function(e,t){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(L,{bgApp:n,title:G(e.pollutantName),value:e.concentration,aqi:e.aqi,tooltipDescription:M(e.pollutantName),bar:e.aqi>100?"bad_bar":e.aqi>50?"okay_bar":"good_bar"},"".concat(t).concat(e.pollutantName)),t+1!==s.current.pollutants.length&&Object(g.jsx)(O.w,{className:"spacing",separator:!0,size:32})]})})):[],W=(new Date).getDay(),Y=s?s.forecasts.daily.map((function(e,t){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(z,{onClick:q,day:W+t+1,value:e.aqi,mode:e.aqi>100?"danger":e.aqi>50?"okay":"good"},"".concat(t,"-").concat(e.temperature).concat(e.aqi)),t+1!==s.forecasts.daily.length&&Object(g.jsx)(O.w,{className:"spacing",separator:!0,size:16})]})})):[];return Object(g.jsx)(O.q,{id:t,children:Object(g.jsxs)(O.j,{style:{paddingTop:42},className:n,children:[F&&Object(g.jsx)("div",{onClick:function(){T(!1)},style:{display:"flex",justifyContent:"center",flexDirection:"column",position:"fixed",zIndex:1e3,width:"100%",height:"100%"},children:Object(g.jsx)(k,{})}),Object(g.jsxs)(O.g,{className:l?"bg__init card":"card "+(s&&s.current.aqi<=50?"home__good__weather":s&&s.current.aqi<=100?"home__okay__weather":"home__bad__weather"),children:[Object(g.jsx)("div",{className:"home__main__title",children:l?Object(g.jsx)("div",{style:{height:24,width:61},className:"bg__init__home"}):Object(g.jsxs)("div",{style:{fontSize:24,fontWeight:"inherit",lineHeight:2.2,color:"rgba(0,0,0,0.5)"},className:"text__SF-Pro-Rounded-Semibold",children:[s&&s.current.aqi," AQI"]})}),Object(g.jsxs)("div",{className:"center__x text__Inter-Medium",style:{color:"rgba(0,0,0,0.5)"},children:[l&&Object(g.jsx)("div",{style:{height:16,width:97,marginTop:10},className:"bg__init__home"}),Object(g.jsx)("div",{style:{fontSize:17},className:"center__y",children:s&&d!==s.id&&!l&&Object(g.jsx)(C.a,{fill:"rgba(0,0,0,0.5)",style:{marginRight:3}})}),!l&&s&&s.name]}),Object(g.jsxs)("div",{className:"mt-4 home__main__bottom__side",children:[Object(g.jsx)("div",{children:Object(g.jsx)("div",{className:"home__search__cell__rounded home__search__cell__rounded_active",onClick:function(){return r("POLLUTION_CITIES")},style:{opacity:.5},children:Object(g.jsx)(O.c,{style:{backgroundColor:"rgba(255, 255, 255, 0.35)"},shadow:!1,children:!l&&Object(g.jsx)(A.a,{fill:"#000"})})})}),Object(g.jsxs)("div",{className:"home__main__bottom__right__side",children:[Object(g.jsx)("div",{style:{opacity:.5},onClick:s?j?u:b:function(){},className:"home__search__cell__rounded home__search__cell__rounded_active",children:Object(g.jsx)(O.c,{style:{backgroundColor:"rgba(255, 255, 255, 0.35)"},shadow:!1,children:!l&&Object(g.jsx)(p.a,{fill:"#000"})})}),Object(g.jsx)("div",{className:"ml-1",style:{opacity:.5},onClick:s?x:function(){},children:Object(g.jsx)(O.c,{className:"home__search__cell__rounded home__search__cell__rounded_active",style:{backgroundColor:"rgba(255, 255, 255, 0.35)"},shadow:!1,children:!l&&Object(g.jsx)(_.a,{fill:"#000"})})})]})]})]}),Object(g.jsxs)(O.g,{children:[s&&!l&&Object(g.jsx)(K,{bgApp:n,doStory:x,pollution:s.recommendations.pollution,isGoodWind:a}),l&&Object(g.jsx)(O.e,{className:"card__app",mode:"shadow",children:Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)("div",{className:"bg__init",style:{height:24,width:24,borderRadius:2e4}}),Object(g.jsx)("div",{className:"bg__init ml-2",style:{height:17,width:122}})]})})]}),Object(g.jsxs)(O.g,{children:[Object(g.jsx)(O.k,{className:"text__SF-Pro-Rounded-Semibold",children:l?Object(g.jsx)("div",{style:{height:12,width:85},className:"bg__init"}):Object(g.jsx)("span",{className:"text__gray",children:"\u0417\u0410\u0413\u0420\u042f\u0417\u041d\u0418\u0422\u0415\u041b\u0418"})}),Object(g.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(g.jsxs)("div",{className:"card__app",children:[l&&[3,2,1,0].map((function(e){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 50px"},children:[Object(g.jsx)("div",{style:{width:91,height:17},className:"bg__init"}),Object(g.jsx)("div",{style:{width:24,height:24,display:"flex",justifyContent:"end"},className:"bg__init"})]},"pollutant".concat(e)),0!==e&&Object(g.jsx)(O.w,{separator:!0,size:32})]})})),!l&&Object(o.a)(V).slice(0,4),!y&&V.length>4&&Object(g.jsx)(O.f,{onClick:function(){return v(!0)},children:Object(g.jsx)(E,{bgApp:n,description:Object(g.jsx)(O.l,{children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"}),children:Object(g.jsx)(w.a,{fill:"#4475F1"})})}),y&&!l&&Object(g.jsx)(g.Fragment,{children:Object(o.a)(V).slice(4,6)})]})})]}),Object(g.jsxs)(O.g,{children:[Object(g.jsx)(O.k,{className:"text__SF-Pro-Rounded-Semibold",children:l?Object(g.jsx)("div",{style:{height:12,width:85},className:"bg__init"}):Object(g.jsx)("span",{className:"text__gray",children:"\u041f\u0420\u041e\u0413\u041d\u041e\u0417 \u041d\u0410 \u041d\u0415\u0414\u0415\u041b\u042e"})}),Object(g.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(g.jsxs)("div",{className:"",children:[l&&[5,6,7,8,9,4,10].map((function(e){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"24px 1fr 50px",gridGap:"10px"},children:[Object(g.jsx)("div",{style:{width:24,height:24},className:"bg__init"}),Object(g.jsx)("div",{style:{width:91,height:17},className:"bg__init"}),Object(g.jsx)("div",{style:{width:52,height:24,display:"flex",justifyContent:"end"},className:"bg__init"})]},"weather".concat(e)),10!==e&&Object(g.jsx)(O.w,{separator:!0,size:16})]})})),!l&&Y]})})]}),0!==P.length&&Object(g.jsxs)(O.g,{children:[Object(g.jsx)(O.k,{className:"text__SF-Pro-Rounded-Semibold",children:l?Object(g.jsx)("div",{style:{height:12,width:85},className:"bg__init"}):Object(g.jsx)("span",{className:"text__gray",children:"\u0421\u0442\u0430\u043d\u0446\u0438\u0438"})}),Object(g.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(g.jsxs)("div",{className:"",children:[l&&[5,6,7,8,9,4,10].map((function(e){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"24px 1fr 50px",gridGap:"10px"},children:[Object(g.jsx)("div",{style:{width:24,height:24},className:"bg__init"}),Object(g.jsx)("div",{style:{width:91,height:17},className:"bg__init"}),Object(g.jsx)("div",{style:{width:52,height:24,display:"flex",justifyContent:"end"},className:"bg__init"})]},"station".concat(e)),10!==e&&Object(g.jsx)(O.w,{separator:!0,size:16})]})})),!l&&H]})})]}),Object(g.jsxs)(O.i,{style:{paddingTop:4,paddingLeft:4},children:[Object(g.jsx)(O.g,{className:"text__SF-Pro-Rounded-Semibold",children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0430"}),Object(g.jsx)(O.g,{className:"",children:Object(g.jsx)("img",{src:N})})]}),Object(g.jsx)(O.h,{children:c})]})})},se=(c(165),c(169)),re=c(181),le=c(182),oe=function(e){var t=e.day,c=e.month,n=e.city,a=e.id,s=e.handlerClose,r=e.isGoodWind;return Object(g.jsx)(O.n,{onClose:s,header:Object(g.jsx)(O.o,{right:Object(g.jsx)(O.r,{onClick:s,children:Object(g.jsx)(se.a,{})})}),settlingHeight:100,id:a,children:Object(g.jsx)(i.Fragment,{children:Object(g.jsxs)(O.j,{children:[Object(g.jsxs)(O.g,{className:"w-100 text__dark_gray",children:[Object(g.jsx)("h3",{className:"center__x",children:"6 AQI"}),Object(g.jsxs)("div",{className:"center__x",children:[Object(g.jsxs)("div",{className:"d-flex",children:[Object(g.jsx)(C.a,{style:{marginTop:3,marginRight:3}}),n]}),Object(g.jsxs)("div",{className:"d-flex ml-2",children:[Object(g.jsx)(re.a,{style:{marginTop:3,marginRight:3}}),t," ",c]})]})]}),Object(g.jsx)(O.g,{children:Object(g.jsx)(O.e,{mode:"shadow",children:Object(g.jsxs)("div",{className:"d-flex text__dark_gray p-2",children:[Object(g.jsx)("div",{className:"center__y",children:Object(g.jsx)(le.a,{})}),Object(g.jsx)("div",{className:"ml-2",children:r?"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c \u041e\u041e\u041d.":"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u043f\u043b\u043e\u0445\u043e\u0435 \u0438 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u041e\u041e\u041d."})]})})}),Object(g.jsxs)(O.g,{children:[Object(g.jsx)(O.k,{children:Object(g.jsx)("span",{className:"text__gray",children:"\u0417\u0410\u0413\u0420\u042f\u0417\u041d\u0418\u0422\u0415\u041b\u0418"})}),Object(g.jsx)(O.e,{mode:"shadow",children:Object(g.jsx)("div",{className:"p-2"})})]}),Object(g.jsx)(O.w,{size:64})]})})})},de=c(46),je=c(183),be=function(e){var t=e.city,c=e.country,n=e.value,a=e.onClick,s=Object(i.useState)("bg__good"),r=Object(h.a)(s,2),l=r[0],o=r[1];return Object(i.useEffect)((function(){n&&o(n>=100?"bg__danger":n>=50?"bg__okay":"bg__good")}),[n]),Object(g.jsxs)("div",{onClick:a,className:"highlight_on_touch",style:{display:"grid",gridTemplateColumns:"1fr 50px"},children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{style:{fontSize:16},children:t}),Object(g.jsx)("div",{style:{fontSize:15,color:"#606060"},children:c})]}),n&&Object(g.jsx)("div",{children:Object(g.jsx)(P,{color:l,value:n,children:n})})]})},ue=function(e){var t=e.id,c=e.bgApp,n=e.countryId,a=e.handlerClose,s=e.setDefaultCity,r=e.countryName,l=e.myCity,o=e.myCityId,d=e.isAllowedPlace,j=e.requestPermissionLocation,u=Object(i.useState)(""),x=Object(h.a)(u,2),p=x[0],_=x[1],m=Object(i.useState)([]),f=Object(h.a)(m,2),y=f[0],v=f[1],C=Object(i.useState)([]),A=Object(h.a)(C,2),N=A[0],w=A[1],S=Object(i.useState)(!0),k=Object(h.a)(S,2),I=k[0],F=k[1];Object(i.useEffect)((function(){F(!0),Z(p.length>2?p:r).then((function(e){var t=e.data;v(t.cities),F(!1)})).catch((function(e){F(!1)}))}),[p]),Object(i.useEffect)((function(){F(!0),Z(r).then((function(e){var t=e.data;v(t.cities),function(e){return J.post("rank".concat(window.location.search),{id:e}).then((function(e){return e.data})).catch((function(e){return e.response.data}))}(n).then((function(e){var t=e.data;w(t),F(!1)}))})).catch((function(e){F(!1)}))}),[]);var T=y.length>0?y.map((function(e,t){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(O.g,{className:"",children:Object(g.jsx)(be,Object(b.a)({onClick:function(){s(e.id),a()},city:e.name},e))},e.id),t+1!==y.length&&Object(g.jsx)(O.w,{separator:!0,className:"spacing",size:8})]})})):Object(g.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:"\u0413\u043e\u0440\u043e\u0434\u043e\u0432 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."}),R=N.length>0?N.map((function(e,t){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(O.g,{className:"",children:Object(g.jsx)(be,Object(b.a)(Object(b.a)({value:e.aqi?e.aqi:10,onClick:function(){s(e.id),a()},city:e.name},e),{},{country:r}))},e.id),t+1!==y.length&&Object(g.jsx)(O.w,{className:"spacing",separator:!0,size:8})]})})):Object(g.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:"\u0413\u043e\u0440\u043e\u0434\u043e\u0432 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."});return Object(g.jsx)(O.n,{settlingHeight:100,header:Object(g.jsx)(O.o,{className:"bg__app__light"===c?"modal__app__light":"modal__app__dark",right:Object(g.jsx)(O.r,{onClick:a,children:Object(g.jsx)(se.a,{})})}),id:t,children:Object(g.jsxs)(O.j,{className:c,children:[Object(g.jsx)("div",{children:Object(g.jsx)(O.t,{value:p,onChange:function(e){_(e.target.value)},className:c})}),Object(g.jsx)(O.g,{children:Object(g.jsx)(O.e,{mode:"shadow",className:"card__app",style:{padding:0,overflow:"hidden"},children:Object(g.jsx)(O.f,{onClick:function(){d?(s(o),a()):j()},children:Object(g.jsxs)("div",{className:"card__app",children:[!I&&Object(g.jsx)(E,{bgApp:c,description:Object(g.jsx)("div",{children:d?Object(g.jsxs)(g.Fragment,{children:[" ",Object(g.jsx)("div",{style:{fontSize:16},children:l}),Object(g.jsx)("div",{style:{fontSize:15},className:"text__gray",children:"\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"})," "]}):Object(g.jsxs)("div",{style:{color:"#4475F1",fontSize:16},children:[Object(g.jsx)("div",{children:"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f"}),Object(g.jsx)("div",{children:"\u043a \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044e"})]})}),children:Object(g.jsx)(je.a,{className:"",fill:"#4475F1"})}),I&&Object(g.jsx)(E,{bgApp:c,description:Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{style:{width:122,height:16},className:"bg__init"}),Object(g.jsx)("div",{style:{width:88,height:12},className:"bg__init mt-1"})]}),children:Object(g.jsx)("div",{style:{height:24,width:24,borderRadius:2e4},className:"bg__init"})})]})})})}),Object(g.jsxs)(O.g,{children:[Object(g.jsx)(O.k,{className:"text__SF-Pro-Rounded-Semibold",children:I?Object(g.jsx)("div",{className:"bg__init",style:{width:85,height:12}}):Object(g.jsx)("span",{className:"text__gray",children:p.length>0?"\u0412\u0421\u0415":"\u0421 \u041d\u0418\u0417\u041a\u0418\u041c\u0418 \u041f\u041e\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u042f\u041c\u0418"})}),Object(g.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(g.jsxs)(O.j,{children:[I?p.length>0?Object(g.jsx)(Oe,{}):Object(g.jsx)(he,{}):Object(g.jsx)(g.Fragment,{}),I?Object(g.jsx)(g.Fragment,{}):p.length>0?T:R]})})]}),Object(g.jsxs)(O.g,{children:[Object(g.jsx)(O.k,{className:"text__SF-Pro-Rounded-Semibold",children:I?Object(g.jsx)("div",{className:"bg__init",style:{width:85,height:12}}):Object(g.jsx)("span",{className:"text__gray",children:p.length>0?"\u0421 \u041d\u0418\u0417\u041a\u0418\u041c\u0418 \u041f\u041e\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u042f\u041c\u0418":"\u0412\u0421\u0415"})}),Object(g.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(g.jsx)(O.j,{children:Object(g.jsxs)(O.j,{className:"",children:[I?p.length>0?Object(g.jsx)(he,{}):Object(g.jsx)(Oe,{}):Object(g.jsx)(g.Fragment,{}),I?Object(g.jsx)(g.Fragment,{}):p.length>0?R:T]})})})]}),Object(g.jsx)(O.w,{size:70})]})})},he=function(e){Object(de.a)(e);var t=[2,3,4,5,1].map((function(e){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(O.g,{className:"px-2",style:{display:"grid",gridTemplateColumns:"1fr 50px"},children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{style:{width:122,height:16},className:"bg__init"}),Object(g.jsx)("div",{style:{width:88,height:12},className:"bg__init mt-1"})]}),Object(g.jsx)("div",{style:{width:44,height:24,borderRadius:2e4},className:"bg__init mt-1"})]},"clearCity".concat(e)),1!==e&&Object(g.jsx)(O.w,{separator:!0,size:8})]})}));return Object(g.jsx)(g.Fragment,{children:t})},Oe=function(e){Object(de.a)(e);var t=[2,3,4,5,1].map((function(e){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(O.g,{className:"px-2",children:Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{style:{width:122,height:16},className:"bg__init"}),Object(g.jsx)("div",{style:{width:88,height:12},className:"bg__init mt-1"})]})},"city".concat(e)),1!==e&&Object(g.jsx)(O.w,{separator:!0,size:8})]})}));return Object(g.jsx)(g.Fragment,{children:t})},xe=c(184),pe=function(e){var t=e.id,c=e.handleClose,i=e.cityFromSearch,n=e.cityOfUser,a=e.setCitySearch,s=e.toHome;return Object(g.jsxs)(O.m,{onClose:c,id:t,children:[Object(g.jsx)(O.f,{onClick:function(){a(i.id),s()},children:Object(g.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"140px 28px 1fr"},children:[Object(g.jsx)("div",{children:"\u0413\u043e\u0440\u043e\u0434 \u0438\u0437 \u043f\u043e\u0438\u0441\u043a\u0430"}),Object(g.jsx)("div",{className:"center__x",children:Object(g.jsx)(xe.a,{fill:"#808080"})}),Object(g.jsxs)("div",{style:{display:"flex",justifyContent:"end"},children:[Object(g.jsx)("div",{style:{marginTop:2},className:"center__y",children:Object(g.jsx)(C.a,{fill:"#808080",className:"mr-1"})}),Object(g.jsx)("div",{className:"center__y",children:i.name})]})]})}),Object(g.jsx)(O.f,{onClick:function(){a(n.id),s()},children:Object(g.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"140px 28px 1fr"},children:[Object(g.jsxs)("div",{children:["\u0422\u0435\u043a\u0443\u0449\u0435\u0435",Object(g.jsx)("div",{children:"\u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"})]}),Object(g.jsx)("div",{className:"center__x",children:Object(g.jsx)(xe.a,{fill:"#808080"})}),Object(g.jsx)("div",{style:{display:"flex",justifyContent:"end",marginTop:2},children:n.name})]})})]})},_e=c(22),me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAOCAYAAAAWo42rAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC8SURBVHgBfZAxC8JADIXTq+jkYrcuDoKbP6Czq3/Av9pJV8HJyQ7ipItOCqIg9L2SK2mgDXxHuHt5lySRbuRgBibgCa7xITGiAqxc4QuULEoHRKLOC3ChcArW5vEGKr2ncAQyHnMjOoO95new0TwLWhXj55zbFoI2HGNpvizM/YNTj8HWOfs4Bf2ukuFohE0Cvj0iDviOe6QrN5A7Efvf8T1Ye+kOxjjSjYkV0rV0X7a9p87howV/cBCz1xonDSbmODszXAAAAABJRU5ErkJggg==",ge=c(32),fe=c.n(ge),ye=function(e){var t=e.text,c=e.resultOperation,i=e.closeHandler;return Object(g.jsx)(O.v,{onClose:i,before:Object(g.jsx)("img",{src:c?W:V}),children:Object(g.jsx)("div",{className:"text__SF-Pro-Rounded-Regular",style:{fontSize:15},children:t})})},ve=(c.p,c.p,c.p,c(185)),Ce=function(e){var t=e.id,c=e.subscribeNoticification,i=(e.bgApp,e.closeHandler);return Object(g.jsx)(O.m,{id:t,onClose:i,icon:Object(g.jsx)(ve.a,{fill:"#4475F1"}),header:Object(g.jsx)("div",{className:"text__Inter-Bold",children:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f?"}),subheader:Object(g.jsxs)("div",{className:"text__Inter-Regular",children:["\u041c\u044b \u0431\u0443\u0434\u0435\u043c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u044f\u0442\u044c \u0432\u0430\u0441 \u043e\u0431 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u043c \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u0440\u0430\u0437 \u0432 \u043d\u0435\u0434\u0435\u043b\u044e, \u0430 \u0442\u0430\u043a\u0436\u0435:",Object(g.jsx)("div",{style:{marginTop:10},children:"- \u0415\u0441\u043b\u0438 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u0441\u0442\u0430\u043d\u0435\u0442 \u043d\u0435 \u043f\u0440\u0438\u0435\u043c\u043b\u0438\u043c\u044b\u043c"}),Object(g.jsx)("div",{style:{marginTop:5},children:"- \u041e \u0440\u0435\u0437\u043a\u0438\u0445 \u0441\u043a\u0430\u0447\u043a\u0430\u0445 \u043a\u043e\u043b\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0437\u0430\u0433\u0440\u044f\u0437\u043d\u0438\u0442\u0435\u043b\u0435\u0439"})]}),actions:Object(g.jsx)(O.d,{size:"l",mode:"primary",onClick:function(){c(),i()},className:"text__Inter-Medium",children:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c"})})},Ae="INFO",Ne="POLLUTION_CITIES",we="HOME",Se="FORECAST_POLLUTION_FOR_THE_DAY",ke="MY_CITIES",Ie="TURN_NOTICIFICATIONS",Fe={IS_CHECK_INFO:"IS_CHECK_INFO",IS_ALLOWED_PLACE:"IS_ALLOWED_PLACE",DEFAULT_CITY_ID:"DEFAULT_CITY_ID",DEFAULT_COUNTRY_NAME:"DEFAULT_COUNTRY_NAME",DEFAULT_COUNTRY_ID:"DEFAULT_COUNTRY_ID"},Ee="5b163b6f7fa2b15e076ad2a6",Te="qNvxAidZLbwhRmQXR",Re="\u0420\u043e\u0441\u0441\u0438\u044f",Le=function(e){var t=e.x,c=fe()(me),i=Object(h.a)(c,1)[0];return Object(g.jsx)(_e.a,{x:t,y:130,image:i})},De=function(){var e=fe()("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAALCAYAAACzkJeoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABvSURBVHgBdZAxCoAwDEVTs3TwAI4ODh7Bmzh6Ng/VUXARPICDg4M/8IcoaeCRwvtNSkVEMhjZP6VgADN7AY+XF0X3DygPJQooJ4QBdfstsIEJtOBonMx8mNUJ9uTEwpEmVnCnmrAbNraPhN8V/tALxhgbBZpF7PYAAAAASUVORK5CYII="),t=Object(h.a)(e,1)[0];return Object(g.jsx)(_e.a,{x:188.6,y:205.6,image:t})},Pe=function(){var e=Object(i.useState)(!1),t=Object(h.a)(e,2),c=t[0],a=t[1],s=Object(i.useState)(we),r=Object(h.a)(s,2),d=r[0],x=(r[1],Object(i.useState)(null)),p=Object(h.a)(x,2),_=(p[0],p[1],Object(i.useState)(Object(g.jsx)(O.s,{size:"large"}))),m=Object(h.a)(_,2),f=m[0],v=(m[1],Object(i.useState)(null)),C=Object(h.a)(v,2),A=C[0],N=C[1],w=Object(i.useState)(null),S=Object(h.a)(w,2),k=S[0],I=S[1],F=Object(i.useState)({isCheckInfo:!1,isAllowedPlace:!1,defaultCityId:Ee,defaultCountryId:Te,ecoCity:null,nativeCity:null,subscribedCities:[],defaultCountryName:Re}),E=Object(h.a)(F,2),T=E[0],R=E[1],L=function(){N(null)},D=Object(i.useState)("mobile"),P=Object(h.a)(D,2),U=P[0],z=P[1],q=Object(i.useState)("bg__app__light"),H=Object(h.a)(q,2),V=H[0],W=H[1];Object(i.useEffect)(Object(u.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=function(){return(c=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.send("VKWebAppStorageGet",{keys:Object.values(Fe)});case 2:t=e.sent,t.keys.forEach((function(e){var t=e.value?JSON.parse(e.value):null;switch(e.key){case Fe.IS_CHECK_INFO:t?R((function(e){return Object(b.a)(Object(b.a)({},e),{},{isCheckInfo:!0})})):N(Ae);break;case Fe.IS_ALLOWED_PLACE:t&&R((function(e){return Object(b.a)(Object(b.a)({},e),{},{isAllowedPlace:!0})}));break;case Fe.DEFAULT_COUNTRY_ID:t&&R((function(t){return Object(b.a)(Object(b.a)({},t),{},{defaultCountryId:e.value})}));case Fe.DEFAULT_CITY_ID:t&&R((function(t){return Object(b.a)(Object(b.a)({},t),{},{defaultCityId:e.value})}));break;case Fe.DEFAULT_COUNTRY_NAME:t&&R((function(t){return Object(b.a)(Object(b.a)({},t),{},{defaultCountryName:e.value})}))}}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)},t=function(){return c.apply(this,arguments)},l.a.subscribe((function(e){var t=e.detail,c=t.type,i=t.data;if("VKWebAppUpdateConfig"===c){console.log(i.appearance);var n=document.createAttribute("scheme");n.value=i.scheme?i.scheme:"client_light";var a=new RegExp("light");"vkcom"===i.scheme||i.scheme.match(a)?(W("bg__app__light"),"vkcom"===i.scheme?z("pc"):z("mobile"),l.a.send("VKWebAppSetViewSettings",{status_bar_style:"light",action_bar_color:"#F5F5F5"})):(W("bg__app__dark"),l.a.send("VKWebAppSetViewSettings",{status_bar_style:"dark",action_bar_color:"#373737"})),document.body.attributes.setNamedItem(n)}})),t();case 4:case"end":return e.stop()}}),e)}))),[]);var Y=function(){try{l.a.send("VKWebAppStorageSet",{key:Fe.IS_CHECK_INFO,value:"true"}),R((function(e){return Object(b.a)(Object(b.a)({},e),{},{isCheckInfo:!0})})),L()}catch(e){}};Object(i.useEffect)(Object(u.a)(j.a.mark((function e(){var t,c,i,n,s,r,o,d,u,h,O;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.isAllowedPlace){e.next=39;break}return e.prev=1,a(!0),e.next=5,l.a.send("VKWebAppGetGeodata",{key:"location"});case 5:return t=e.sent,c=t.lat,i=t.long,e.next=10,ee(c,i);case 10:return n=e.sent,s=n.city,r=Ee,o=Te,d=Re,u=s,e.next=18,Z(u);case 18:return h=e.sent.data,O=null,h.cities.forEach((function(e){e.name!==u||O||(r=e.id,O=e)})),e.next=23,Z(O.country);case 23:e.sent.data.countries.forEach((function(e){e.name===O.country&&(o=e.id,d=e.name)})),l.a.send("VKWebAppStorageSet",{key:Fe.DEFAULT_COUNTRY_NAME,value:d}),R((function(e){return Object(b.a)(Object(b.a)({},e),{},{defaultCountryId:d})})),l.a.send("VKWebAppStorageSet",{key:Fe.DEFAULT_COUNTRY_ID,value:o}),R((function(e){return Object(b.a)(Object(b.a)({},e),{},{defaultCountryId:o})})),l.a.send("VKWebAppStorageSet",{key:Fe.DEFAULT_CITY_ID,value:r}),R((function(e){return Object(b.a)(Object(b.a)({},e),{},{defaultCityId:r})})),R((function(e){return Object(b.a)(Object(b.a)({},e),{},{nativeCity:O})})),a(!1),e.next=39;break;case 35:e.prev=35,e.t0=e.catch(1),l.a.send("VKWebAppStorageSet",{key:Fe.DEFAULT_CITY_ID,value:T.defaultCityId}),a(!1);case 39:case"end":return e.stop()}}),e,null,[[1,35]])}))),[T.isAllowedPlace]),Object(i.useEffect)(Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,$(T.defaultCityId);case 3:(t=e.sent.data)&&(R((function(e){return Object(b.a)(Object(b.a)({},e),{},{ecoCity:t})})),T.nativeCity||R((function(e){return Object(b.a)(Object(b.a)({},e),{},{nativeCity:t})}))),a(!1);case 6:case"end":return e.stop()}}),e)}))),[T.defaultCityId]);var B=function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.location.hash.slice(1)){e.next=7;break}return a(!0),e.next=4,$(window.location.hash.slice(1));case 4:(t=e.sent.data)&&R((function(e){return Object(b.a)(Object(b.a)({},e),{},{ecoCity:t})})),a(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)(Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B();case 1:case"end":return e.stop()}}),e)}))),[window.location.hash]),Object(i.useEffect)(Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.get("subscribe".concat(window.location.search)).then((function(e){return e.data.data}));case 2:t=e.sent,R((function(e){return Object(b.a)(Object(b.a)({},e),{},{subscribedCities:Object(o.a)(t)})}));case 4:case"end":return e.stop()}}),e)}))),[]);var K=function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.send("VKWebAppGetGeodata",{key:"location"}).then((function(e){l.a.send("VKWebAppStorageSet",{key:Fe.IS_ALLOWED_PLACE,value:JSON.stringify(!0)}).then((function(e){R((function(e){return Object(b.a)(Object(b.a)({},e),{},{isAllowedPlace:!0})}))}))})).catch((function(e){R((function(e){return Object(b.a)(Object(b.a)({},e),{},{isAllowedPlace:!0})}))}));case 2:Y();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=Object(i.useRef)(null),M=Object(i.useRef)(null),Q=n.a.useCallback(Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},t="pc"===U?{background_type:"image",blob:M.current.toDataURL()}:{background_type:"none"},e.next=5,l.a.send("VKWebAppShowStoryBox",Object(b.a)(Object(b.a)({},t),{},{stickers:[{sticker_type:"renderable",sticker:{can_delete:!1,content_type:"image",blob:G.current.toDataURL(),clickable_zones:[{action_type:"link",action:{link:"https://vk.com/app7991717#".concat(T.ecoCity.id),tooltip_text_key:"tooltip_open_default"}}],transform:{gravity:"center",relation_width:1}}}]})).catch((function(e){I(Object(g.jsx)(ye,{closeHandler:X,resultOperation:!0,text:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}))})).then((function(e){e.result?I(Object(g.jsx)(ye,{closeHandler:X,resultOperation:!0,text:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u0430"})):I(Object(g.jsx)(ye,{closeHandler:X,resultOperation:!1,text:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),I(Object(g.jsx)(ye,{closeHandler:X,resultOperation:!1,text:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[G,T.ecoCity,M]),X=function(){I(null)},te=function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.send("VKWebAppAllowNotifications");case 3:if(!e.sent.result||!T.ecoCity){e.next=7;break}return e.next=7,t=T.ecoCity.id,J.post("subscribe".concat(window.location.search),{id:t});case 7:R((function(e){return Object(b.a)(Object(b.a)({},e),{},{subscribedCities:[].concat(Object(o.a)(e.subscribedCities),[{cityId:T.ecoCity.id}])})})),I(Object(g.jsx)(ye,{closeHandler:X,resultOperation:!0,text:"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u044b"})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),I(Object(g.jsx)(ye,{closeHandler:X,resultOperation:!1,text:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}));case 14:case"end":return e.stop()}var t}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.send("VKWebAppDenyNotifications");case 3:if(!e.sent.result||!T.ecoCity){e.next=7;break}return e.next=7,t=T.ecoCity.id,J.delete("subscribe".concat(window.location.search),{data:{id:t}});case 7:R((function(e){return Object(b.a)(Object(b.a)({},e),{},{subscribedCities:Object(o.a)(e.subscribedCities.filter((function(e){return e.cityId!==T.ecoCity.id})))})})),I(Object(g.jsx)(ye,{resultOperation:!0,closeHandler:X,text:"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u044b"})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),I(Object(g.jsx)(ye,{closeHandler:X,resultOperation:!1,text:"\u0412\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}));case 14:case"end":return e.stop()}var t}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),ie=Object(g.jsxs)(O.p,{onClose:L,activeModal:A,children:[Object(g.jsx)(pe,{toHome:L,cityFromSearch:T.ecoCity,cityOfUser:T.nativeCity,setCitySearch:function(e){return R((function(t){return Object(b.a)(Object(b.a)({},t),{},{defaultCityId:e})}))},handleClose:function(){N(Ne)},id:ke}),Object(g.jsx)(y,{bgApp:V,checkInfo:Y,requestPermissionLocation:K,id:Ae,handlerClose:L}),Object(g.jsx)(oe,{id:Se,handlerClose:L,day:3,month:"\u041d\u043e\u044f\u0431\u0440\u044c",city:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433"}),Object(g.jsx)(Ce,{bgApp:V,id:Ie,closeHandler:L,subscribeNoticification:te}),Object(g.jsx)(ue,{requestPermissionLocation:K,isAllowedPlace:T.isAllowedPlace,bgApp:V,myCityId:T.nativeCity?T.nativeCity.id:Ee,myCity:T.nativeCity?T.nativeCity.name:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",onClickMyCities:function(){N(ke)},setDefaultCity:function(e){return R((function(t){return Object(b.a)(Object(b.a)({},t),{},{defaultCityId:e})}))},countryName:T.defaultCountryName,countryId:T.defaultCountryId,handlerClose:L,id:Ne})]});return Object(g.jsxs)(O.a,{children:[Object(g.jsx)(O.b,{activePanel:d,popout:f,children:Object(g.jsx)(O.x,{activePanel:we,modal:ie,children:Object(g.jsx)(ae,{snackbar:k,subscribeNoticification:function(){return N(Ie)},unsubsubscribeNoticification:ce,isCitySubscribed:!!T.ecoCity&&T.subscribedCities.some((function(e){return e.cityId===T.ecoCity.id})),bgApp:V,doStory:Q,nativeCityId:T.nativeCity?T.nativeCity.id:Ee,isInit:c,go:function(e){N(e)},city:T.ecoCity?T.ecoCity:null,id:we,isGoodWind:!T.ecoCity||!T.ecoCity.current||T.ecoCity.current.aqi<=50})})}),Object(g.jsxs)("div",{id:"canvas",style:{width:0,height:0,opacity:0},children:[Object(g.jsx)(_e.d,{width:253,height:250,ref:M,children:Object(g.jsx)(_e.b,{children:Object(g.jsx)(_e.c,{fillLinearGradientStartPoint:{x:0,y:-100},width:253,height:250,fillLinearGradientEndPoint:{x:120,y:220},fillLinearGradientColorStops:[0,"#EBEBEB",1,"#E0E0E0"]})})}),Object(g.jsx)(_e.d,{ref:G,style:{width:253,height:250,borderRadius:20},width:253,height:250,children:Object(g.jsxs)(_e.b,{children:[Object(g.jsx)(_e.c,{fillLinearGradientStartPoint:{x:0,y:-100},fillLinearGradientEndPoint:{x:120,y:220},fillLinearGradientColorStops:T.ecoCity&&T.ecoCity.current.aqi>100?[0,"rgba(255,153,182,1)",1,"rgba(204,183,254,1)"]:T.ecoCity&&T.ecoCity.current.aqi>50?[0,"#FDCFB2",1,"#BF8FF5"]:[0,"#B3FF86",1,"#EEFFC8"],width:253,height:250,cornerRadius:20}),Object(g.jsx)(_e.e,{fontFamily:"SF-Pro-Rounded-Heavy",text:"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430:",x:55,fontSize:15,y:52,fill:"rgba(0, 0, 0, 0.5)",width:150,height:30}),Object(g.jsx)(_e.e,{fontFamily:"SF-Pro-Rounded-Heavy",text:T.ecoCity&&T.ecoCity.current.aqi>100?"\u041f\u043b\u043e\u0445\u043e\u0435":T.ecoCity&&T.ecoCity.current.aqi>50?"\u041d\u0435\u043f\u043b\u043e\u0445\u043e\u0435":"\u0425\u043e\u0440\u043e\u0448\u0435\u0435",x:T.ecoCity&&T.ecoCity.current.aqi>100?66:T.ecoCity&&T.ecoCity.current.aqi>50?48:53.5,fontSize:32,y:76,fill:"rgba(0, 0, 0, 0.5)",width:T.ecoCity&&T.ecoCity.current.aqi>100?161:176,height:38}),Object(g.jsx)(_e.e,{fontFamily:"SF-Pro-Rounded-Regular",text:T.ecoCity?T.ecoCity.name:"SPb",x:(253-(T.ecoCity?8*T.ecoCity.name.length:10))/2,fontSize:17,y:130,fill:"rgba(0, 0, 0, 0.5)",width:200,height:100}),Object(g.jsx)(_e.c,{x:42,y:191,width:169,fill:"rgba(255,255,255,0.5)",height:39,cornerRadius:28}),Object(g.jsx)(_e.e,{text:"\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435",width:200,height:39,x:56,fontSize:18,fontFamily:"SF-Pro-Rounded-Regular",fill:"rgba(0, 0, 0, 0.5)",y:201}),Object(g.jsx)(Le,{x:(253-(T.ecoCity?8*T.ecoCity.name.length:10)-30)/2}),Object(g.jsx)(De,{})]})})]})]})};l.a.send("VKWebAppInit"),s.a.render(Object(g.jsx)(Pe,{}),document.getElementById("root"))}},[[168,1,2]]]);
//# sourceMappingURL=main.8d23a9a5.chunk.js.map