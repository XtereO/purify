(this["webpackJsonpmini-app"]=this["webpackJsonpmini-app"]||[]).push([[0],{143:function(e,t,c){},145:function(e,t,c){},146:function(e,t,c){},165:function(e,t,c){},168:function(e,t,c){"use strict";c.r(t);var i=c(1),n=c.n(i),s=c(37),a=c.n(s),r=c(23),l=c.n(r),o=c(28),d=c(17),j=c.n(d),b=c(12),u=c(26),h=c(15),O=c(5),x=(c(142),c(143),c(170)),p=c(171),m=c(172),g=c(173),_=c(0),f="#4475F1",y=function(e){var t=e.id,c=e.bgApp,n=e.handlerClose,s=e.checkInfo,a=e.requestPermissionLocation;return Object(_.jsx)(O.n,{id:t,onClose:n,header:Object(_.jsx)(O.o,{className:"bg__app__light"===c?"modal__app__light":"modal__app__dark"}),children:Object(_.jsx)("div",{className:c,children:Object(_.jsxs)(i.Fragment,{children:[Object(_.jsxs)(O.j,{children:[Object(_.jsx)(O.g,{className:"center__x text__big",children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 Purify"}),Object(_.jsxs)(O.g,{children:[Object(_.jsx)(A,{Icon:x.a,description:"\u041f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0439\u0442\u0435 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u0443\u044e \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443 \u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0439\u0442\u0435 \u0432\u0430\u0436\u043d\u044b\u0435 \u0441\u043e\u0432\u0435\u0442\u044b, \u0447\u0442\u043e\u0431\u044b \u0441\u0431\u0435\u0440\u0435\u0447\u044c \u0437\u0434\u043e\u0440\u043e\u0432\u044c\u0435. ",title:"\u0421\u043b\u0435\u0434\u0438\u0442\u0435 \u0437\u0430 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e\u043c \u0432\u043e\u0437\u0434\u0443\u0445\u0430"}),Object(_.jsx)(A,{Icon:p.a,description:"\u041f\u043e\u043b\u0443\u0447\u0430\u0439\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0440\u0430\u043d\u0435\u0435 \u0437\u043d\u0430\u0442\u044c \u043e\u0431 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\u0445 \u0432 \u0445\u0443\u0434\u0448\u0443\u044e \u0441\u0442\u043e\u0440\u043e\u043d\u0443.",title:"\u0411\u0443\u0434\u044c\u0442\u0435 \u0432 \u043a\u0443\u0440\u0441\u0435"}),Object(_.jsx)(A,{Icon:m.a,description:"\u0418\u043d\u0444\u043e\u0440\u043c\u0438\u0440\u0443\u0439\u0442\u0435 \u0438\u0445 \u0432 \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044f\u0445 \u0447\u0435\u0440\u0435\u0437 \u0438\u0441\u0442\u043e\u0440\u0438\u0438 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435.",title:"\u0421\u043e\u043e\u0431\u0449\u0430\u0439\u0442\u0435 \u0431\u043b\u0438\u0437\u043a\u0438\u043c"})]})]}),Object(_.jsx)(O.g,{className:"center__x",children:Object(_.jsx)(O.d,{size:"l",onClick:a,className:"intro__button__location",style:{background:f},before:Object(_.jsx)(g.a,{}),children:"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044e"})}),Object(_.jsx)(O.g,{onClick:function(){s()},className:"w-100 highlight_on_touch center__x text__gray",children:"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c"}),Object(_.jsx)(O.w,{size:32})]})})})},A=function(e){var t=e.description,c=e.title,i=e.Icon;return Object(_.jsxs)(O.g,{className:"intro__info",children:[Object(_.jsx)("div",{className:"center__y",children:Object(_.jsx)(i,{fill:f})}),Object(_.jsxs)(O.g,{children:[Object(_.jsx)("div",{children:Object(_.jsx)("strong",{children:c})}),Object(_.jsx)("div",{className:"text__gray",children:t})]})]})},v=(c(145),c(178)),C=c(179),N=c.p+"static/media/IQAir_logo.60893679.svg",w=c(180),S=c.p+"static/media/loader.4eb6b9ea.gif",k=function(e){return Object(_.jsx)("img",{className:"w-100",src:S})},I=c(60),E=["description","onClick","className","bgApp"],F=Object(i.memo)((function(e){var t=e.description,c=e.onClick,i=e.className,n=e.bgApp,s=Object(I.a)(e,E);return Object(_.jsxs)("div",{className:"",onClick:c||function(){},style:{display:"flex",color:"bg__app__light"===n?"#454545":"white"},children:[Object(_.jsx)("div",{className:i||"center__y",style:{paddingRight:16,paddingLeft:8},children:s.children}),Object(_.jsx)("div",{className:"center__y",children:t})]})})),T=c(174),R=(c(146),function(e){var t=e.tooltipDescription,c=e.children;return Object(_.jsx)("div",{tooltip:t,"tooltip-position":"bottom",style:{padding:0,margin:0},children:c})}),L=Object(i.memo)((function(e){var t=e.title,c=e.value,n=e.tooltipDescription,s=e.bar,a=e.aqi,r=e.bgApp,l=Object(i.useState)(!1),o=Object(h.a)(l,2);o[0],o[1];return Object(_.jsxs)("div",{style:{paddingRight:4,paddingLeft:4,color:"bg__app__light"===r?"#454545":"white"},className:"w-100 pollution__item",children:[Object(_.jsx)("div",{style:{fontSize:16},children:t}),Object(_.jsx)("div",{className:"center__y",children:Object(_.jsx)("progress",{className:s,value:a||c,max:100})}),Object(_.jsxs)("div",{style:{display:"flex",justifyContent:"end"},children:[Object(_.jsxs)("div",{className:"text__gray",style:{fontSize:14,height:20,overflow:"hidden"},children:[c,"  \u03bcm",Object(_.jsx)("sup",{children:"3"})]}),Object(_.jsx)("div",{style:{marginLeft:3},children:Object(_.jsx)(R,{tooltipDescription:n,children:Object(_.jsx)(T.a,{fill:"#C1C1C1"})})})]})]})})),D=c(175),U=Object(i.memo)((function(e){var t=e.value,c=e.color,i=e.style;return Object(_.jsx)("span",Object(b.a)(Object(b.a)({},i),{},{className:"badge "+c,children:t}))})),P=function(e){for(var t=e;t>7;)t-=7;return["\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430","\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435"][t-1]},B=Object(i.memo)((function(e){var t=e.day,c=e.value,i=e.mode,n=(e.onClick,"bg__"+i);return Object(_.jsx)("div",{style:{fontSize:16,color:"#454545"},className:"w-100",children:Object(_.jsx)(O.f,{disabled:!0,after:Object(_.jsx)("div",{children:Object(_.jsx)(U,{value:c,color:n})}),before:"danger"===i&&Object(_.jsx)(D.a,{fill:"#EF462F"}),children:Object(_.jsx)("div",{children:Object(_.jsx)("div",{className:"center__y",children:P(t)})})})})})),z=c.p+"static/media/mask.ca4eeaf1.svg",K=c.p+"static/media/score_high.8b2dd071.svg",Y=c.p+"static/media/score_low.272815f5.svg",q=c(176),H="#4475F1",V=function(e){var t=e.isGoodWind,c=e.pollution,i=e.bgApp,n=e.doStory;return Object(_.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(_.jsxs)("div",{children:[Object(_.jsx)(F,{bgApp:i,description:t?"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c \u041e\u041e\u041d. \u041d\u0430\u0441\u043b\u0430\u0436\u0434\u0430\u0439\u0442\u0435\u0441\u044c.":Object(_.jsx)("span",{children:"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u043f\u043b\u043e\u0445\u043e\u0435 \u0438 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u041e\u041e\u041d."}),children:t?Object(_.jsx)("img",{src:Y}):Object(_.jsx)("img",{src:K})}),"green"!==c.mask.value&&"hidden"!==c.mask.value&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(O.w,{className:"spacing",size:32,separator:!0}),Object(_.jsx)(F,{bgApp:i,description:"\u041d\u043e\u0441\u0438\u0442\u0435 \u043c\u0430\u0441\u043a\u0443 \u043d\u0430 \u0443\u043b\u0438\u0446\u0435.",children:Object(_.jsx)("img",{src:z})})]}),"hidden"!==c.windows.value&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(O.w,{size:32,separator:!0,className:"spacing"}),Object(_.jsx)(F,{bgApp:i,description:"green"!==c.windows.value?"\u0417\u0430\u043a\u0440\u043e\u0439\u0442\u0435 \u043e\u043a\u043d\u0430.":"\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u043e\u043a\u043d\u0430 \u0438 \u043f\u0440\u043e\u0432\u0435\u0442\u0440\u0438\u0442\u0435 \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u0441\u0432\u0435\u0436\u0438\u043c \u0432\u043e\u0437\u0434\u0443\u0445\u043e\u043c.",children:Object(_.jsx)("div",{style:{width:28},className:"center__x",children:Object(_.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAYAAACAl21KAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF1SURBVHgB3VTRbcJADH2+ZIB8tLQIKqUbMEIYgQlgC8gX4St0itIJGKF0g2xQVIFo4Sf/JXF9l4BCFSJF9KPC0uUcn/3uzn5nQi7t4c6DwpjBLgEuKoSIYmaOFNTsI7x5MTYD4n8Foo7lLwZjCab4GKS4wwxHbItTNPYyJZmswmZAD6PtgAnPcpIoSdPe51NzWfRv+dt3Pa/DxmPRfj/cuLZlzWXjDtKkq5iob3BLQKpE++6TpEf6FsoaKyLuCOqiDkgRjEEy4Cpz/0uEEeviKPyR/D8gavtb1op8lqUOOTnPrUu1HCGnY+feMVKc2SqfuXxZ+GeKlQGliNbTRrfM8UjI6SkhD9L2d68C511x1WxTDbqQ3UCsSN6KLrErrxk1JYuRdsKQ3pRiIjbnW1nzOmDady8xWpc2NMsa22gnTY2D3GfxK8bTR5cRHQySDkeI6GoigjlYTe8mB7qhNdoMCHYfyrSVypxJx9DpkNxSsApv37TtB9gfl4I+GD1PAAAAAElFTkSuQmCC"})})})]}),"hidden"!==c.exercice.value&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(O.w,{size:32,separator:!0}),Object(_.jsx)(F,{bgApp:i,description:"green"!==c.exercice.value?"\u0418\u0437\u0431\u0435\u0433\u0430\u0439\u0442\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043e\u043a \u043d\u0430 \u0443\u043b\u0438\u0446\u0435.":"\u0425\u043e\u0440\u043e\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0434\u043b\u044f \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438.",children:Object(_.jsx)(q.a,{fill:H})})]}),Object(_.jsx)(O.w,{size:32,separator:!0,className:"spacing"}),Object(_.jsx)(F,{onClick:n,bgApp:i,description:Object(_.jsxs)("div",{style:{color:H},children:[Object(_.jsx)("div",{children:"\u0421\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u0434\u0440\u0443\u0437\u044c\u044f\u043c \u0438 \u0431\u043b\u0438\u0437\u043a\u0438\u043c"}),Object(_.jsx)("div",{children:"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u0435\u0441\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u0435\u0439"})]}),children:Object(_.jsx)(m.a,{fill:H})})]})})},W=function(e){switch(e){case"pm25":return"PM2.5";case"pm10":return"PM10";case"o3":return"O3";case"no2":return"NO2";case"so2":return"SO2";case"co":return"CO";default:return e.toUpperCase()}},Q=function(e){switch(e){case"pm25":return"\u041a\u0440\u043e\u0448\u0435\u0447\u043d\u044b\u0435 \u0447\u0430\u0441\u0442\u0438\u0446\u044b (<2.5 \u03bcm) \u0432 \u0432\u043e\u0437\u0434\u0443\u0445\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0435, \u043f\u0440\u0438 \u0432\u0434\u044b\u0445\u0430\u043d\u0438\u0438, \u043f\u043e\u043f\u0430\u0434\u0430\u044e\u0442 \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0432 \u043a\u0440\u043e\u0432\u044c.";case"pm10":return"\u041a\u0440\u043e\u0448\u0435\u0447\u043d\u044b\u0435 \u0447\u0430\u0441\u0442\u0438\u0446\u044b (<10 \u03bcm) \u0432 \u0432\u043e\u0437\u0434\u0443\u0445\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0435, \u043f\u0440\u0438 \u0432\u0434\u044b\u0445\u0430\u043d\u0438\u0438, \u043f\u043e\u043f\u0430\u0434\u0430\u044e\u0442 \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0432 \u043a\u0440\u043e\u0432\u044c.";case"o3":return"\u041e\u0437\u043e\u043d \u2014 \u0442\u043e\u043a\u0441\u0438\u0447\u043d\u044b\u0439 \u0438 \u043a\u0430\u043d\u0446\u0435\u0440\u043e\u0433\u0435\u043d\u043d\u044b\u0439 \u0433\u0430\u0437, \u0432\u043b\u0438\u044f\u044e\u0449\u0438\u0439 \u043d\u0430 \u043e\u0440\u0433\u0430\u043d\u044b \u0434\u044b\u0445\u0430\u043d\u0438\u044f.";case"no2":return"\u041e\u043a\u0441\u0438\u0434 \u0430\u0437\u043e\u0442\u0430 \u2014 \u043e\u0441\u043e\u0431\u043e \u0442\u043e\u043a\u0441\u0438\u0447\u0435\u043d, \u0440\u0430\u0437\u0434\u0440\u0430\u0436\u0430\u0435\u0442 \u0434\u044b\u0445\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0443\u0442\u0438 \u0438 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u0433\u0435\u043c\u043e\u0433\u043b\u043e\u0431\u0438\u043d\u0430 \u0432 \u043a\u0440\u043e\u0432\u0438.";case"so2":return"\u041e\u043a\u0441\u0438\u0434 \u0441\u0435\u0440\u044b \u2014 \u043f\u0440\u0438 \u0434\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u043c \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u043d\u0435\u0441\u0442\u0438 \u043d\u0435\u043f\u043e\u043f\u0440\u0430\u0432\u0438\u043c\u044b\u0439 \u0432\u0440\u0435\u0434 \u043b\u0451\u0433\u043a\u0438\u043c.";case"co":return"\u041c\u043e\u043d\u043e\u043e\u043a\u0441\u0438\u0434 \u0443\u0433\u043b\u0435\u0440\u043e\u0434\u0430 \u2014 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u0437\u0430\u043f\u0430\u0445\u0430 \u0438 \u0446\u0432\u0435\u0442\u0430. \u0421\u0438\u043c\u043f\u0442\u043e\u043c\u044b \u043e\u0442\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442 \u0441\u043b\u0430\u0431\u043e\u0441\u0442\u044c, \u0433\u043e\u043b\u043e\u0432\u043d\u0443\u044e \u0431\u043e\u043b\u044c, \u0442\u043e\u0448\u043d\u043e\u0442\u0443 \u0438 \u0434\u0440.";default:return"\u0415\u0449\u0435 \u043d\u0435\u0442 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430."}},G=c(45),M=c.n(G),X=M.a.create({baseURL:"https://vk-showtime.herokuapp.com/api/ecology/"}),J=function(e){return X.post("search".concat(window.location.search),{searchQ:e}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},Z=function(e){return X.post("eco-info".concat(window.location.search),{id:e,target:"city"}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},$=function(e,t){return M.a.get("https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=".concat(e,"&longitude=").concat(t,"&localityLanguage=ru")).then((function(e){return e.data})).catch((function(e){return e.response.data}))},ee=c(177),te=Object(i.memo)((function(e){var t=e.value,c=e.mode,i=e.stationName,n=e.distance,s="bg__"+c;return Object(_.jsx)("div",{style:{fontSize:16,color:"#454545"},className:"w-100",children:Object(_.jsx)(O.f,{disabled:!0,after:Object(_.jsx)("div",{children:Object(_.jsx)(U,{value:t,color:s})}),children:Object(_.jsxs)("div",{className:"d-flex",children:[Object(_.jsx)("div",{className:"center__y",children:Object(_.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAASCAYAAABfJS4tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKaSURBVHgBtVRdUhNBEO6e2cDy87BUCUKR6HKDcALhBIQTqCcAHiwqeYG8CNEHcwPwBOAJEk8QbsCWJMZarEooRCSZnXZ6djcSypTkwX6Z2enur7/+W4RE/FKYjwBrWkXl1rvFKowh2VJYRYINrXqbrffZM34TFnS37UcEJ0TkAYrn9m373OP3UWDLb8L8QK+xQ8ZFOBMnnvEbAEdS7rECCOqtysKODTQ101BCnqeG98Xf63joQCMSssa2zcP5MgDWGWN2avqIbZAVDMAfSkcrLgcyDjYQ4GnzYH7zb4xzpUvOsIAAwfXtzao76XoZKRtE4IGO1kUknC02NA/H3ypLQcqegM5GgbJcvGVdwtKd3mJfIDy2ShQvBCGs2TsmjxR/g+q//sOu/cow7OSK4fmzYvhygK6hHAPhtnXV8MmeiAXMlcIO0/9xezPnTc/4iqBhdN3mwcLcANgAxqWxMqRbNjpTDj8jMj45cKV6/Q7bCFsTvlVXuipCL2F9NpQ3wqCBpkTdYRUGfPa18oPyXKrzBCLYD+6+AyqIUxmwS1KOdtKrBNwfBiZrS+ruiqclzUpQEnF20s0HpgEciFPL7rbXUueLw6Xj9P7lYOFjeuelShod8GKoXyofZwWBMBtTjz/khj01xlsn5B78QxThB4hTtBgoKW6shjpmdy/XQFCN6Ts6WgXX7fZ7vYapna+1KHytPLGdzhZD4tM0DvnMFb8XCPQJs420Xuf5v78PolmZr5tRO+UyG8URN4ANTfG2f95dfx7FVk7Iuhmvqhm1zXj+Hcs+3QcbfdFsnxSixiyNZr95+LT8EOgh4yGd+QmZWm6l7BnY/iv4kjGRWUGEHowpRDoAnq6E/Ti+lnHK+jEi4D+J81hDLhOMIb8B/4VS44OksbgAAAAASUVORK5CYII=",style:{marginRight:16}})}),Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{style:{fontSize:16,width:200,overflowX:"scroll"},children:i}),Object(_.jsx)("div",{className:"text__gray",children:n>10&&Object(_.jsxs)("div",{className:"d-flex",children:[Object(_.jsx)("div",{style:{height:18,marginRight:5},className:"center__y",children:Object(_.jsx)(ee.a,{fill:"C1C1C1"})}),Object(_.jsx)("div",{className:"center__y",style:{fontSize:15,height:18},children:"\u041c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043d\u0435 \u0442\u043e\u0447\u043d\u044b\u0439"})]})})]})]})})})})),ce=function(e){var t=e.point1,c=e.point2,i=Math.PI,n=Math.pow(Math.pow(t.latitude-c.latitude,2)+Math.pow(c.longitude-c.longitude,2),.5)/180*i*6371;return+String(n).slice(0,3)},ie=function(e){var t=e.id,c=e.snackbar,n=e.bgApp,s=e.isGoodWind,a=e.city,r=e.go,l=e.isInit,d=e.nativeCityId,j=e.isCitySubscribed,b=e.subscribeNoticification,u=e.unsubsubscribeNoticification,x=e.doStory,g=Object(i.useState)(!1),f=Object(h.a)(g,2),y=f[0],A=f[1],S=Object(i.useState)(!1),I=Object(h.a)(S,2),E=I[0],T=I[1],R=Object(i.useState)([]),D=Object(h.a)(R,2),U=D[0],P=D[1];Object(i.useEffect)((function(){return a&&(J(a.name).then((function(e){e.data&&P(e.data.stations)})),A(!1)),function(){A(!1)}}),[a]);var z=function(){r("FORECAST_POLLUTION_FOR_THE_DAY")},K=a?U.map((function(e,t){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(te,{distance:ce({point1:e.coordinates,point2:a.coordinates}),stationName:e.name,value:e.aqi,mode:e.aqi>100?"danger":e.aqi>50?"okay":"good"},"".concat(t).concat(e.name)),t+1!==U.length&&Object(_.jsx)(O.w,{className:"spacing",separator:!0,size:16})]})})):[],Y=a?a.current.pollutants.map((function(e,t){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(L,{bgApp:n,title:W(e.pollutantName),value:e.concentration,aqi:e.aqi,tooltipDescription:Q(e.pollutantName),bar:e.aqi>100?"bad_bar":e.aqi>50?"okay_bar":"good_bar"},"".concat(t).concat(e.pollutantName)),t+1!==a.current.pollutants.length&&Object(_.jsx)(O.w,{className:"spacing",separator:!0,size:32})]})})):[],q=(new Date).getDay(),H=a?a.forecasts.daily.map((function(e,t){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(B,{onClick:z,day:q+t+1,value:e.aqi,mode:e.aqi>100?"danger":e.aqi>50?"okay":"good"},"".concat(t,"-").concat(e.temperature).concat(e.aqi)),t+1!==a.forecasts.daily.length&&Object(_.jsx)(O.w,{className:"spacing",separator:!0,size:16})]})})):[];return Object(_.jsx)(O.q,{id:t,children:Object(_.jsxs)(O.j,{style:{paddingTop:42},className:n,children:[E&&Object(_.jsx)("div",{onClick:function(){T(!1)},style:{display:"flex",justifyContent:"center",flexDirection:"column",position:"fixed",zIndex:1e3,width:"100%",height:"100%"},children:Object(_.jsx)(k,{})}),Object(_.jsxs)(O.g,{className:l?"bg__init card":"card "+(a&&a.current.aqi<=50?"home__good__weather":a&&a.current.aqi<=100?"home__okay__weather":"home__bad__weather"),children:[Object(_.jsx)("div",{className:"home__main__title",children:l?Object(_.jsx)("div",{style:{height:24,width:61},className:"bg__init__home"}):Object(_.jsxs)("div",{style:{fontSize:24,fontWeight:"inherit",lineHeight:2.2,color:"rgba(0,0,0,0.5)"},className:"text__SF-Pro-Rounded-Semibold",children:[a&&a.current.aqi," AQI"]})}),Object(_.jsxs)("div",{className:"center__x text__Inter-Medium",style:{color:"rgba(0,0,0,0.5)"},children:[l&&Object(_.jsx)("div",{style:{height:16,width:97,marginTop:10},className:"bg__init__home"}),Object(_.jsx)("div",{style:{fontSize:17},className:"center__y",children:a&&d!==a.id&&!l&&Object(_.jsx)(v.a,{fill:"rgba(0,0,0,0.5)",style:{marginRight:3}})}),!l&&a&&a.name]}),Object(_.jsxs)("div",{className:"mt-4 home__main__bottom__side",children:[Object(_.jsx)("div",{children:Object(_.jsx)("div",{className:"home__search__cell__rounded home__search__cell__rounded_active",onClick:function(){return r("POLLUTION_CITIES")},style:{opacity:.5},children:Object(_.jsx)(O.c,{style:{backgroundColor:"rgba(255, 255, 255, 0.35)"},shadow:!1,children:!l&&Object(_.jsx)(C.a,{fill:"#000"})})})}),Object(_.jsxs)("div",{className:"home__main__bottom__right__side",children:[Object(_.jsx)("div",{style:{opacity:.5},onClick:a?j?u:b:function(){},className:"home__search__cell__rounded home__search__cell__rounded_active",children:Object(_.jsx)(O.c,{style:{backgroundColor:"rgba(255, 255, 255, 0.35)"},shadow:!1,children:!l&&Object(_.jsx)(p.a,{fill:"#000"})})}),Object(_.jsx)("div",{className:"ml-1",style:{opacity:.5},onClick:a?x:function(){},children:Object(_.jsx)(O.c,{className:"home__search__cell__rounded home__search__cell__rounded_active",style:{backgroundColor:"rgba(255, 255, 255, 0.35)"},shadow:!1,children:!l&&Object(_.jsx)(m.a,{fill:"#000"})})})]})]})]}),Object(_.jsxs)(O.g,{children:[a&&!l&&Object(_.jsx)(V,{bgApp:n,doStory:x,pollution:a.recommendations.pollution,isGoodWind:s}),l&&Object(_.jsx)(O.e,{className:"card__app",mode:"shadow",children:Object(_.jsxs)("div",{className:"d-flex",children:[Object(_.jsx)("div",{className:"bg__init",style:{height:24,width:24,borderRadius:2e4}}),Object(_.jsx)("div",{className:"bg__init ml-2",style:{height:17,width:122}})]})})]}),Object(_.jsxs)(O.g,{children:[Object(_.jsx)(O.k,{className:"text__SF-Pro-Rounded-Semibold",children:l?Object(_.jsx)("div",{style:{height:12,width:85},className:"bg__init"}):Object(_.jsx)("span",{className:"text__gray",children:"\u0417\u0410\u0413\u0420\u042f\u0417\u041d\u0418\u0422\u0415\u041b\u0418"})}),Object(_.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(_.jsxs)("div",{className:"card__app",children:[l&&[3,2,1,0].map((function(e){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 50px"},children:[Object(_.jsx)("div",{style:{width:91,height:17},className:"bg__init"}),Object(_.jsx)("div",{style:{width:24,height:24,display:"flex",justifyContent:"end"},className:"bg__init"})]},"pollutant".concat(e)),0!==e&&Object(_.jsx)(O.w,{separator:!0,size:32})]})})),!l&&Object(o.a)(Y).slice(0,4),!y&&Y.length>4&&Object(_.jsx)(O.f,{onClick:function(){return A(!0)},children:Object(_.jsx)(F,{bgApp:n,description:Object(_.jsx)(O.l,{children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"}),children:Object(_.jsx)(w.a,{fill:"#4475F1"})})}),y&&!l&&Object(_.jsx)(_.Fragment,{children:Object(o.a)(Y).slice(4,6)})]})})]}),Object(_.jsxs)(O.g,{children:[Object(_.jsx)(O.k,{className:"text__SF-Pro-Rounded-Semibold",children:l?Object(_.jsx)("div",{style:{height:12,width:85},className:"bg__init"}):Object(_.jsx)("span",{className:"text__gray",children:"\u041f\u0420\u041e\u0413\u041d\u041e\u0417 \u041d\u0410 \u041d\u0415\u0414\u0415\u041b\u042e"})}),Object(_.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(_.jsxs)("div",{className:"",children:[l&&[5,6,7,8,9,4,10].map((function(e){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"24px 1fr 50px",gridGap:"10px"},children:[Object(_.jsx)("div",{style:{width:24,height:24},className:"bg__init"}),Object(_.jsx)("div",{style:{width:91,height:17},className:"bg__init"}),Object(_.jsx)("div",{style:{width:52,height:24,display:"flex",justifyContent:"end"},className:"bg__init"})]},"weather".concat(e)),10!==e&&Object(_.jsx)(O.w,{separator:!0,size:16})]})})),!l&&H]})})]}),0!==U.length&&Object(_.jsxs)(O.g,{children:[Object(_.jsx)(O.k,{className:"text__SF-Pro-Rounded-Semibold",children:l?Object(_.jsx)("div",{style:{height:12,width:85},className:"bg__init"}):Object(_.jsx)("span",{className:"text__gray",children:"\u0421\u0442\u0430\u043d\u0446\u0438\u0438"})}),Object(_.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(_.jsxs)("div",{className:"",children:[l&&[5,6,7,8,9,4,10].map((function(e){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"24px 1fr 50px",gridGap:"10px"},children:[Object(_.jsx)("div",{style:{width:24,height:24},className:"bg__init"}),Object(_.jsx)("div",{style:{width:91,height:17},className:"bg__init"}),Object(_.jsx)("div",{style:{width:52,height:24,display:"flex",justifyContent:"end"},className:"bg__init"})]},"station".concat(e)),10!==e&&Object(_.jsx)(O.w,{separator:!0,size:16})]})})),!l&&K]})})]}),Object(_.jsxs)(O.i,{style:{paddingTop:4,paddingLeft:4},children:[Object(_.jsx)(O.g,{className:"text__SF-Pro-Rounded-Semibold",children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0430"}),Object(_.jsx)(O.g,{className:"",children:Object(_.jsx)("img",{src:N})})]}),Object(_.jsx)(O.h,{children:c})]})})},ne=(c(165),c(169)),se=c(181),ae=c(182),re=function(e){var t=e.day,c=e.month,n=e.city,s=e.id,a=e.handlerClose,r=e.isGoodWind;return Object(_.jsx)(O.n,{onClose:a,header:Object(_.jsx)(O.o,{right:Object(_.jsx)(O.r,{onClick:a,children:Object(_.jsx)(ne.a,{})})}),settlingHeight:100,id:s,children:Object(_.jsx)(i.Fragment,{children:Object(_.jsxs)(O.j,{children:[Object(_.jsxs)(O.g,{className:"w-100 text__dark_gray",children:[Object(_.jsx)("h3",{className:"center__x",children:"6 AQI"}),Object(_.jsxs)("div",{className:"center__x",children:[Object(_.jsxs)("div",{className:"d-flex",children:[Object(_.jsx)(v.a,{style:{marginTop:3,marginRight:3}}),n]}),Object(_.jsxs)("div",{className:"d-flex ml-2",children:[Object(_.jsx)(se.a,{style:{marginTop:3,marginRight:3}}),t," ",c]})]})]}),Object(_.jsx)(O.g,{children:Object(_.jsx)(O.e,{mode:"shadow",children:Object(_.jsxs)("div",{className:"d-flex text__dark_gray p-2",children:[Object(_.jsx)("div",{className:"center__y",children:Object(_.jsx)(ae.a,{})}),Object(_.jsx)("div",{className:"ml-2",children:r?"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c \u041e\u041e\u041d.":"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u043f\u043b\u043e\u0445\u043e\u0435 \u0438 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u041e\u041e\u041d."})]})})}),Object(_.jsxs)(O.g,{children:[Object(_.jsx)(O.k,{children:Object(_.jsx)("span",{className:"text__gray",children:"\u0417\u0410\u0413\u0420\u042f\u0417\u041d\u0418\u0422\u0415\u041b\u0418"})}),Object(_.jsx)(O.e,{mode:"shadow",children:Object(_.jsx)("div",{className:"p-2"})})]}),Object(_.jsx)(O.w,{size:64})]})})})},le=c(46),oe=c(183),de=function(e){var t=e.city,c=e.country,n=e.value,s=e.onClick,a=Object(i.useState)("bg__good"),r=Object(h.a)(a,2),l=r[0],o=r[1];return Object(i.useEffect)((function(){n&&o(n>=100?"bg__danger":n>=50?"bg__okay":"bg__good")}),[n]),Object(_.jsxs)("div",{onClick:s,className:"highlight_on_touch",style:{display:"grid",gridTemplateColumns:"1fr 50px"},children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{style:{fontSize:16},children:t}),Object(_.jsx)("div",{style:{fontSize:15,color:"#606060"},children:c})]}),n&&Object(_.jsx)("div",{children:Object(_.jsx)(U,{color:l,value:n,children:n})})]})},je=function(e){var t=e.id,c=e.bgApp,n=e.countryId,s=e.handlerClose,a=e.setDefaultCity,r=e.countryName,l=e.myCity,o=e.myCityId,d=e.isAllowedPlace,j=e.requestPermissionLocation,u=Object(i.useState)(""),x=Object(h.a)(u,2),p=x[0],m=x[1],g=Object(i.useState)([]),f=Object(h.a)(g,2),y=f[0],A=f[1],v=Object(i.useState)([]),C=Object(h.a)(v,2),N=C[0],w=C[1],S=Object(i.useState)(!0),k=Object(h.a)(S,2),I=k[0],E=k[1];Object(i.useEffect)((function(){E(!0),J(p.length>2?p:r).then((function(e){var t=e.data;A(t.cities),E(!1)})).catch((function(e){E(!1)}))}),[p]),Object(i.useEffect)((function(){E(!0),J(r).then((function(e){var t=e.data;A(t.cities),function(e){return X.post("rank".concat(window.location.search),{id:e}).then((function(e){return e.data})).catch((function(e){return e.response.data}))}(n).then((function(e){var t=e.data;w(t),E(!1)}))})).catch((function(e){E(!1)}))}),[]);var T=y.map((function(e,t){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(O.g,{className:"",children:Object(_.jsx)(de,Object(b.a)({onClick:function(){a(e.id),s()},city:e.name},e))},e.id),t+1!==y.length&&Object(_.jsx)(O.w,{separator:!0,className:"spacing",size:8})]})})),R=N.map((function(e,t){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(O.g,{className:"",children:Object(_.jsx)(de,Object(b.a)(Object(b.a)({value:e.aqi?e.aqi:10,onClick:function(){a(e.id),s()},city:e.name},e),{},{country:r}))},e.id),t+1!==y.length&&Object(_.jsx)(O.w,{className:"spacing",separator:!0,size:8})]})}));return Object(_.jsx)(O.n,{settlingHeight:100,header:Object(_.jsx)(O.o,{className:"bg__app__light"===c?"modal__app__light":"modal__app__dark",right:Object(_.jsx)(O.r,{onClick:s,children:Object(_.jsx)(ne.a,{})})}),id:t,children:Object(_.jsxs)(O.j,{className:c,children:[Object(_.jsx)("div",{children:Object(_.jsx)(O.t,{value:p,onChange:function(e){m(e.target.value)},className:c})}),Object(_.jsx)(O.g,{children:Object(_.jsx)(O.e,{mode:"shadow",className:"card__app",style:{padding:0,overflow:"hidden"},children:Object(_.jsx)(O.f,{onClick:function(){d?(a(o),s()):j()},children:Object(_.jsxs)("div",{className:"card__app",children:[!I&&Object(_.jsx)(F,{bgApp:c,description:Object(_.jsx)("div",{children:d?Object(_.jsxs)(_.Fragment,{children:[" ",Object(_.jsx)("div",{style:{fontSize:16},children:l}),Object(_.jsx)("div",{style:{fontSize:15},className:"text__gray",children:"\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"})," "]}):Object(_.jsxs)("div",{style:{color:"#4475F1",fontSize:16},children:[Object(_.jsx)("div",{children:"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f"}),Object(_.jsx)("div",{children:"\u043a \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044e"})]})}),children:Object(_.jsx)(oe.a,{className:"",fill:"#4475F1"})}),I&&Object(_.jsx)(F,{bgApp:c,description:Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{style:{width:122,height:16},className:"bg__init"}),Object(_.jsx)("div",{style:{width:88,height:12},className:"bg__init mt-1"})]}),children:Object(_.jsx)("div",{style:{height:24,width:24,borderRadius:2e4},className:"bg__init"})})]})})})}),Object(_.jsxs)(O.g,{children:[Object(_.jsx)(O.k,{className:"text__SF-Pro-Rounded-Semibold",children:I?Object(_.jsx)("div",{className:"bg__init",style:{width:85,height:12}}):Object(_.jsx)("span",{className:"text__gray",children:p.length>0?"\u0412\u0421\u0415":"\u0421 \u041d\u0418\u0417\u041a\u0418\u041c\u0418 \u041f\u041e\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u042f\u041c\u0418"})}),Object(_.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(_.jsxs)(O.j,{children:[I?p.length>0?Object(_.jsx)(ue,{}):Object(_.jsx)(be,{}):Object(_.jsx)(_.Fragment,{}),!I&&p.length>0?T:R]})})]}),Object(_.jsxs)(O.g,{children:[Object(_.jsx)(O.k,{className:"text__SF-Pro-Rounded-Semibold",children:I?Object(_.jsx)("div",{className:"bg__init",style:{width:85,height:12}}):Object(_.jsx)("span",{className:"text__gray",children:p.length>0?"\u0421 \u041d\u0418\u0417\u041a\u0418\u041c\u0418 \u041f\u041e\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u042f\u041c\u0418":"\u0412\u0421\u0415"})}),Object(_.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(_.jsx)(O.j,{children:Object(_.jsxs)(O.j,{className:"",children:[I?p.length>0?Object(_.jsx)(be,{}):Object(_.jsx)(ue,{}):Object(_.jsx)(_.Fragment,{}),T.length>0?p.length>0?R:T:Object(_.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:"\u0413\u043e\u0440\u043e\u0434\u043e\u0432 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."})]})})})]}),Object(_.jsx)(O.w,{size:70})]})})},be=function(e){Object(le.a)(e);var t=[2,3,4,5,1].map((function(e){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)(O.g,{className:"px-2",style:{display:"grid",gridTemplateColumns:"1fr 50px"},children:[Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{style:{width:122,height:16},className:"bg__init"}),Object(_.jsx)("div",{style:{width:88,height:12},className:"bg__init mt-1"})]}),Object(_.jsx)("div",{style:{width:44,height:24,borderRadius:2e4},className:"bg__init mt-1"})]},"clearCity".concat(e)),1!==e&&Object(_.jsx)(O.w,{separator:!0,size:8})]})}));return Object(_.jsx)(_.Fragment,{children:t})},ue=function(e){Object(le.a)(e);var t=[2,3,4,5,1].map((function(e){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(O.g,{className:"px-2",children:Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{style:{width:122,height:16},className:"bg__init"}),Object(_.jsx)("div",{style:{width:88,height:12},className:"bg__init mt-1"})]})},"city".concat(e)),1!==e&&Object(_.jsx)(O.w,{separator:!0,size:8})]})}));return Object(_.jsx)(_.Fragment,{children:t})},he=c(184),Oe=function(e){var t=e.id,c=e.handleClose,i=e.cityFromSearch,n=e.cityOfUser,s=e.setCitySearch,a=e.toHome;return Object(_.jsxs)(O.m,{onClose:c,id:t,children:[Object(_.jsx)(O.f,{onClick:function(){s(i.id),a()},children:Object(_.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"140px 28px 1fr"},children:[Object(_.jsx)("div",{children:"\u0413\u043e\u0440\u043e\u0434 \u0438\u0437 \u043f\u043e\u0438\u0441\u043a\u0430"}),Object(_.jsx)("div",{className:"center__x",children:Object(_.jsx)(he.a,{fill:"#808080"})}),Object(_.jsxs)("div",{style:{display:"flex",justifyContent:"end"},children:[Object(_.jsx)("div",{style:{marginTop:2},className:"center__y",children:Object(_.jsx)(v.a,{fill:"#808080",className:"mr-1"})}),Object(_.jsx)("div",{className:"center__y",children:i.name})]})]})}),Object(_.jsx)(O.f,{onClick:function(){s(n.id),a()},children:Object(_.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"140px 28px 1fr"},children:[Object(_.jsxs)("div",{children:["\u0422\u0435\u043a\u0443\u0449\u0435\u0435",Object(_.jsx)("div",{children:"\u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"})]}),Object(_.jsx)("div",{className:"center__x",children:Object(_.jsx)(he.a,{fill:"#808080"})}),Object(_.jsx)("div",{style:{display:"flex",justifyContent:"end",marginTop:2},children:n.name})]})})]})},xe=c(22),pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAOCAYAAAAWo42rAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC8SURBVHgBfZAxC8JADIXTq+jkYrcuDoKbP6Czq3/Av9pJV8HJyQ7ipItOCqIg9L2SK2mgDXxHuHt5lySRbuRgBibgCa7xITGiAqxc4QuULEoHRKLOC3ChcArW5vEGKr2ncAQyHnMjOoO95new0TwLWhXj55zbFoI2HGNpvizM/YNTj8HWOfs4Bf2ukuFohE0Cvj0iDviOe6QrN5A7Efvf8T1Ye+kOxjjSjYkV0rV0X7a9p87howV/cBCz1xonDSbmODszXAAAAABJRU5ErkJggg==",me=c(32),ge=c.n(me),_e=function(e){var t=e.text,c=e.resultOperation,i=e.closeHandler;return Object(_.jsx)(O.v,{onClose:i,before:Object(_.jsx)("img",{src:c?Y:K}),children:Object(_.jsx)("div",{className:"text__SF-Pro-Rounded-Regular",style:{fontSize:15},children:t})})},fe=(c.p,c.p,c.p,c(185)),ye=function(e){var t=e.id,c=e.subscribeNoticification,i=(e.bgApp,e.closeHandler);return Object(_.jsx)(O.m,{id:t,onClose:i,icon:Object(_.jsx)(fe.a,{fill:"#4475F1"}),header:Object(_.jsx)("div",{className:"text__Inter-Bold",children:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f?"}),subheader:Object(_.jsxs)("div",{className:"text__Inter-Regular",children:["\u041c\u044b \u0431\u0443\u0434\u0435\u043c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u044f\u0442\u044c \u0432\u0430\u0441 \u043e\u0431 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u043c \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u0440\u0430\u0437 \u0432 \u043d\u0435\u0434\u0435\u043b\u044e, \u0430 \u0442\u0430\u043a\u0436\u0435:",Object(_.jsx)("div",{style:{marginTop:10},children:"- \u0415\u0441\u043b\u0438 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u0441\u0442\u0430\u043d\u0435\u0442 \u043d\u0435 \u043f\u0440\u0438\u0435\u043c\u043b\u0438\u043c\u044b\u043c"}),Object(_.jsx)("div",{style:{marginTop:5},children:"- \u041e \u0440\u0435\u0437\u043a\u0438\u0445 \u0441\u043a\u0430\u0447\u043a\u0430\u0445 \u043a\u043e\u043b\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0437\u0430\u0433\u0440\u044f\u0437\u043d\u0438\u0442\u0435\u043b\u0435\u0439"})]}),actions:Object(_.jsx)(O.d,{size:"l",mode:"primary",onClick:function(){c(),i()},className:"text__Inter-Medium",children:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c"})})},Ae="INFO",ve="POLLUTION_CITIES",Ce="HOME",Ne="FORECAST_POLLUTION_FOR_THE_DAY",we="MY_CITIES",Se="TURN_NOTICIFICATIONS",ke={IS_CHECK_INFO:"IS_CHECK_INFO",IS_ALLOWED_PLACE:"IS_ALLOWED_PLACE",DEFAULT_CITY_ID:"DEFAULT_CITY_ID",DEFAULT_COUNTRY_NAME:"DEFAULT_COUNTRY_NAME",DEFAULT_COUNTRY_ID:"DEFAULT_COUNTRY_ID"},Ie="5b163b6f7fa2b15e076ad2a6",Ee="qNvxAidZLbwhRmQXR",Fe="\u0420\u043e\u0441\u0441\u0438\u044f",Te=function(e){var t=e.x,c=ge()(pe),i=Object(h.a)(c,1)[0];return Object(_.jsx)(xe.a,{x:t,y:130,image:i})},Re=function(){var e=ge()("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAALCAYAAACzkJeoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABvSURBVHgBdZAxCoAwDEVTs3TwAI4ODh7Bmzh6Ng/VUXARPICDg4M/8IcoaeCRwvtNSkVEMhjZP6VgADN7AY+XF0X3DygPJQooJ4QBdfstsIEJtOBonMx8mNUJ9uTEwpEmVnCnmrAbNraPhN8V/tALxhgbBZpF7PYAAAAASUVORK5CYII="),t=Object(h.a)(e,1)[0];return Object(_.jsx)(xe.a,{x:188.6,y:205.6,image:t})},Le=function(){var e=Object(i.useState)(!1),t=Object(h.a)(e,2),c=t[0],s=t[1],a=Object(i.useState)(Ce),r=Object(h.a)(a,2),d=r[0],x=(r[1],Object(i.useState)(null)),p=Object(h.a)(x,2),m=(p[0],p[1],Object(i.useState)(Object(_.jsx)(O.s,{size:"large"}))),g=Object(h.a)(m,2),f=g[0],A=(g[1],Object(i.useState)(null)),v=Object(h.a)(A,2),C=v[0],N=v[1],w=Object(i.useState)(null),S=Object(h.a)(w,2),k=S[0],I=S[1],E=Object(i.useState)({isCheckInfo:!1,isAllowedPlace:!1,defaultCityId:Ie,defaultCountryId:Ee,ecoCity:null,nativeCity:null,subscribedCities:[],defaultCountryName:Fe}),F=Object(h.a)(E,2),T=F[0],R=F[1],L=function(){N(null)},D=Object(i.useState)("mobile"),U=Object(h.a)(D,2),P=U[0],B=U[1],z=Object(i.useState)("bg__app__light"),K=Object(h.a)(z,2),Y=K[0],q=K[1];Object(i.useEffect)(Object(u.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=function(){return(c=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.send("VKWebAppStorageGet",{keys:Object.values(ke)});case 2:t=e.sent,t.keys.forEach((function(e){var t=e.value?JSON.parse(e.value):null;switch(e.key){case ke.IS_CHECK_INFO:t?R((function(e){return Object(b.a)(Object(b.a)({},e),{},{isCheckInfo:!0})})):N(Ae);break;case ke.IS_ALLOWED_PLACE:t&&R((function(e){return Object(b.a)(Object(b.a)({},e),{},{isAllowedPlace:!0})}));break;case ke.DEFAULT_COUNTRY_ID:t&&R((function(t){return Object(b.a)(Object(b.a)({},t),{},{defaultCountryId:e.value})}));case ke.DEFAULT_CITY_ID:t&&R((function(t){return Object(b.a)(Object(b.a)({},t),{},{defaultCityId:e.value})}));break;case ke.DEFAULT_COUNTRY_NAME:t&&R((function(t){return Object(b.a)(Object(b.a)({},t),{},{defaultCountryName:e.value})}))}}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)},t=function(){return c.apply(this,arguments)},l.a.subscribe((function(e){var t=e.detail,c=t.type,i=t.data;if("VKWebAppUpdateConfig"===c){console.log(i.appearance);var n=document.createAttribute("scheme");n.value=i.scheme?i.scheme:"client_light";var s=new RegExp("light");"vkcom"===i.scheme||i.scheme.match(s)?(q("bg__app__light"),"vkcom"===i.scheme?B("pc"):B("mobile"),l.a.send("VKWebAppSetViewSettings",{status_bar_style:"light",action_bar_color:"#F5F5F5"})):(q("bg__app__dark"),l.a.send("VKWebAppSetViewSettings",{status_bar_style:"dark",action_bar_color:"#373737"})),document.body.attributes.setNamedItem(n)}})),t();case 4:case"end":return e.stop()}}),e)}))),[]);var H=function(){try{l.a.send("VKWebAppStorageSet",{key:ke.IS_CHECK_INFO,value:"true"}),R((function(e){return Object(b.a)(Object(b.a)({},e),{},{isCheckInfo:!0})})),L()}catch(e){}};Object(i.useEffect)(Object(u.a)(j.a.mark((function e(){var t,c,i,n,a,r,o,d,u,h,O;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.isAllowedPlace){e.next=39;break}return e.prev=1,s(!0),e.next=5,l.a.send("VKWebAppGetGeodata",{key:"location"});case 5:return t=e.sent,c=t.lat,i=t.long,e.next=10,$(c,i);case 10:return n=e.sent,a=n.city,r=Ie,o=Ee,d=Fe,u=a,e.next=18,J(u);case 18:return h=e.sent.data,O=null,h.cities.forEach((function(e){e.name!==u||O||(r=e.id,O=e)})),e.next=23,J(O.country);case 23:e.sent.data.countries.forEach((function(e){e.name===O.country&&(o=e.id,d=e.name)})),l.a.send("VKWebAppStorageSet",{key:ke.DEFAULT_COUNTRY_NAME,value:d}),R((function(e){return Object(b.a)(Object(b.a)({},e),{},{defaultCountryId:d})})),l.a.send("VKWebAppStorageSet",{key:ke.DEFAULT_COUNTRY_ID,value:o}),R((function(e){return Object(b.a)(Object(b.a)({},e),{},{defaultCountryId:o})})),l.a.send("VKWebAppStorageSet",{key:ke.DEFAULT_CITY_ID,value:r}),R((function(e){return Object(b.a)(Object(b.a)({},e),{},{defaultCityId:r})})),R((function(e){return Object(b.a)(Object(b.a)({},e),{},{nativeCity:O})})),s(!1),e.next=39;break;case 35:e.prev=35,e.t0=e.catch(1),l.a.send("VKWebAppStorageSet",{key:ke.DEFAULT_CITY_ID,value:T.defaultCityId}),s(!1);case 39:case"end":return e.stop()}}),e,null,[[1,35]])}))),[T.isAllowedPlace]),Object(i.useEffect)(Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,Z(T.defaultCityId);case 3:(t=e.sent.data)&&(R((function(e){return Object(b.a)(Object(b.a)({},e),{},{ecoCity:t})})),T.nativeCity||R((function(e){return Object(b.a)(Object(b.a)({},e),{},{nativeCity:t})}))),s(!1);case 6:case"end":return e.stop()}}),e)}))),[T.defaultCityId]);var V=function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.location.hash.slice(1)){e.next=7;break}return s(!0),e.next=4,Z(window.location.hash.slice(1));case 4:(t=e.sent.data)&&R((function(e){return Object(b.a)(Object(b.a)({},e),{},{ecoCity:t})})),s(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)(Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V();case 1:case"end":return e.stop()}}),e)}))),[window.location.hash]),Object(i.useEffect)(Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.get("subscribe".concat(window.location.search)).then((function(e){return e.data.data}));case 2:t=e.sent,R((function(e){return Object(b.a)(Object(b.a)({},e),{},{subscribedCities:Object(o.a)(t)})}));case 4:case"end":return e.stop()}}),e)}))),[]);var W=function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.send("VKWebAppGetGeodata",{key:"location"}).then((function(e){l.a.send("VKWebAppStorageSet",{key:ke.IS_ALLOWED_PLACE,value:JSON.stringify(!0)}).then((function(e){R((function(e){return Object(b.a)(Object(b.a)({},e),{},{isAllowedPlace:!0})}))}))})).catch((function(e){R((function(e){return Object(b.a)(Object(b.a)({},e),{},{isAllowedPlace:!0})}))}));case 2:H();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=Object(i.useRef)(null),G=Object(i.useRef)(null),M=n.a.useCallback(Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},t="pc"===P?{background_type:"image",blob:G.current.toDataURL()}:{background_type:"none"},e.next=5,l.a.send("VKWebAppShowStoryBox",Object(b.a)(Object(b.a)({},t),{},{stickers:[{sticker_type:"renderable",sticker:{can_delete:!1,content_type:"image",blob:Q.current.toDataURL(),clickable_zones:[{action_type:"link",action:{link:"https://vk.com/app7991717#".concat(T.ecoCity.id),tooltip_text_key:"tooltip_open_default"}}],transform:{gravity:"center",relation_width:1}}}]})).catch((function(e){I(Object(_.jsx)(_e,{closeHandler:ee,resultOperation:!0,text:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}))})).then((function(e){e.result?I(Object(_.jsx)(_e,{closeHandler:ee,resultOperation:!0,text:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u0430"})):I(Object(_.jsx)(_e,{closeHandler:ee,resultOperation:!1,text:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),I(Object(_.jsx)(_e,{closeHandler:ee,resultOperation:!1,text:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[Q,T.ecoCity,G]),ee=function(){I(null)},te=function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.send("VKWebAppAllowNotifications");case 3:if(!e.sent.result||!T.ecoCity){e.next=7;break}return e.next=7,t=T.ecoCity.id,X.post("subscribe".concat(window.location.search),{id:t});case 7:R((function(e){return Object(b.a)(Object(b.a)({},e),{},{subscribedCities:[].concat(Object(o.a)(e.subscribedCities),[{cityId:T.ecoCity.id}])})})),I(Object(_.jsx)(_e,{closeHandler:ee,resultOperation:!0,text:"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u044b"})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),I(Object(_.jsx)(_e,{closeHandler:ee,resultOperation:!1,text:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}));case 14:case"end":return e.stop()}var t}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.send("VKWebAppDenyNotifications");case 3:if(!e.sent.result||!T.ecoCity){e.next=7;break}return e.next=7,t=T.ecoCity.id,X.delete("subscribe".concat(window.location.search),{data:{id:t}});case 7:R((function(e){return Object(b.a)(Object(b.a)({},e),{},{subscribedCities:Object(o.a)(e.subscribedCities.filter((function(e){return e.cityId!==T.ecoCity.id})))})})),I(Object(_.jsx)(_e,{resultOperation:!0,closeHandler:ee,text:"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u044b"})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),I(Object(_.jsx)(_e,{closeHandler:ee,resultOperation:!1,text:"\u0412\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}));case 14:case"end":return e.stop()}var t}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),ne=Object(_.jsxs)(O.p,{onClose:L,activeModal:C,children:[Object(_.jsx)(Oe,{toHome:L,cityFromSearch:T.ecoCity,cityOfUser:T.nativeCity,setCitySearch:function(e){return R((function(t){return Object(b.a)(Object(b.a)({},t),{},{defaultCityId:e})}))},handleClose:function(){N(ve)},id:we}),Object(_.jsx)(y,{bgApp:Y,checkInfo:H,requestPermissionLocation:W,id:Ae,handlerClose:L}),Object(_.jsx)(re,{id:Ne,handlerClose:L,day:3,month:"\u041d\u043e\u044f\u0431\u0440\u044c",city:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433"}),Object(_.jsx)(ye,{bgApp:Y,id:Se,closeHandler:L,subscribeNoticification:te}),Object(_.jsx)(je,{requestPermissionLocation:W,isAllowedPlace:T.isAllowedPlace,bgApp:Y,myCityId:T.nativeCity?T.nativeCity.id:Ie,myCity:T.nativeCity?T.nativeCity.name:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",onClickMyCities:function(){N(we)},setDefaultCity:function(e){return R((function(t){return Object(b.a)(Object(b.a)({},t),{},{defaultCityId:e})}))},countryName:T.defaultCountryName,countryId:T.defaultCountryId,handlerClose:L,id:ve})]});return Object(_.jsxs)(O.a,{children:[Object(_.jsx)(O.b,{activePanel:d,popout:f,children:Object(_.jsx)(O.x,{activePanel:Ce,modal:ne,children:Object(_.jsx)(ie,{snackbar:k,subscribeNoticification:function(){return N(Se)},unsubsubscribeNoticification:ce,isCitySubscribed:!!T.ecoCity&&T.subscribedCities.some((function(e){return e.cityId===T.ecoCity.id})),bgApp:Y,doStory:M,nativeCityId:T.nativeCity?T.nativeCity.id:Ie,isInit:c,go:function(e){N(e)},city:T.ecoCity?T.ecoCity:null,id:Ce,isGoodWind:!T.ecoCity||!T.ecoCity.current||T.ecoCity.current.aqi<=50})})}),Object(_.jsxs)("div",{id:"canvas",style:{width:0,height:0,opacity:0},children:[Object(_.jsx)(xe.d,{width:253,height:250,ref:G,children:Object(_.jsx)(xe.b,{children:Object(_.jsx)(xe.c,{fillLinearGradientStartPoint:{x:0,y:-100},width:253,height:250,fillLinearGradientEndPoint:{x:120,y:220},fillLinearGradientColorStops:[0,"#EBEBEB",1,"#E0E0E0"]})})}),Object(_.jsx)(xe.d,{ref:Q,style:{width:253,height:250,borderRadius:20},width:253,height:250,children:Object(_.jsxs)(xe.b,{children:[Object(_.jsx)(xe.c,{fillLinearGradientStartPoint:{x:0,y:-100},fillLinearGradientEndPoint:{x:120,y:220},fillLinearGradientColorStops:T.ecoCity&&T.ecoCity.current.aqi>100?[0,"rgba(255,153,182,1)",1,"rgba(204,183,254,1)"]:T.ecoCity&&T.ecoCity.current.aqi>50?[0,"#FDCFB2",1,"#BF8FF5"]:[0,"#B3FF86",1,"#EEFFC8"],width:253,height:250,cornerRadius:20}),Object(_.jsx)(xe.e,{fontFamily:"SF-Pro-Rounded-Heavy",text:"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430:",x:55,fontSize:15,y:52,fill:"rgba(0, 0, 0, 0.5)",width:150,height:30}),Object(_.jsx)(xe.e,{fontFamily:"SF-Pro-Rounded-Heavy",text:T.ecoCity&&T.ecoCity.current.aqi>100?"\u041f\u043b\u043e\u0445\u043e\u0435":T.ecoCity&&T.ecoCity.current.aqi>50?"\u041d\u0435\u043f\u043b\u043e\u0445\u043e\u0435":"\u0425\u043e\u0440\u043e\u0448\u0435\u0435",x:T.ecoCity&&T.ecoCity.current.aqi>100?66:T.ecoCity&&T.ecoCity.current.aqi>50?48:53.5,fontSize:32,y:76,fill:"rgba(0, 0, 0, 0.5)",width:T.ecoCity&&T.ecoCity.current.aqi>100?161:176,height:38}),Object(_.jsx)(xe.e,{fontFamily:"SF-Pro-Rounded-Regular",text:T.ecoCity?T.ecoCity.name:"SPb",x:(253-(T.ecoCity?8*T.ecoCity.name.length:10))/2,fontSize:17,y:130,fill:"rgba(0, 0, 0, 0.5)",width:200,height:100}),Object(_.jsx)(xe.c,{x:42,y:191,width:169,fill:"rgba(255,255,255,0.5)",height:39,cornerRadius:28}),Object(_.jsx)(xe.e,{text:"\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435",width:200,height:39,x:56,fontSize:18,fontFamily:"SF-Pro-Rounded-Regular",fill:"rgba(0, 0, 0, 0.5)",y:201}),Object(_.jsx)(Te,{x:(253-(T.ecoCity?8*T.ecoCity.name.length:10)-30)/2}),Object(_.jsx)(Re,{})]})})]})]})};l.a.send("VKWebAppInit"),a.a.render(Object(_.jsx)(Le,{}),document.getElementById("root"))}},[[168,1,2]]]);
//# sourceMappingURL=main.609fbc78.chunk.js.map