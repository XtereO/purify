{"version":3,"sources":["panels/Intro.js","media/IQAir_logo.svg","media/loader.gif","bricks/Loader.tsx","bricks/ListItem.tsx","bricks/Tooltip.tsx","bricks/PollutionItem.tsx","bricks/Badge.tsx","utils/getDayOfWeek.ts","bricks/WeatherItem.tsx","media/mask.svg","media/window.svg","media/score_high.svg","media/score_low.svg","bricks/Advice.tsx","utils/pollutants.ts","dal/api.ts","media/station.svg","bricks/StationItem.tsx","utils/getDistance.ts","panels/Home.tsx","panels/ForecastPollutionForDay.tsx","bricks/PlaceItem.tsx","utils/isKrym.ts","panels/PollutionCities.tsx","panels/MyCities.tsx","bricks/MySnackbar.tsx","media/place.svg","media/chevron_right.svg","media/bg_okay.jpg","media/bg_good.jpg","media/bg_good.svg","media/bg_bad.jpg","panels/TurnNoticifications.tsx","bll/Selectors/initialSelector.ts","App.js","bll/Reducers/initialReducer.ts","bll/store.ts","utils/initialVkBridge.ts","index.js"],"names":["LIGHT_BLUE","Intro","id","bgApp","handlerClose","checkInfo","requestPermissionLocation","onClose","header","className","Icon","Icon28NarrativeOutline","description","title","Icon28Notifications","Icon28StoryOutline","size","onClick","style","background","before","marginTop","InfoBlock","fill","Loader","props","src","loader","ListItem","memo","display","color","paddingRight","paddingLeft","children","Tooltip","tooltipDescription","tooltip","padding","margin","PollutionItem","value","bar","aqi","useState","fontSize","overflow","max","justifyContent","height","marginLeft","Badge","getDayOfWeek","day","dayOfWeek","WeatherItem","mode","disabled","after","Advice","isGoodWind","pollution","doStory","score_low","score_high","mask","separator","windows","width","windowSVG","exercice","getFullNamePollutant","toUpperCase","getDescriptionPollutant","instance","axios","create","baseURL","getEcoSearchData","searchQ","post","window","location","search","then","res","data","catch","e","response","getEcologyCity","cityId","target","getCityByCoordinate","lat","long","get","StationItem","stationName","distance","stationPNG","marginRight","overflowX","getDistance","point1","point2","P","Math","PI","latitude","longitude","String","slice","Home","snackbar","city","go","isInit","nativeCityId","isCitySubscribed","subscribeNoticification","unsubsubscribeNoticification","isShowMore","setShowMore","isShowBigImage","setShowBigImage","stations","setStations","useEffect","name","goToForecastPollutionForTheDay","stationsJSX","map","c","index","coordinates","length","pollutantsJSX","current","pollutants","p","pollutantName","concentration","currentDay","Date","getDay","forecastsJSX","forecasts","daily","temperature","paddingTop","flexDirection","position","zIndex","fontWeight","lineHeight","opacity","backgroundColor","shadow","recommendations","borderRadius","gridTemplateColumns","gridGap","logo","ForecastPollutionForDay","month","right","settlingHeight","PlaceItem","country","bg","setBG","paddingBottom","some","k","PollutionCities","countryId","setDefaultCity","countryName","myCity","myCityId","isAllowedPlace","setTitle","cities","setCities","clearestCities","setClearestCitites","isFetching","setFetching","getEcoRankCity","citiesJSX","clearestCitiesJSX","onChange","BgInitClearestCities","items","BgInitCities","MyCities","handleClose","cityFromSearch","cityOfUser","setCitySearch","toHome","MySnackbar","text","resultOperation","closeHandler","success_img","failed_img","TurnNoticifications","icon","subheader","actions","bgAppSelector","state","initial","platformSelector","platform","ROUTES","STATE_KEYS","IS_CHECK_INFO","IS_ALLOWED_PLACE","DEFAULT_CITY_ID","DEFAULT_COUNTRY_NAME","DEFAULT_COUNTRY_ID","PlaceImage","x","useImage","placePNG","image","y","ChevronRight","chevron_right","App","setInit","activePanel","popout","activeModal","setActiveModal","setSnackbar","isCheckInfo","defaultCityId","defaultCountryId","ecoCity","nativeCity","subscribedCities","defaultCountryName","setState","handlerCloseModal","useSelector","fetchData","a","bridge","send","keys","Object","values","forEach","s","JSON","parse","key","prev","idCountry","defaultNameCountry","cityName","currentCity","item","countries","handlerLocationHashChange","hash","stringify","ref","useRef","refBg","React","useCallback","background_type","blob","toDataURL","closeSnackbarHandler","result","subscribeNoticificationForButton","unsubsubscribeNoticificationForButton","delete","filter","modal","onClickMyCities","fillLinearGradientStartPoint","fillLinearGradientEndPoint","fillLinearGradientColorStops","cornerRadius","fontFamily","SET_PLATFORM","SET_BG_APP","initialState","setPlatform","type","setBgApp","reducers","combineReducers","action","store","createStore","dispatch","subscribeVkBridge","subscribe","detail","schemeAttribute","document","createAttribute","scheme","RegExp","match","href","body","attributes","setNamedItem","AppContainer","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.0193b8ce.chunk.js","sourcesContent":["import { Div, Spacing, FixedLayout, Group, ModalPage, PanelHeaderClose, ModalPageHeader, Panel, useAdaptivity, ViewWidth, usePlatform, Button, Cell } from \"@vkontakte/vkui\"\r\nimport React,{ Fragment } from \"react\"\r\nimport './Intro.css'\r\nimport { Icon28NarrativeOutline } from '@vkontakte/icons';\r\nimport { Icon28Notifications } from '@vkontakte/icons';\r\nimport { Icon28StoryOutline } from '@vkontakte/icons';\r\nimport { Icon24LocationOutline } from '@vkontakte/icons';\r\n\r\n\r\nconst LIGHT_BLUE = '#4475F1'\r\n\r\nexport const Intro=({id,bgApp,handlerClose,checkInfo,requestPermissionLocation})=>{\r\n    \r\n    \r\n\r\n    return<ModalPage\r\n    id={id}      \r\n    onClose={handlerClose}\r\n    header={\r\n            <ModalPageHeader\r\n            className={bgApp==='bg__app__light' ? 'modal__app__light' : 'modal__app__dark'}\r\n            ></ModalPageHeader>\r\n    }>\r\n        <div className={bgApp}>\r\n        <Fragment>\r\n            <Group>\r\n                <Div className='center__x text__big'>\r\n                    Добро пожаловать в Purify\r\n                </Div>\r\n                <Div>\r\n                    <InfoBlock \r\n                    Icon={Icon28NarrativeOutline}\r\n                    description={'Просматривайте актуальную статистику и получайте важные советы, чтобы сберечь здоровье. '}\r\n                    title={'Следите за качеством воздуха'} />\r\n                    <InfoBlock \r\n                    Icon={Icon28Notifications}\r\n                    description={'Получайте уведомления, чтобы заранее знать об изменениях в худшую сторону.'}\r\n                    title={'Будьте в курсе'}\r\n                    />\r\n                    <InfoBlock \r\n                    Icon={Icon28StoryOutline}\r\n                    description={'Информируйте их в критических ситуациях через истории ВКонтакте.'}\r\n                    title={'Сообщайте близким'}\r\n                    />\r\n                </Div>\r\n            </Group>\r\n            <Div\r\n            className='center__x'\r\n            >\r\n                <Button  \r\n                size='l'\r\n                onClick={requestPermissionLocation}\r\n                className='intro__button__location'\r\n                style={{background:LIGHT_BLUE}}\r\n                before={<Icon24LocationOutline/>}>\r\n                  Разрешить доступ к местоположению  \r\n                </Button>\r\n            </Div>\r\n            <div\r\n            onClick={()=>{\r\n                checkInfo()\r\n            }}\r\n            style={{marginTop:15}}\r\n            className='w-100 highlight_on_touch center__x text__gray'\r\n            >\r\n                Пропустить\r\n            </div>\r\n            <Spacing size={64}/>\r\n        </Fragment>\r\n        </div>\r\n    </ModalPage>\r\n}\r\n\r\nexport const InfoBlock=({description, title, Icon})=>{\r\n    return<Div className='intro__info'>\r\n    <div className='center__y'>\r\n        <Icon fill={LIGHT_BLUE}/>\r\n    </div>\r\n    <Div>\r\n        <div>\r\n            <strong>{title}</strong>\r\n        </div>\r\n        <div className='text__gray'>\r\n            {description}\r\n        </div>\r\n    </Div>\r\n</Div>\r\n}","export default __webpack_public_path__ + \"static/media/IQAir_logo.60893679.svg\";","export default __webpack_public_path__ + \"static/media/loader.4eb6b9ea.gif\";","//@ts-ignore\r\nimport loader from \"../media/loader.gif\";\r\n\r\ntype PropsType={}\r\n\r\nexport const Loader:React.FC<PropsType>=(props)=>{\r\n    return<img className='w-100' src={loader} />\r\n}","import { ElementType, JSXElementConstructor, memo, ReactElement } from \"react\"\r\n\r\n\r\n\r\ntype PropsType={\r\n    description: string | ReactElement<any, any>,\r\n    className?: string,\r\n    bgApp: string,\r\n    onClick?: ()=>void\r\n}\r\n\r\n\r\nexport const ListItem:React.FC<PropsType> = memo(({ description, onClick, className, bgApp, ...props }) => {\r\n    return <div className=''\r\n        onClick = {onClick ? onClick : ()=>{}} \r\n        style={{ display: 'flex', color: (bgApp==='bg__app__light' ? '#454545' : 'white') }}>\r\n        <div className={className ? className :'center__y'}\r\n        style={{paddingRight: 16, paddingLeft:8}}\r\n        >\r\n            {props.children}\r\n        </div>\r\n        <div className='center__y'> \r\n            {description}\r\n        </div>\r\n    </div>\r\n})","\r\nimport './Tooltip.css'\r\n\r\n\r\n\r\ntype PropsType={\r\n    tooltipDescription: string\r\n}\r\n\r\nexport const Tooltip:React.FC<PropsType> = ({tooltipDescription,children}) =>{\r\n    //@ts-ignore\r\n    return<div tooltip={tooltipDescription} tooltip-position={'bottom'}\r\n    style={{padding:0,margin:0}}>\r\n        {children}\r\n    </div>\r\n}","import { Icon20Info } from \"@vkontakte/icons\"\r\nimport {Tooltip} from './Tooltip'\r\nimport React, { memo, useState } from \"react\"\r\n\r\n\r\n\r\ntype PropsType = {\r\n    title: string,\r\n    value: number,\r\n    tooltipDescription: string,\r\n    bar: string,\r\n    aqi?: number,\r\n    bgApp: string\r\n}\r\n\r\nexport const PollutionItem: React.FC<PropsType> = memo(({ title, value, tooltipDescription, bar, aqi, bgApp }) => {\r\n\r\n    let [show, setShow] = useState(false)\r\n\r\n\r\n    const showTooltip = () => {\r\n        setShow(true)\r\n        setTimeout(() => {\r\n            setShow(false)\r\n        }, 4000)\r\n    }\r\n\r\n    return <div\r\n        style={{paddingRight:4,paddingLeft:4, color:bgApp==='bg__app__light' ? '#454545' : 'white'}}\r\n        className='w-100 pollution__item'>\r\n        <div style={{fontSize:16,overflow:'hidden'}} >\r\n            {title}\r\n        </div>\r\n        <div className='center__y'>\r\n            <progress className={bar} value={aqi ? aqi : value } max={100}/>\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'end'}}>\r\n            <div className='text__gray' style={{fontSize:14,height:20,overflow:'hidden'}}>\r\n                {value}  μm<sup>3</sup>\r\n            </div>\r\n            <div style={{marginLeft:3}}>\r\n                <Tooltip tooltipDescription={tooltipDescription}>\r\n                    <Icon20Info fill='#C1C1C1' />\r\n                </Tooltip>\r\n            </div>\r\n        </div>\r\n    </div>\r\n})\r\n","import React, { memo } from \"react\";\r\n\r\n\r\ntype PropsType={\r\n    value: any,\r\n    color: string,\r\n    style?: any\r\n}\r\n\r\nexport const Badge:React.FC<PropsType> = memo(({value,color,style}) =>{\r\n\r\n    return<span {...style} className={'badge' + ' ' + color } >\r\n        {value}\r\n    </span>\r\n})","\r\n\r\n\r\nexport const getDayOfWeek=(day:number):string=>{\r\n    const week = [\r\n        'Понедельник',\r\n        'Вторник',\r\n        'Среда',\r\n        'Четверг',\r\n        'Пятница',\r\n        'Суббота',\r\n        'Воскресенье'\r\n    ]\r\n    let dayOfWeek = day\r\n    while (dayOfWeek>7){\r\n        dayOfWeek = dayOfWeek -7\r\n    }\r\n        \r\n    return week[dayOfWeek-1]\r\n}","import { Icon24ChevronCompactRight, Icon24ErrorCircle } from \"@vkontakte/icons\"\r\nimport { Cell } from \"@vkontakte/vkui\"\r\nimport React, { memo } from \"react\"\r\nimport {Badge} from './Badge'\r\nimport {getDayOfWeek} from '../utils/getDayOfWeek'\r\n\r\n\r\ntype PropsType={\r\n    day: number,\r\n    value: any,\r\n    mode: 'danger' | 'okay' | 'good',\r\n    onClick: ()=>void\r\n}\r\n\r\nexport const WeatherItem:React.FC<PropsType>=memo(({day, value, mode, onClick})=>{\r\n    const color='bg__'+mode\r\n    return<div style={{fontSize:16, color:'#454545'}} className='w-100'>\r\n        <Cell\r\n        disabled={true}\r\n        after={<div>\r\n        <Badge value={value}  color={color} />\r\n        {/*<Icon24ChevronCompactRight fill='#C1C1C1' />*/}\r\n        </div>\r\n        }\r\n        before={mode==='danger' && <Icon24ErrorCircle fill={'#EF462F'}/>} >\r\n        <div>\r\n            <div className='center__y'>\r\n            {getDayOfWeek(day)}\r\n            </div>\r\n        </div>\r\n        </Cell>\r\n    </div>\r\n})","export default __webpack_public_path__ + \"static/media/mask.ca4eeaf1.svg\";","export default __webpack_public_path__ + \"static/media/window.a4f0a59c.svg\";","export default __webpack_public_path__ + \"static/media/score_high.8b2dd071.svg\";","export default __webpack_public_path__ + \"static/media/score_low.272815f5.svg\";","import { Card, Spacing } from \"@vkontakte/vkui\";\r\nimport React from \"react\";\r\n//@ts-ignore\r\nimport mask from '../media/mask.svg'\r\n//@ts-ignore\r\nimport windowSVG from '../media/window.svg'\r\n//@ts-ignore\r\nimport score_high from '../media/score_high.svg'\r\n//@ts-ignore\r\nimport score_low from '../media/score_low.svg'\r\nimport { ListItem } from \"./ListItem\";\r\nimport { Icon28LikeOutline, Icon28StoryOutline } from \"@vkontakte/icons\";\r\n\r\n\r\n\r\ntype PropsType = {\r\n    pollution: {\r\n        exercice: {\r\n            value: string;\r\n            text: string;\r\n        };\r\n        windows: {\r\n            value: string;\r\n            text: string;\r\n        };\r\n        mask: {\r\n            value: string;\r\n        };\r\n        air_purifier: {\r\n            value: string;\r\n        };\r\n    };\r\n    isGoodWind: boolean,\r\n    bgApp: string,\r\n    doStory: ()=>void\r\n};\r\n\r\nconst LIGHT_BLUE = '#4475F1'\r\n\r\nexport const Advice:React.FC<PropsType> = ({isGoodWind,pollution,bgApp, doStory}) =>{\r\n    return<Card\r\n    mode=\"shadow\"\r\n    className='card__app'>\r\n       <div>\r\n\r\n           <ListItem bgApp={bgApp} description={isGoodWind ? 'Качество воздуха хорошее и соответствует требованиям ООН. Наслаждайтесь.' : <span>Качество воздуха плохое и превышает требования ООН.</span>}>\r\n               {isGoodWind ? <img src={score_low} /> : <img src={score_high} />}\r\n           </ListItem>\r\n           {(pollution.mask.value!=='green' && pollution.mask.value!=='hidden') && <><Spacing className=\"spacing\" size={32} separator />\r\n            <ListItem bgApp={bgApp} description={'Носите маску на улице.'}>\r\n               <img src={mask} />\r\n           </ListItem></>}\r\n           {pollution.windows.value!=='hidden' && <><Spacing size={32} separator className=\"spacing\" />\r\n            <ListItem bgApp={bgApp} description={pollution.windows.value!=='green' ? 'Закройте окна.' : 'Откройте окна и проветрите помещение свежим воздухом.'}>\r\n               <div style={{width:28}} className='center__x'>\r\n               <img src={windowSVG} />\r\n               </div>\r\n           </ListItem></>}\r\n           {(pollution.exercice.value!=='hidden') && <><Spacing size={32} className=\"spacing\" separator />\r\n           <ListItem bgApp={bgApp} description={pollution.exercice.value!=='green' ? 'Избегайте нагрузок на улице.' : 'Хорошее время для тренировки.'}>\r\n               <Icon28LikeOutline fill={LIGHT_BLUE} />\r\n           </ListItem></>}\r\n           <>\r\n           <Spacing className=\"spacing\" size={32} separator />\r\n           <ListItem\r\n           onClick={doStory}\r\n           bgApp={bgApp} description={<div style={{color:LIGHT_BLUE}}><div>Сообщите друзьям и близким</div><div>Поделитесь историей</div></div>}>\r\n                <Icon28StoryOutline fill={LIGHT_BLUE} />\r\n            </ListItem>\r\n            </>\r\n       </div>\r\n</Card>\r\n}","\r\n\r\n\r\n\r\nexport const getFullNamePollutant=(title:string)=>{\r\n    switch (title) {\r\n        case 'pm25':\r\n            return 'PM2.5'\r\n        case 'pm10':\r\n            return 'PM10'\r\n        case 'o3':\r\n            return 'O3'\r\n        case 'no2':\r\n            return 'NO2'\r\n        case 'so2':\r\n            return 'SO2'\r\n        case 'co':\r\n            return 'CO'\r\n        default:\r\n            return title.toUpperCase()\r\n    }\r\n}\r\nexport const getDescriptionPollutant=(title:string)=>{\r\n    switch (title) {\r\n        case 'pm25':\r\n            return 'Крошечные частицы (<2.5 μm) в воздухе, которые, при вдыхании, попадают напрямую в кровь.'\r\n        case 'pm10':\r\n            return 'Крошечные частицы (<10 μm) в воздухе, которые, при вдыхании, попадают напрямую в кровь.'\r\n        case 'o3':\r\n            return 'Озон — токсичный и канцерогенный газ, влияющий на органы дыхания.'\r\n        case 'no2':\r\n            return 'Оксид азота — особо токсичен, раздражает дыхательные пути и уменьшает содержание гемоглобина в крови.'\r\n        case 'so2':\r\n            return 'Оксид серы — при длительном воздействии может нанести непоправимый вред лёгким.'\r\n        case 'co':\r\n            return 'Монооксид углерода — не имеет запаха и цвета. Симптомы отравления включают слабость, головную боль, тошноту и др.'\r\n        default:\r\n            return 'Еще нет подходящего описания для этого элемента.'\r\n    }\r\n}","import axios from \"axios\";\r\nimport { EcoCityData, EcoCityRank, EcoSearchData, UserEcoSubs } from \"../types/EcoTypes\";\r\n\r\n\r\nconst instance = axios.create({\r\n    baseURL:'https://showtime.app-dich.com/api/ecology/'\r\n})\r\n\r\nexport const getEcoSearchData = (searchQ?:string) =>{\r\n    return instance.post<{data:EcoSearchData}>(`search${window.location.search}`,{\r\n        searchQ\r\n    }).then(res=>res.data)\r\n    .catch(e=>e.response.data)\r\n}\r\nexport const getEcologyCity = (cityId:string) =>{\r\n    return instance.post<{data:EcoCityData} | null>(`eco-info${window.location.search}`,{\r\n        id: cityId,\r\n        target: 'city'\r\n    }).then(res=>res.data)\r\n    .catch(e=>e.response.data)\r\n}\r\nexport const getEcologyCountry = (countryId:string) =>{\r\n    return instance.post<{data:EcoCityData} | null>(`eco-info${window.location.search}`,{\r\n        id: countryId,\r\n        target: 'country'\r\n    }).then(res=>res.data)\r\n    .catch(e=>e.response.data)\r\n}\r\nexport type CityCoordinateType={\r\n    city: string,\r\n    countryName: string\r\n}\r\nexport const getCityByCoordinate = (lat:number, long:number) =>{\r\n    return axios.get<CityCoordinateType>(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${long}&localityLanguage=ru`)\r\n    .then(res=>res.data)\r\n    .catch(e=>e.response.data)\r\n}\r\nexport const getEcoRankCity = (countryId: string) =>{\r\n    return instance.post<EcoCityRank>(`rank${window.location.search}`,{\r\n        id: countryId\r\n    })\r\n    .then(res=>res.data)\r\n    .catch(e=>e.response.data)\r\n}\r\nexport const subscribeNoticification=(cityId:string)=>{\r\n    return instance.post(`subscribe${window.location.search}`,{id:cityId})\r\n}\r\nexport const unsubscribeNoticification=(cityId:string)=>{\r\n    return instance.delete(`subscribe${window.location.search}`,\r\n    {data:{id:cityId}})\r\n}\r\nexport const getSubscribes=()=>{\r\n    return instance.get<{data:UserEcoSubs[]}>(`subscribe${window.location.search}`)\r\n    .then(res=>res.data.data)\r\n}\r\n","export default __webpack_public_path__ + \"static/media/station.933949ec.svg\";","import { Icon24ChevronCompactRight, Icon24ErrorCircle } from \"@vkontakte/icons\"\r\nimport { Cell } from \"@vkontakte/vkui\"\r\nimport React, { memo } from \"react\"\r\nimport {Badge} from './Badge'\r\n//@ts-ignore\r\nimport stationPNG from '../media/station.svg'\r\nimport { Icon12ErrorCircle } from '@vkontakte/icons';\r\n\r\n\r\ntype PropsType={\r\n    stationName: string,\r\n    value: any,\r\n    mode: 'danger' | 'okay' | 'good',\r\n    onClick?: ()=>void,\r\n    distance: number\r\n}\r\n\r\nexport const StationItem:React.FC<PropsType>=memo(({value, mode, stationName, distance})=>{\r\n    const color='bg__'+mode\r\n    return<div style={{fontSize:16, color:'#454545'}} className='w-100'>\r\n        <Cell\r\n        disabled={true}\r\n        after={<div>\r\n        <Badge value={value}  color={color} />\r\n        {/*<Icon24ChevronCompactRight fill='#C1C1C1' />*/}\r\n        </div>\r\n        }>\r\n        <div className='d-flex'>\r\n            <div className='center__y'>\r\n                <img src={stationPNG} style={{marginRight:16}} />\r\n            </div>\r\n            <div>\r\n            <div style={{fontSize:16,width:200,overflowX:'scroll'}}>\r\n                {stationName}\r\n            </div>\r\n            <div className=\"text__gray\">\r\n                \r\n                {distance>10 && <div\r\n                className='d-flex'><div style={{height:18,marginRight:5}} className='center__y'>\r\n                    <Icon12ErrorCircle fill='C1C1C1'/>\r\n                </div><div \r\n                className='center__y'\r\n                style={{fontSize:15,height:18}}>Может быть неточной</div></div>}\r\n            </div>\r\n            </div>\r\n        </div>\r\n        </Cell>\r\n    </div>\r\n})","\r\n\r\n\r\n\r\ntype GetDistanceType = {\r\n    point1:{\r\n        latitude:number,\r\n        longitude:number\r\n    },\r\n    point2:{\r\n        latitude:number,\r\n        longitude:number\r\n    }\r\n}\r\n\r\nexport const getDistance = ({point1,point2}:GetDistanceType):number =>{\r\n\r\n    const RADIUS_EARTH = 6371\r\n    const P = Math.PI\r\n    \r\n    const distance = (((((point1.latitude-point2.latitude)**2) + ((point2.longitude-point2.longitude)**2))**0.5)/180)*P*RADIUS_EARTH \r\n\r\n    return (+(String(distance).slice(0,3)))\r\n\r\n}","import { CardGrid, Group, Panel, Div, Avatar, Card, Cell, Spacing, Header, Progress, Link, Footer, FixedLayout } from \"@vkontakte/vkui\"\r\nimport React, { ReactElement, useEffect,useRef,useState} from \"react\"\r\nimport './Home.css'\r\nimport { Icon16Place, Icon24Search } from '@vkontakte/icons';\r\nimport { Icon28Notifications } from '@vkontakte/icons';\r\nimport { Icon28StoryOutline } from '@vkontakte/icons';\r\n//@ts-ignore\r\nimport logo from '../media/IQAir_logo.svg'\r\nimport { Icon24Dropdown } from '@vkontakte/icons';\r\nimport { Loader } from '../bricks/Loader'\r\nimport {ListItem} from '../bricks/ListItem'\r\nimport {PollutionItem} from '../bricks/PollutionItem'\r\nimport { WeatherItem } from \"../bricks/WeatherItem\";\r\nimport { Advice } from \"../bricks/Advice\";\r\nimport { EcoCityData, EcoCityType, EcoSearchData, EcoStation } from \"../types/EcoTypes\";\r\nimport { getDescriptionPollutant, getFullNamePollutant } from \"../utils/pollutants\";\r\nimport { getEcoSearchData } from \"../dal/api\";\r\nimport { StationItem } from \"../bricks/StationItem\";\r\nimport { getDistance } from \"../utils/getDistance\";\r\n\r\n\r\n\r\nconst LIGHT_BLUE = '#4475F1'\r\ntype PropsType={\r\n    id: string,\r\n    isGoodWind: boolean,\r\n    city: EcoCityData | null,\r\n    nativeCityId: string,\r\n    go:(modal:string)=>void,\r\n    isInit: boolean,\r\n    bgApp: string,\r\n    subscribeNoticification: ()=>void,\r\n\tunsubsubscribeNoticification: ()=>void,\r\n\tisCitySubscribed: boolean,\r\n    snackbar: ReactElement<any,any> | null,\r\n    doStory: ()=>void\r\n}\r\n\r\n\r\nexport const Home:React.FC<PropsType> = ({ id, snackbar, bgApp, isGoodWind, city, go, isInit, nativeCityId, isCitySubscribed, subscribeNoticification, unsubsubscribeNoticification, doStory }) => {\r\n\r\n    const [isShowMore,setShowMore] = useState(false)\r\n    const [isShowBigImage, setShowBigImage] = useState(false)\r\n    const [stations,setStations] = useState<EcoStation[]>([])\r\n\r\n    useEffect(()=>{\r\n        if(city){\r\n            getEcoSearchData(city.name).then((res:{data:EcoSearchData})=>{\r\n                if(res.data){\r\n                    setStations(res.data.stations)\r\n                }\r\n            })\r\n            setShowMore(false)    \r\n        }\r\n        return()=>{\r\n            setShowMore(false)\r\n        }\r\n    },[city])\r\n\r\n\r\n    const handlerOpenImage=()=>{\r\n        setShowBigImage(true)\r\n    }\r\n    const handlerCloseImage=()=>{\r\n        setShowBigImage(false)\r\n    }\r\n    const goToForecastPollutionForTheDay=()=>{\r\n        go('FORECAST_POLLUTION_FOR_THE_DAY')\r\n    }\r\n    \r\n    const stationsJSX = city ? stations.map((c,index)=><>\r\n    <StationItem \r\n    distance={getDistance({point1:c.coordinates,point2:city.coordinates})}\r\n    stationName={c.name}\r\n    key={`${index}${c.name}`}\r\n    value={c.aqi} mode={c.aqi > 100 ? 'danger' : ((c.aqi>50) ? 'okay' : 'good')} />\r\n    {(index+1)!==stations.length && <Spacing\r\n    key={`station_spacing${index}`}\r\n    className=\"spacing\" separator size={16} />}\r\n</>) : []\r\n\r\n    const pollutantsJSX = city ? city.current.pollutants.map((p,index)=><>\r\n    <PollutionItem\r\n    bgApp={bgApp}\r\n    key={`${index}${p.pollutantName}`}\r\n    title={getFullNamePollutant(p.pollutantName)}\r\n    value={p.concentration}\r\n    aqi={p.aqi}\r\n    tooltipDescription={getDescriptionPollutant(p.pollutantName)}\r\n    bar={p.aqi>100 ? 'bad_bar' : p.aqi>50 ? 'okay_bar' : 'good_bar'}\r\n    /> \r\n    {(index+1)!==city.current.pollutants.length && <Spacing \r\n    key={`pollutant_spacing${index}`}\r\n    className=\"spacing\"\r\n    separator size={32} />}\r\n    </>) : []\r\n\r\n    const currentDay = (new Date()).getDay()\r\n    const forecastsJSX = city ? city.forecasts.daily.map((c,index)=><>\r\n        <WeatherItem \r\n        key={`${index}-${c.temperature}${c.aqi}`}\r\n        onClick={goToForecastPollutionForTheDay}\r\n        day={currentDay+index+1} value={c.aqi} mode={c.aqi > 100 ? 'danger' : ((c.aqi>50) ? 'okay' : 'good')} />\r\n        {(index+1)!==city.forecasts.daily.length && <Spacing \r\n        key={`weather_spacing${index}`}\r\n        className=\"spacing\" separator size={16} />}\r\n    </>) : []\r\n    \r\n\r\n    return <Panel id={id}>\r\n        <Group\r\n        style={{paddingTop:42}}\r\n        className={bgApp}>\r\n            {isShowBigImage && \r\n            <div \r\n            onClick={handlerCloseImage}\r\n            style={{\r\n                display:'flex',\r\n                justifyContent:'center',\r\n                flexDirection:'column',\r\n                position:'fixed',\r\n                zIndex:1000,\r\n                width:'100%',\r\n                height:'100%'\r\n                }}>\r\n                <Loader />\r\n            </div>\r\n            }\r\n            <Div\r\n                className={(isInit ? 'bg__init card' : 'card' + ' ' + ((city && city.current.aqi<=50) ? 'home__good__weather' : (city && city.current.aqi<=100) ? 'home__okay__weather' : 'home__bad__weather'))}>\r\n                <div className='home__main__title'>\r\n                    {isInit ?  <div\r\n                    style={{height:24,width:61}}\r\n                    className='bg__init__home'></div> : <div\r\n                    style={{fontSize:24,fontWeight:'inherit',lineHeight:2.2,color:'rgba(0,0,0,0.5)'}}\r\n                    className='text__SF-Pro-Rounded-Semibold'>{city && city.current.aqi} AQI</div>}\r\n                </div>\r\n                <div className='center__x text__Inter-Medium' style={{color:'rgba(0,0,0,0.5)'}}>\r\n                    {isInit && <div \r\n                    style={{height:16, width:97, marginTop:10}}\r\n                    className='bg__init__home'></div> }\r\n                    <div \r\n                    style={{fontSize:17}}\r\n                    className='center__y'>\r\n                    {(city && nativeCityId!==city.id && (!isInit)) && <Icon16Place fill='rgba(0,0,0,0.5)' style={{marginRight:3}} />}\r\n                    </div>\r\n                    {((!isInit) && city) && city.name}\r\n                </div>\r\n                <div>\r\n                    <div className='mt-4 home__main__bottom__side'>\r\n                    <div>\r\n                        <div \r\n                        className='home__search__cell__rounded home__search__cell__rounded_active'\r\n                        onClick={()=>go('POLLUTION_CITIES')}\r\n                        style={{opacity:0.5}}>\r\n                        <Avatar \r\n                        style={{backgroundColor:'rgba(255, 255, 255, 0.35)'}}\r\n                        shadow={false}>\r\n                            {(!isInit) && <Icon24Search  fill='#000' />}\r\n                        </Avatar>\r\n                        </div>\r\n                    </div>\r\n                    <div\r\n                        className='home__main__bottom__right__side'>\r\n                        <div \r\n                        style={{opacity:0.5}}\r\n                        onClick={city ? (isCitySubscribed ? unsubsubscribeNoticification : subscribeNoticification) : ()=>{}}\r\n                        className='home__search__cell__rounded home__search__cell__rounded_active'>\r\n                        \r\n                        <Avatar \r\n                        style={{backgroundColor:'rgba(255, 255, 255, 0.35)'}}\r\n                        shadow={false}>\r\n                            {(!isInit) && <Icon28Notifications fill='#000' />}\r\n                        </Avatar>\r\n                        </div>\r\n                        <div\r\n                        className='ml-1' \r\n                        style={{opacity:0.5}}\r\n                        onClick={city ? doStory : ()=>{}}\r\n                        >\r\n                        <Avatar\r\n                        className='home__search__cell__rounded home__search__cell__rounded_active' \r\n                        style={{backgroundColor:'rgba(255, 255, 255, 0.35)'}}\r\n                        shadow={false}>\r\n                            {(!isInit) && <Icon28StoryOutline fill='#000' />}\r\n                        </Avatar>\r\n                        </div>\r\n                    </div>\r\n                    </div>\r\n                </div>\r\n            </Div>\r\n            <Div>\r\n                {(city && (!isInit)) && <Advice\r\n                bgApp={bgApp}\r\n                doStory={doStory}\r\n                pollution={city.recommendations.pollution}\r\n                isGoodWind={isGoodWind}\r\n                />}\r\n                {isInit && <Card \r\n                className='card__app'\r\n                mode='shadow'>\r\n                    <div className='d-flex'>\r\n                        <div \r\n                        className='bg__init'\r\n                        style={{height:24,width:24,borderRadius:20000}}>\r\n                        </div>\r\n                        <div className='bg__init ml-2'\r\n                        style={{height:17,width:122}}>\r\n                        </div>\r\n                    </div>\r\n                </Card>}\r\n            </Div>  \r\n            <Div>\r\n                <Header className='text__SF-Pro-Rounded-Semibold'>\r\n                    {(!isInit) ? <span className=\"text__gray\">\r\n                    ЗАГРЯЗНИТЕЛИ\r\n                    </span> : <div\r\n                    style={{height:12, width:85}}\r\n                    className='bg__init'>\r\n                    </div>}    \r\n                </Header>\r\n                <Card \r\n                mode='shadow'\r\n                className='card__app'\r\n                >\r\n                    <div\r\n                    className='card__app'>\r\n                    {(isInit) && [3,2,1,0].map((c)=><><div\r\n                    key={`pollutant${c}`}\r\n                    style={{display:'grid',gridTemplateColumns:'1fr 50px'}}>\r\n                        <div \r\n                        style={{width:91,height:17}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                        <div style={{width:24,height:24,display:'flex',justifyContent:'end'}}\r\n                        className='bg__init'>\r\n                        </div></div>\r\n                        {c!==0 && <Spacing key={`pollutant_key${c}`} className=\"spacing\" separator size={32}/>}</>)} \r\n                    {(!isInit) && [...pollutantsJSX].slice(0,4)}\r\n                    {((!isShowMore) && (pollutantsJSX.length>4)) && <Cell onClick={()=>setShowMore(true)}><ListItem bgApp={bgApp} description={<Link>Показать все</Link>}>\r\n                        <Icon24Dropdown fill={LIGHT_BLUE}/>\r\n                    </ListItem></Cell>}\r\n                    {(isShowMore && (!isInit)) && <>{[...pollutantsJSX].slice(4,6)}</>}\r\n                    </div>\r\n                </Card> \r\n            </Div>\r\n            <Div>\r\n                <Header className='text__SF-Pro-Rounded-Semibold'>\r\n                    {(!isInit) ? <span className='text__gray'>\r\n                        ПРОГНОЗ НА НЕДЕЛЮ\r\n                    </span> : <div\r\n                    style={{height:12, width:85}}\r\n                    className='bg__init'>\r\n                    </div>}\r\n                </Header>\r\n                <Card  \r\n                mode='shadow'\r\n                className='card__app'>\r\n                    <div className=''>\r\n                    {(isInit) && [5,6,7,8,9,4,10].map((c)=><><div \r\n                    key={`weather${c}`}\r\n                    style={{display:'grid',gridTemplateColumns:'24px 1fr 50px', gridGap:'10px'}}>\r\n                        <div \r\n                        style={{width:24,height:24}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                        <div \r\n                        style={{width:91,height:17}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                        <div style={{width:52,height:24,display:'flex',justifyContent:'end'}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                    </div>{c!==10 && <Spacing key={`weather_spacing${c}`} className=\"spacing\" separator size={16} />}</>)}\r\n                        {(!isInit) && forecastsJSX}\r\n                    </div>\r\n                </Card>\r\n            </Div>\r\n            {stations.length!==0 && <Div>\r\n                <Header className='text__SF-Pro-Rounded-Semibold'>\r\n                    {(!isInit) ? <span className='text__gray'>\r\n                        СТАНЦИИ\r\n                    </span> : <div\r\n                    style={{height:12, width:85}}\r\n                    className='bg__init'>\r\n                    </div>}\r\n                </Header>\r\n                <Card  \r\n                mode='shadow'\r\n                className='card__app'>\r\n                    <div className=''>\r\n                    {(isInit) && [5,6,7,8,9,4,10].map((c)=><><div \r\n                    key={`station${c}`}\r\n                    style={{display:'grid',gridTemplateColumns:'24px 1fr 50px', gridGap:'10px'}}>\r\n                        <div \r\n                        style={{width:24,height:24}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                        <div \r\n                        style={{width:91,height:17}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                        <div style={{width:52,height:24,display:'flex',justifyContent:'end'}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                    </div>{c!==10 && <Spacing key={`station_spacing${c}}`} separator className=\"spacing\" size={16} />}</>)}\r\n                        {(!isInit) && stationsJSX}\r\n                    </div>\r\n                </Card>\r\n            </Div>}\r\n            {/*<Div>\r\n                <Header>\r\n                    <span className='text__gray'>\r\n                        ИНТЕРАКТИВНАЯ КАРТА\r\n                    </span>\r\n                </Header>\r\n                <Card mode='outline'>\r\n                    <Loader />\r\n                    <div className='home__map__bottom'>\r\n                    <div \r\n                    onClick={handlerOpenImage}\r\n                    className='home__map__button home__map__button_active'>\r\n                        <Icon24Fullscreen/>\r\n                        <div className='ml-1'>Открыть</div>\r\n                    </div>\r\n                    </div>\r\n                </Card>\r\n            </Div>*/}\r\n            <Footer style={{paddingTop:4,paddingLeft:4}}>\r\n                <Div className='text__SF-Pro-Rounded-Semibold'>\r\n                Информация предоставлена\r\n                </Div>\r\n                <Div className=\"\">\r\n                    <img src={logo} />\r\n                </Div>\r\n            </Footer>\r\n            <FixedLayout>\r\n                {snackbar}\r\n            </FixedLayout>\r\n        </Group>\r\n    </Panel>\r\n}\r\n\r\n\r\n\r\n","\r\nimport React, { Fragment } from 'react'\r\nimport { Card, Div, Group, Header, ModalPage, ModalPageHeader, PanelHeaderButton, Spacing } from '@vkontakte/vkui'\r\nimport { Icon24Dismiss } from '@vkontakte/icons'\r\nimport { Icon16Place } from '@vkontakte/icons';\r\nimport { Icon16ClockOutline } from '@vkontakte/icons';\r\nimport { Icon24Message } from '@vkontakte/icons';\r\nimport { PollutionItem } from '../bricks/PollutionItem';\r\n\r\n\r\ntype PropsType = {\r\n    id: string,\r\n    day: number,\r\n    month: string,\r\n    city: string,\r\n    isGoodWind: boolean,\r\n    handlerClose: () => void\r\n}\r\n\r\n\r\nexport const ForecastPollutionForDay: React.FC<PropsType> = ({ day, month, city, id, handlerClose, isGoodWind }) => {\r\n    return <ModalPage\r\n        onClose={handlerClose}\r\n        header={<ModalPageHeader\r\n            right={<PanelHeaderButton onClick={handlerClose}><Icon24Dismiss /></PanelHeaderButton>}></ModalPageHeader>}\r\n        settlingHeight={100} id={id} >\r\n        <Fragment>\r\n            <Group>\r\n                <Div className='w-100 text__dark_gray'>\r\n                    <h3 className='center__x'>\r\n                        6 AQI\r\n                    </h3>\r\n                    <div className='center__x'>\r\n                        <div className='d-flex'>\r\n                            <Icon16Place style={{ marginTop: 3, marginRight: 3 }} />\r\n                            {city}\r\n                        </div>\r\n                        <div className='d-flex ml-2'>\r\n                            <Icon16ClockOutline style={{ marginTop: 3, marginRight: 3 }} />\r\n                            {day} {month}\r\n                        </div>\r\n                    </div>\r\n                </Div>\r\n                <Div>\r\n                    <Card mode='shadow'>\r\n                        <div className='d-flex text__dark_gray p-2'>\r\n                            <div className='center__y'>\r\n                                <Icon24Message />\r\n                            </div>\r\n                            <div className='ml-2'>\r\n                                {isGoodWind ? \r\n                                'Качество воздуха хорошее и соответствует требованиям ООН.'\r\n                                : 'Качество воздуха плохое и превышает требования ООН.'\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </Card>\r\n                </Div>\r\n\r\n                <Div>\r\n                    <Header>\r\n                        <span className=\"text__gray\">\r\n                            ЗАГРЯЗНИТЕЛИ\r\n                        </span>\r\n                    </Header>\r\n                    <Card mode='shadow'>\r\n                        <div className='p-2'>\r\n                            \r\n                        </div>\r\n                    </Card>\r\n                </Div>\r\n                <Spacing size={64}/>\r\n            </Group>\r\n        </Fragment>\r\n\r\n    </ModalPage>\r\n}","import { Cell } from '@vkontakte/vkui'\r\nimport { useEffect, useState } from 'react'\r\nimport { isKrym } from '../utils/isKrym'\r\nimport { Badge } from './Badge'\r\n\r\n\r\n\r\ntype PropsType = {\r\n    city: string,\r\n    country: string,\r\n    value?: number,\r\n    id: string,\r\n    onClick: () => void\r\n}\r\n\r\n\r\nexport const PlaceItem: React.FC<PropsType> = ({ city, country, value, onClick, id }) => {\r\n\r\n    let [bg, setBG] = useState('bg__good')\r\n    useEffect(() => {\r\n        if (value) {\r\n            if (value >= 100) {\r\n                setBG('bg__danger')\r\n            } else if (value >= 50) {\r\n                setBG('bg__okay')\r\n            } else {\r\n                setBG('bg__good')\r\n            }\r\n        }\r\n    }, [value])\r\n\r\n    return <div\r\n    onClick={onClick}\r\n    className='highlight_on_touch text__Inter-Regular'\r\n    style={{\r\n        paddingLeft:16,\r\n        paddingRight:16,\r\n        paddingBottom:4,\r\n        paddingTop:4,\r\n        display: 'grid',\r\n        gridTemplateColumns: '1fr 50px'\r\n    }}>\r\n        <div>\r\n            <div style={{fontSize:16}}>\r\n                {city}\r\n            </div>\r\n            <div style={{marginTop:6,fontSize:15,color:'#606060'}}>\r\n                {isKrym(id) ? 'Россия' : country}\r\n            </div>\r\n        </div>\r\n        {value && <div className='center__y' >\r\n            <Badge color={bg} value={value} >\r\n                {value}\r\n            </Badge> \r\n        </div>}\r\n    </div>\r\n}","\r\n\r\n\r\n\r\n\r\nexport const isKrym = (cityId:string):boolean =>{\r\n    const krymsCity:string[] = [\r\n        '5bc822af41fdcdf1939e6641','5bc822af41fdcdf1939e6642',\r\n        '5bc822ae41fdcdf1939e6628','5bc822ae41fdcdf1939e660e',\r\n        '5bc822ae41fdcdf1939e662b','5bc821bd41fdcdf1939dd63e',\r\n        '5bc822a241fdcdf1939e6147','5bac90b524b967f0b5308d0f',\r\n        '5bc822ae41fdcdf1939e660e','5bac90b624b967f0b5308d12',\r\n        '5bc8229e41fdcdf1939e5f4c','5bc822a241fdcdf1939e6172',\r\n        '5bc8229d41fdcdf1939e5ee0','5bac90ab24b967f0b5308cf4',\r\n        '5bac90b624b967f0b5308d11','5bc8229c41fdcdf1939e5e72',\r\n        '5bc8229c41fdcdf1939e5e5c','5bac90b724b967f0b5308d13',\r\n        '5bc822a041fdcdf1939e5ff2','5bac90b624b967f0b5308d10',\r\n        '5bc8229f41fdcdf1939e5f88','5bc822a341fdcdf1939e61d1',\r\n        '5bc822af41fdcdf1939e667b'\r\n    ]\r\n    return krymsCity.some(k=>k===cityId)\r\n}","import { Icon24Dismiss, Icon32PlaceOutline } from \"@vkontakte/icons\"\r\nimport { Card, Cell, Div, Group, Header, Input, ModalPage, ModalPageHeader, PanelHeaderButton, Search, Spacing } from \"@vkontakte/vkui\"\r\nimport React, { ChangeEvent, Fragment, useEffect, useState } from \"react\"\r\nimport { Icon20Search } from '@vkontakte/icons';\r\nimport { ListItem } from \"../bricks/ListItem\";\r\nimport { Icon20PlaceOutline } from '@vkontakte/icons';\r\nimport { PlaceItem } from \"../bricks/PlaceItem\";\r\nimport { getEcologyCity, getEcoRankCity, getEcoSearchData } from \"../dal/api\";\r\nimport { EcoCity, EcoStation } from \"../types/EcoTypes\";\r\nimport { Formik } from \"formik\";\r\nimport { hidden } from \"chalk\";\r\n\r\n\r\n\r\n\r\n\r\ntype PropsType = {\r\n    id: string,\r\n    countryId: string,\r\n    countryName: string,\r\n    handlerClose: () => void,\r\n    setDefaultCity: (cityId: string) => void,\r\n    onClickMyCities: () => void,\r\n    myCity: string,\r\n    myCityId: string,\r\n    bgApp: string,\r\n    isAllowedPlace: boolean,\r\n    requestPermissionLocation: () => void\r\n}\r\n\r\nexport const PollutionCities: React.FC<PropsType> = ({ id, bgApp, countryId, handlerClose, setDefaultCity, countryName, myCity, myCityId, isAllowedPlace, requestPermissionLocation }) => {\r\n\r\n    type CityType = {\r\n        id: string,\r\n        name: string,\r\n        country: string,\r\n        aqi?: number\r\n    }\r\n    const [title, setTitle] = useState('')\r\n    const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setTitle(e.target.value)\r\n    }\r\n    const [cities, setCities] = useState<CityType[]>([])\r\n    const [clearestCities, setClearestCitites] = useState<CityType[]>([])\r\n    const [isFetching, setFetching] = useState(true)\r\n\r\n    useEffect(() => {\r\n        setFetching(true)\r\n        getEcoSearchData(title.length > 2 ? title : countryName)\r\n            .then(res => {\r\n                const data = res.data\r\n                setCities(data.cities)\r\n                setFetching(false)\r\n            }).catch(e => {\r\n                setFetching(false)\r\n            })\r\n    }, [title])\r\n\r\n    useEffect(() => {\r\n        setFetching(true)\r\n        getEcoSearchData(countryName)\r\n            .then(res => {\r\n                const data = res.data\r\n                setCities(data.cities)\r\n\r\n                getEcoRankCity(countryId)\r\n                    .then(res => {\r\n                        const data = res.data\r\n                        setClearestCitites(data)\r\n                        setFetching(false)\r\n                    })\r\n            }).catch(e => {\r\n                setFetching(false)\r\n            })\r\n    }, [])\r\n\r\n\r\n\r\n    const citiesJSX = cities.length>0 ? cities.map((c, index) => <><div\r\n    key={c.id} className=''>\r\n        <PlaceItem\r\n            onClick={() => {\r\n                setDefaultCity(c.id)\r\n                handlerClose()\r\n            }}\r\n            city={c.name} {...c} />\r\n    </div>{(index + 1) !== cities.length && <Spacing separator className=\"spacing\" size={8} />}</>) : <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n                                Городов не найдено.</div> \r\n    const clearestCitiesJSX = clearestCities.length>0 ? clearestCities.map((c, index) => <><div key={c.id} className=''>\r\n        <PlaceItem\r\n            value={c.aqi ? c.aqi : 10}\r\n            onClick={() => {\r\n                setDefaultCity(c.id)\r\n                handlerClose()\r\n            }}\r\n            city={c.name} {...c} country={countryName} />\r\n    </div>{(index + 1) !== cities.length && <Spacing className=\"spacing\" separator size={8} />}</>) : <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n                                Городов не найдено.</div> \r\n\r\n\r\n\r\n    return <ModalPage\r\n        settlingHeight={100}\r\n        header={<ModalPageHeader\r\n            className={bgApp === 'bg__app__light' ? 'modal__app__light' : 'modal__app__dark'}\r\n            right={\r\n                <PanelHeaderButton onClick={handlerClose}><Icon24Dismiss />\r\n                </PanelHeaderButton>} />}\r\n        id={id}\r\n    >\r\n        <Group className={bgApp}>\r\n            <div>\r\n                <Search\r\n                    value={title} onChange={handleChange}\r\n                    className={bgApp} />\r\n            </div>\r\n            <Div>\r\n                <Card\r\n                    mode='shadow'\r\n                    className='card__app'\r\n                    style={{ padding: 0, overflow: 'hidden' }}>\r\n                    <Cell\r\n                        onClick={() => {\r\n                            if (isAllowedPlace) {\r\n                                setDefaultCity(myCityId)\r\n                                handlerClose()\r\n                            } else {\r\n                                requestPermissionLocation()\r\n                            }\r\n                        }}\r\n                    >\r\n                        <div className='card__app'>\r\n                            {(!isFetching) && <ListItem bgApp={bgApp} description={<div>\r\n                                {isAllowedPlace ? <> <div style={{ fontSize: 16 }}>\r\n                                    {myCity}\r\n                                </div>\r\n                                    <div style={{ fontSize: 15 }} className='text__gray'>\r\n                                        Текущее местоположение\r\n                                    </div> </> : <div\r\n                                        style={{ color: '#4475F1', fontSize: 16 }}>\r\n                                    <div>Разрешить доступ</div>\r\n                                    <div>к местоположению</div>\r\n                                </div>}\r\n                            </div>}>\r\n                                <Icon32PlaceOutline className='' fill='#4475F1' />\r\n                            </ListItem>}\r\n                            {isFetching && <ListItem\r\n                                bgApp={bgApp}\r\n                                description={<div>\r\n                                    <div\r\n                                        style={{ width: 122, height: 16 }}\r\n                                        className='bg__init'>\r\n                                    </div>\r\n                                    <div\r\n                                        style={{ width: 88, height: 12 }}\r\n                                        className='bg__init mt-1'>\r\n                                    </div>\r\n                                </div>}\r\n                            >\r\n                                <div\r\n                                    style={{ height: 24, width: 24, borderRadius: 20000 }}\r\n                                    className='bg__init'></div>\r\n                            </ListItem>}\r\n                        </div>\r\n                    </Cell>\r\n                </Card>\r\n            </Div>\r\n            <Div>\r\n                <Header className='text__SF-Pro-Rounded-Semibold'>\r\n                    {(!isFetching) ? <span className='text__gray'>\r\n                    {title.length>0 ? \"ВСЕ\" : \"С НИЗКИМИ ПОКАЗАТЕЛЯМИ\"}\r\n                    </span> : <div\r\n                        className='bg__init' style={{ width: 85, height: 12 }}\r\n                    ></div>}\r\n                </Header>\r\n                <Card\r\n                    mode='shadow'\r\n                    className='card__app'>\r\n                    <Group>\r\n                        {(isFetching) ? (title.length>0 ? <BgInitCities/> : <BgInitClearestCities />) : <></>}\r\n                        {(!isFetching) ? ((title.length > 0) ? citiesJSX : clearestCitiesJSX) : <></>}\r\n                    </Group>\r\n                </Card>\r\n            </Div>\r\n            <Div>\r\n                <Header className='text__SF-Pro-Rounded-Semibold'>\r\n                    {(!isFetching) ? <span className='text__gray'>\r\n                        {title.length>0 ? \"С НИЗКИМИ ПОКАЗАТЕЛЯМИ\" : \"ВСЕ\"}\r\n                    </span> : <div\r\n                        className='bg__init' style={{ width: 85, height: 12 }}>\r\n                    </div>}\r\n                </Header>\r\n                <Card\r\n                    mode='shadow'\r\n                    className='card__app'>\r\n                    <Group>\r\n                        <Group className=''>\r\n                            {(isFetching) ? (title.length>0 ? <BgInitClearestCities/> : <BgInitCities/>) : <></>  }\r\n                            {(!isFetching) ? ((title.length > 0) ? clearestCitiesJSX : citiesJSX) : <></> }\r\n                        </Group>\r\n                    </Group>\r\n                </Card>\r\n            </Div>\r\n            <Spacing size={70} />\r\n        </Group>\r\n    </ModalPage>\r\n}\r\n\r\n\r\ntype PropsClearestCitiesType = {}\r\nconst BgInitClearestCities: React.FC<PropsClearestCitiesType> = ({ }) => {\r\n\r\n    const items = [2, 3, 4, 5, 1].map(c => <><Div key={`clearCity${c}`} className='px-2'\r\n        style={{ display: 'grid', gridTemplateColumns: '1fr 50px' }}>\r\n        <div>\r\n            <div\r\n                style={{ width: 122, height: 16 }}\r\n                className='bg__init'>\r\n            </div>\r\n            <div\r\n                style={{ width: 88, height: 12 }}\r\n                className='bg__init mt-1'>\r\n            </div>\r\n        </div>\r\n        <div\r\n            style={{ width: 44, height: 24, borderRadius: 20000 }}\r\n            className='bg__init mt-1'>\r\n        </div>\r\n    </Div>{c !== 1 && <Spacing className=\"spacing\" separator size={8} />}</>)\r\n\r\n    return <>{items}</>\r\n}\r\n\r\ntype PropsBgInitCitiesType = {}\r\nconst BgInitCities: React.FC<PropsBgInitCitiesType> = ({ }) => {\r\n    const items = [2, 3, 4, 5, 1].map(c => <><Div key={`city${c}`} className='px-2'>\r\n        <div>\r\n            <div\r\n                style={{ width: 122, height: 16 }}\r\n                className='bg__init'>\r\n            </div>\r\n            <div\r\n                style={{ width: 88, height: 12 }}\r\n                className='bg__init mt-1'>\r\n            </div>\r\n        </div>\r\n    </Div>{c !== 1 && <Spacing className=\"spacing\" separator size={8} />}</>)\r\n\r\n    return <>{items}</>\r\n}","import { Cell, ModalCard } from \"@vkontakte/vkui\"\r\nimport { EcoCityData } from \"../types/EcoTypes\"\r\nimport { Icon28ChevronRightOutline } from '@vkontakte/icons';\r\nimport { Icon16Place } from '@vkontakte/icons';\r\n\r\n\r\n\r\n\r\n\r\ntype PropsType={\r\n    id: string,\r\n    handleClose: ()=>void,\r\n    cityFromSearch: EcoCityData,\r\n    cityOfUser: EcoCityData,\r\n    setCitySearch: (cityId:string)=>void,\r\n    toHome: ()=>void\r\n}\r\n\r\n\r\nexport const MyCities:React.FC<PropsType> = ({id,handleClose,cityFromSearch,cityOfUser,setCitySearch,toHome}) =>{\r\n    \r\n    \r\n    const handleCityFromSearchClick = () =>{\r\n        setCitySearch(cityFromSearch.id)\r\n        toHome()\r\n    }\r\n    const handleCityOfUserClick = () =>{\r\n        setCitySearch(cityOfUser.id)\r\n        toHome()\r\n    }\r\n\r\n    return<ModalCard \r\n    onClose={handleClose}\r\n    id={id}>\r\n        <Cell onClick={handleCityFromSearchClick}>\r\n        <div style={{display:'grid',gridTemplateColumns:'140px 28px 1fr'}}>\r\n            <div>\r\n                Город из поиска\r\n            </div>\r\n            <div className='center__x'>\r\n                <Icon28ChevronRightOutline fill='#808080'/>\r\n            </div>      \r\n            <div \r\n            style={{display:'flex',justifyContent:'end'}}>\r\n                <div style={{marginTop:2}} className='center__y'>\r\n                    <Icon16Place fill='#808080' className='mr-1' />\r\n                </div>\r\n                <div className='center__y'>\r\n                {cityFromSearch.name}\r\n                </div>\r\n            </div>     \r\n        </div>\r\n        </Cell>\r\n        <Cell onClick={handleCityOfUserClick}>\r\n        <div style={{display:'grid',gridTemplateColumns:'140px 28px 1fr'}}>\r\n            <div>\r\n                Текущее \r\n                <div>\r\n                местоположение\r\n                </div>\r\n            </div>\r\n            <div className='center__x'>\r\n                <Icon28ChevronRightOutline fill='#808080'/>\r\n            </div>      \r\n            <div \r\n            style={{display:'flex',justifyContent:'end',marginTop:2}}>\r\n                {cityOfUser.name}\r\n            </div>     \r\n        </div>\r\n        </Cell>\r\n    </ModalCard>\r\n}","import { Snackbar } from \"@vkontakte/vkui\"\r\n//@ts-ignore\r\nimport success_img from '../media/score_low.svg'\r\n//@ts-ignore\r\nimport failed_img from '../media/score_high.svg' \r\n\r\n\r\ntype PropsType = {\r\n    resultOperation: boolean,\r\n    text: string,\r\n    closeHandler?: ()=>void\r\n}\r\n\r\nexport const MySnackbar:React.FC<PropsType> = ({text,resultOperation,closeHandler}) =>{\r\n    return<Snackbar\r\n    onClose={closeHandler ? closeHandler : ()=>{}}\r\n    before={<img src={resultOperation ? success_img : failed_img} />}\r\n    >\r\n        <div \r\n        className={'text__SF-Pro-Rounded-Regular'}\r\n        style={{fontSize:15}}>\r\n            {text}\r\n        </div>\r\n    </Snackbar>\r\n}","export default __webpack_public_path__ + \"static/media/place.7859cca4.svg\";","export default __webpack_public_path__ + \"static/media/chevron_right.41330dfc.svg\";","export default __webpack_public_path__ + \"static/media/bg_okay.deb781bc.jpg\";","export default __webpack_public_path__ + \"static/media/bg_good.78cdbf75.jpg\";","export default __webpack_public_path__ + \"static/media/bg_good.3ae58033.svg\";","export default __webpack_public_path__ + \"static/media/bg_bad.fcfcaf41.jpg\";","import { Button, Card, ModalCard } from \"@vkontakte/vkui\"\r\nimport { BackgroundColor } from \"chalk\";\r\nimport React from \"react\"\r\nimport { Icon56NotificationOutline } from '@vkontakte/icons';\r\n\r\n\r\n\r\n\r\ntype PropsType={\r\n    bgApp: string,\r\n    id: string,\r\n    closeHandler: ()=>void,\r\n    subscribeNoticification: ()=>void\r\n}\r\nconst LIGHT_BLUE = '#4475F1'\r\n\r\nexport const TurnNoticifications:React.FC<PropsType>=({id, subscribeNoticification, bgApp, closeHandler})=>{\r\n    return<ModalCard      \r\n    id={id}      \r\n\r\n          onClose={closeHandler}\r\n          icon={<Icon56NotificationOutline fill={LIGHT_BLUE} />}\r\n          header={<div className='text__Inter-Bold'>Включить уведомления?</div>}\r\n          subheader={<div className='text__Inter-Regular'>\r\n              Мы будем уведомлять вас об актуальном качестве воздуха\r\n              раз в неделю, а также:\r\n              <div style={{marginTop:10}}>\r\n                 - Если качество воздуха станет неприемлемым\r\n              </div>\r\n              <div style={{marginTop:5}}>\r\n                 - О резких скачках количества загрязнителей\r\n              </div>\r\n            </div>}\r\n          actions={\r\n            <Button size=\"l\" mode=\"primary\" onClick={()=>{\r\n                subscribeNoticification()\r\n                closeHandler()\r\n            }} className='text__Inter-Medium'>\r\n              Включить\r\n            </Button>\r\n          }\r\n        />\r\n}","import { AppReducerType } from \"../store\";\r\n\r\n\r\n\r\n\r\nexport const bgAppSelector = (state: AppReducerType) =>{\r\n    return state.initial.bgApp\r\n}\r\n\r\nexport const platformSelector = (state: AppReducerType) =>{\r\n    return state.initial.platform\r\n}","import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport { View, Panel, ScreenSpinner, AdaptivityProvider, AppRoot, ModalRoot, ConfigProvider, usePlatform } from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport { Intro } from './panels/Intro';\r\nimport { Home } from './panels/Home';\r\nimport './App.css'\r\nimport { ForecastPollutionForDay } from './panels/ForecastPollutionForDay';\r\nimport { PollutionCities } from './panels/PollutionCities';\r\nimport { getCityByCoordinate, getEcologyCity, getEcologyCountry, \r\n\tgetEcoSearchData, getSubscribes, subscribeNoticification, unsubscribeNoticification } from './dal/api';\r\nimport { MyCities } from './panels/MyCities';\r\nimport { MyCanvas } from './bricks/MyCanvas';\r\nimport { MySnackbar } from './bricks/MySnackbar';\r\nimport { Layer, Stage, Image, Text, Rect, FastLayer } from \"react-konva\";\r\nimport placePNG from \"./media/place.svg\";\r\nimport useImage from 'use-image';\r\nimport bg_okay from './media/bg_okay.jpg'\r\nimport bg_good from './media/bg_good.jpg'\r\nimport bg_good_svg from './media/bg_good.svg'\r\nimport bg_bad from './media/bg_bad.jpg'\r\nimport chevron_right from \"./media/chevron_right.svg\";\r\nimport { TurnNoticifications } from './panels/TurnNoticifications';\r\nimport { useSelector } from 'react-redux';\r\nimport { bgAppSelector, platformSelector } from './bll/Selectors/initialSelector';\r\n\r\n\r\n\r\nconst ROUTES = {\r\n\tINFO: 'INFO',\r\n\tPOLLUTION_CITIES: 'POLLUTION_CITIES',\r\n\tHOME: 'HOME',\r\n\tFORECAST_POLLUTION_FOR_THE_DAY: 'FORECAST_POLLUTION_FOR_THE_DAY',\r\n\tMY_CITIES: 'MY_CITIES',\r\n\tTURN_NOTICIFICATIONS: 'TURN_NOTICIFICATIONS'\r\n}\r\nconst STATE_KEYS = {\r\n\tIS_CHECK_INFO: 'IS_CHECK_INFO',\r\n\tIS_ALLOWED_PLACE: 'IS_ALLOWED_PLACE',\r\n\tDEFAULT_CITY_ID: 'DEFAULT_CITY_ID',\r\n\tDEFAULT_COUNTRY_NAME:'DEFAULT_COUNTRY_NAME',\r\n\tDEFAULT_COUNTRY_ID: 'DEFAULT_COUNTRY_ID'\r\n}\r\nconst DEFAULT_CITY_ID = '5b163b6f7fa2b15e076ad2a6'\r\nconst DEFAULT_COUNTRY_ID = 'qNvxAidZLbwhRmQXR'\r\nconst DEFAULT_COUNTRY_NAME = 'Россия'\r\n\r\nconst App = () => {\r\n\t\r\n\tconst [isInit, setInit] = useState(false)\r\n\tconst [activePanel, setActivePanel] = useState(ROUTES.HOME);\r\n\tconst [fetchedUser, setUser] = useState(null);\r\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\r\n\tconst [activeModal, setActiveModal] = useState(null)\r\n\tconst [snackbar, setSnackbar] = useState(null)\r\n\tconst [state, setState] = useState({\r\n\t\tisCheckInfo: false,\r\n\t\tisAllowedPlace: false,\r\n\t\tdefaultCityId: DEFAULT_CITY_ID,\r\n\t\tdefaultCountryId: DEFAULT_COUNTRY_ID,\r\n\t\tecoCity: null,\r\n\t\tnativeCity: null,\r\n\t\tsubscribedCities: [],\r\n\t\tdefaultCountryName: DEFAULT_COUNTRY_NAME\r\n\t})\r\n\t\r\n\tconst handlerCloseModal = () => {\r\n\t\tsetActiveModal(null)\r\n\t}\r\n\tconst platform = useSelector(platformSelector)\r\n\tconst bgApp = useSelector(bgAppSelector)\r\n\tuseEffect(async () => {\r\n\t\t/*bridge.subscribe(({ detail: { type, data } }) => {\r\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\r\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\r\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\r\n\t\t\t\tconst title = new RegExp('light')\t\t\t\t\r\n\t\t\t\tif((data.scheme==='vkcom') || (data.scheme.match(title))){\r\n\t\t\t\t\tsetBgApp('bg__app__light')\r\n\t\t\t\t\tif(data.scheme==='vkcom'){\r\n\t\t\t\t\t\tsetPlatform('pc')\r\n\t\t\t\t\t}else{\t\r\n\t\t\t\t\t\tsetPlatform('mobile')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"light\", \"action_bar_color\": \"#F5F5F5\"})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsetBgApp('bg__app__dark')\r\n\t\t\t\t\tbridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"dark\", \"action_bar_color\": \"#373737\"})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\r\n\t\t\t}\r\n\t\t});*/\r\n\t\tasync function fetchData() {\r\n\t\t\tconst res = (await bridge.send('VKWebAppStorageGet', { keys: Object.values(STATE_KEYS) }))\r\n\r\n\t\t\tlet data = res.keys\r\n\t\t\t\tdata.forEach((s) => {\r\n\t\t\t\t\tlet value = s.value ? JSON.parse(s.value) : null\r\n\t\t\t\t\tswitch (s.key) {\r\n\t\t\t\t\t\tcase STATE_KEYS.IS_CHECK_INFO:\r\n\t\t\t\t\t\t\tif (!value) {\r\n\t\t\t\t\t\t\t\tsetActiveModal(ROUTES.INFO)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsetState(prev => {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\tisCheckInfo: true\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase STATE_KEYS.IS_ALLOWED_PLACE:\r\n\t\t\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\t\t\tsetState(prev => {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\tisAllowedPlace: true\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase STATE_KEYS.DEFAULT_COUNTRY_ID:\r\n\t\t\t\t\t\t\tif(value) {\r\n\t\t\t\t\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\t\t\t\t\treturn{\r\n\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\tdefaultCountryId: s.value\r\n\t\t\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase STATE_KEYS.DEFAULT_CITY_ID:\r\n\t\t\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\t\t\tsetState(prev => {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\tdefaultCityId: s.value\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase STATE_KEYS.DEFAULT_COUNTRY_NAME:\r\n\t\t\t\t\t\t\tif(value) {\r\n\t\t\t\t\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\t\t\t\t\treturn{\r\n\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\tdefaultCountryName:s.value\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\t\tfetchData()\r\n\t}, []);\r\n\tconst go = (modal) => {\r\n\t\tsetActiveModal(modal)\r\n\t}\r\n\tconst checkInfo = () => {\r\n\t\ttry {\r\n\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t{\r\n\t\t\t\t\tkey: STATE_KEYS.IS_CHECK_INFO,\r\n\t\t\t\t\tvalue: 'true'\r\n\t\t\t\t})\r\n\t\t\tsetState(prev => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\tisCheckInfo: true\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\thandlerCloseModal()\r\n\t\t} catch (e) {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tuseEffect(async () => {\r\n\t\tif (state.isAllowedPlace) {\r\n\t\t\ttry {\r\n\t\t\t\tsetInit(true)\r\n\t\t\t\tlet { lat, long } = await bridge.send('VKWebAppGetGeodata', { key: 'location' })\r\n\t\t\t\tconst { city } = await getCityByCoordinate( lat, long)\r\n\r\n\t\t\t\tlet id = DEFAULT_CITY_ID\r\n\t\t\t\tlet idCountry = DEFAULT_COUNTRY_ID\r\n\t\t\t\tlet defaultNameCountry = DEFAULT_COUNTRY_NAME\r\n\t\t\t\tlet cityName = city \r\n\t\t\t\tconst data = (await getEcoSearchData(cityName)).data\r\n\t\t\t\tlet currentCity = null\r\n\t\t\t\tdata.cities.forEach(item => {\r\n\t\t\t\t\t\tif (item.name === cityName && (!currentCity)) {\r\n\t\t\t\t\t\t\tid = item.id\r\n\t\t\t\t\t\t\tcurrentCity = item\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\tconst dataCountry = (await getEcoSearchData(currentCity.country)).data\r\n\t\t\t\tdataCountry.countries.forEach(item => {\r\n\t\t\t\t\tif (item.name === currentCity.country) {\r\n\t\t\t\t\t\tidCountry = item.id\r\n\t\t\t\t\t\tdefaultNameCountry = item.name\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: STATE_KEYS.DEFAULT_COUNTRY_NAME,\r\n\t\t\t\t\t\tvalue: defaultNameCountry\r\n\t\t\t\t\t})\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tdefaultCountryId: defaultNameCountry\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: STATE_KEYS.DEFAULT_COUNTRY_ID,\r\n\t\t\t\t\t\tvalue: idCountry\r\n\t\t\t\t\t})\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tdefaultCountryId: idCountry\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: STATE_KEYS.DEFAULT_CITY_ID,\r\n\t\t\t\t\t\tvalue: id\r\n\t\t\t\t\t})\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tdefaultCityId: id\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tnativeCity: currentCity\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tsetInit(false)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: STATE_KEYS.DEFAULT_CITY_ID,\r\n\t\t\t\t\t\tvalue: state.defaultCityId\r\n\t\t\t\t\t})\r\n\t\t\t\tsetInit(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}, [state.isAllowedPlace])\r\n\tuseEffect(async ()=>{\r\n\t\t\r\n\t\tsetInit(true)\r\n\t\tconst data = (await getEcologyCity(state.defaultCityId)).data\r\n\t\tif(data){\r\n\t\t\tsetState(prev=>{\r\n\t\t\t\treturn{\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\tecoCity: data\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tif(!state.nativeCity){\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tnativeCity: data\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetInit(false)\r\n\t}, [state.defaultCityId])\r\n\t\r\n\tconst handlerLocationHashChange = async ()=>{\r\n\t\tif(window.location.hash.slice(1,)){\r\n\t\t\tsetInit(true)\r\n\t\t\tconst data = (await getEcologyCity(window.location.hash.slice(1,))).data\r\n\t\t\tif(data){\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tecoCity: data\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tsetInit(false)\r\n\t\t}\r\n\t}\r\n\tuseEffect(async()=>{\r\n\t\thandlerLocationHashChange()\r\n\t},[window.location.hash])\r\n\t\r\n\tuseEffect(async()=>{\r\n\t\tconst res = await getSubscribes()\r\n\t\tsetState(prev=>{\r\n\t\t\treturn{\r\n\t\t\t\t...prev,\r\n\t\t\t\tsubscribedCities: [...res]\r\n\t\t\t}\r\n\t\t})\r\n\t}, [])\r\n\r\n\tconst requestPermissionLocation = async () => {\r\n\t\tawait bridge.send('VKWebAppGetGeodata', { key: 'location' })\r\n\t\t\t.then(res => {\r\n\t\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: STATE_KEYS.IS_ALLOWED_PLACE,\r\n\t\t\t\t\t\tvalue: JSON.stringify(true)\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tsetState(prev => {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\tisAllowedPlace: true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t}).catch(e => {\r\n\t\t\t\tsetState(prev => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tisAllowedPlace: true\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\tcheckInfo()\r\n\t}\r\n\r\n\r\n\r\n\tconst handleCloseForMyCities = () =>{\r\n\t\tsetActiveModal(ROUTES.POLLUTION_CITIES)\r\n\t}\r\n\tconst handleOpenMyCities =()=>{\r\n\t\tsetActiveModal(ROUTES.MY_CITIES)\r\n\t}\r\n\r\n\tconst ref = useRef(null)\r\n\tconst refBg = useRef(null)\r\n\t\r\n\tconst doStory=React.useCallback(async ()=>{\r\n\t\t\r\n\r\n\t\ttry{\r\n\t\t\tlet data = {}\r\n\t\t\tif(platform==='pc'){\r\n\t\t\t\tdata = {\r\n\t\t\t\t\tbackground_type:'image',\r\n\t\t\t\t\tblob:refBg.current.toDataURL()\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tdata = {\r\n\t\t\t\t\tbackground_type: 'none'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tawait bridge.send('VKWebAppShowStoryBox',{\r\n\t\t\t\t...data,\r\n\t\t\t\t\"stickers\": [\r\n\t\t\t\t  {\r\n\t\t\t\t\t\"sticker_type\": \"renderable\",\r\n\t\t\t\t\t\"sticker\": {\r\n\t\t\t\t\t  \"can_delete\": false,\r\n\t\t\t\t\t  \"content_type\": \"image\",\r\n\t\t\t\t\t  \"blob\": ref.current.toDataURL(),\r\n\t\t\t\t\t  \"clickable_zones\": [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t  \"action_type\": \"link\",\r\n\t\t\t\t\t\t  \"action\": {\r\n\t\t\t\t\t\t\t\"link\": `https://vk.com/app7991717#${state.ecoCity.id}`,\r\n\t\t\t\t\t\t\t\"tooltip_text_key\": \"tooltip_open_default\"\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  ],\r\n\t\t\t\t\t  \"transform\": {\r\n\t\t\t\t\t\t  \"gravity\": \"center\",\r\n\t\t\t\t\t\t  \"relation_width\": 1\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}\r\n\t\t\t\t  }\r\n\t\t\t\t]\r\n\t\t\t  }).catch(e=>{\r\n\t\t\t\t  setSnackbar(<MySnackbar \r\n\t\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\t\tresultOperation={true} text={'Опубликовать историю не удалось'}/>)\r\n\t\t\t  }).then(res=>{\r\n\t\t\t\tif(res.result){\r\n\t\t\t\t\tsetSnackbar(<MySnackbar \r\n\t\t\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\t\t\tresultOperation={true} text={'История опубликована'}/>)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsetSnackbar(<MySnackbar \r\n\t\t\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\t\t\tresultOperation={false} text={'Опубликовать историю не удалось'}/>)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}catch(e){\r\n\t\t\tsetSnackbar(<MySnackbar \r\n\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\tresultOperation={false} text={'Опубликовать историю не удалось'} />)\r\n\t\t}\r\n\t},[ref, state.ecoCity, refBg])\r\n\tconst closeSnackbarHandler = () =>{\r\n\t\tsetSnackbar(null)\r\n\t}\r\n\t\r\n\tconst subscribeNoticificationForButton=async ()=>{\r\n\t\t\r\n\t\ttry{\r\n\t\tconst res = await bridge.send('VKWebAppAllowNotifications')\r\n\t\t\r\n\t\tif(res.result && state.ecoCity){\r\n\t\t\tawait subscribeNoticification(state.ecoCity.id)\t\t\t\t\r\n\t\t}\r\n\r\n\t\tsetState(prev=>{\r\n\t\t\treturn{\r\n\t\t\t\t...prev,\r\n\t\t\t\tsubscribedCities:[...prev.subscribedCities,{cityId:state.ecoCity.id}]\r\n\t\t\t}\r\n\t\t})\r\n\t\tsetSnackbar(<MySnackbar\r\n\t\t\tcloseHandler={closeSnackbarHandler} \r\n\t\t\tresultOperation={true}\r\n\t\t\ttext={'Уведомления включены'}/>)\r\n\t\t\r\n\t\t}catch(e){\r\n\t\t\tsetSnackbar(<MySnackbar \r\n\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\tresultOperation={false}\r\n\t\t\t\ttext={'Включить уведомления не удалось'}/>)\r\n\t\t}\r\n\r\n\t}\r\n\tconst unsubsubscribeNoticificationForButton = async ()=>{\r\n\t\t\r\n\t\ttry{\r\n\t\tconst res = await bridge.send('VKWebAppDenyNotifications')\r\n\r\n\t\tif(res.result && state.ecoCity){\r\n\t\t\tawait unsubscribeNoticification(state.ecoCity.id)\r\n\t\t}\r\n\r\n\t\tsetState(prev=>{\r\n\t\t\treturn{\r\n\t\t\t\t...prev,\r\n\t\t\t\tsubscribedCities:[...prev.subscribedCities.filter(s=>s.cityId!==state.ecoCity.id)]\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t\tsetSnackbar(<MySnackbar \r\n\t\t\tresultOperation={true}\r\n\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\ttext={'Уведомления выключены'}/>)\r\n\t\t\r\n\t\t}catch(e){\r\n\t\t\tsetSnackbar(<MySnackbar \r\n\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\tresultOperation={false}\r\n\t\t\t\ttext={'Выключить уведомления не удалось'}/>)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tconst modal = (\r\n\t\t<ModalRoot onClose={handlerCloseModal} activeModal={activeModal}>\r\n\t\t\t{<MyCities\r\n\t\t\ttoHome={handlerCloseModal}\r\n\t\t\tcityFromSearch={state.ecoCity}\r\n\t\t\tcityOfUser={state.nativeCity}\r\n\t\t\tsetCitySearch={(cityId)=>setState(prev=>{\r\n\t\t\t\treturn{\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\tdefaultCityId:cityId\r\n\t\t\t\t}\r\n\t\t\t})}\r\n\t\t\thandleClose={handleCloseForMyCities}\r\n\t\t\tid={ROUTES.MY_CITIES}\r\n\t\t\t/>}\r\n\t\t\t<Intro\r\n\t\t\tbgApp={bgApp}\r\n\t\t\t\tcheckInfo={checkInfo}\r\n\t\t\t\trequestPermissionLocation={requestPermissionLocation}\r\n\t\t\t\tid={ROUTES.INFO} handlerClose={handlerCloseModal} />\r\n\t\t\t<ForecastPollutionForDay\r\n\t\t\t\tid={ROUTES.FORECAST_POLLUTION_FOR_THE_DAY}\r\n\t\t\t\thandlerClose={handlerCloseModal}\r\n\t\t\t\tday={3} month={'Ноябрь'} city={'Санкт-Петербург'}\r\n\t\t\t/>\r\n\t\t\t<TurnNoticifications\r\n\t\t\tbgApp={bgApp}\r\n\t\t\tid={ROUTES.TURN_NOTICIFICATIONS}\r\n\t\t\tcloseHandler={handlerCloseModal}\r\n\t\t\tsubscribeNoticification={subscribeNoticificationForButton}\r\n\t\t\t/>\r\n\t\t\t<PollutionCities\r\n\t\t\t\trequestPermissionLocation={requestPermissionLocation}\r\n\t\t\t\tisAllowedPlace={state.isAllowedPlace}\r\n\t\t\t\tbgApp={bgApp}\r\n\t\t\t\tmyCityId={state.nativeCity ? state.nativeCity.id : DEFAULT_CITY_ID}\r\n\t\t\t\tmyCity={state.nativeCity ? state.nativeCity.name : 'Санкт-Петербург' }\r\n\t\t\t\tonClickMyCities = {handleOpenMyCities}\r\n\t\t\t\tsetDefaultCity={(cityId)=>setState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tdefaultCityId:cityId\r\n\t\t\t\t\t}\r\n\t\t\t\t})}\r\n\t\t\t\tcountryName={state.defaultCountryName}\r\n\t\t\t\tcountryId={state.defaultCountryId}\r\n\t\t\t\thandlerClose={handlerCloseModal}\r\n\t\t\t\tid={ROUTES.POLLUTION_CITIES} />\r\n\t\t</ModalRoot>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<AdaptivityProvider>\r\n\t\t\t<AppRoot activePanel={activePanel} popout={popout}>\r\n\t\t\t\t<View activePanel={ROUTES.HOME} modal={modal}>\r\n\t\t\t\t\t<Home\r\n\t\t\t\t\tsnackbar={snackbar}\r\n\t\t\t\t\tsubscribeNoticification={()=>setActiveModal(ROUTES.TURN_NOTICIFICATIONS)}\r\n\t\t\t\t\tunsubsubscribeNoticification={unsubsubscribeNoticificationForButton}\r\n\t\t\t\t\tisCitySubscribed={state.ecoCity ? state.subscribedCities.some(s=>s.cityId===state.ecoCity.id) : false}\r\n\t\t\t\t\tbgApp={bgApp}\r\n\t\t\t\t\tdoStory={doStory}\r\n\t\t\t\t\tnativeCityId={state.nativeCity ? state.nativeCity.id : DEFAULT_CITY_ID}\r\n\t\t\t\t\tisInit={isInit}\r\n\t\t\t\t\t\tgo={go}\r\n\t\t\t\t\t\tcity={state.ecoCity ? state.ecoCity : null}\r\n\t\t\t\t\t\tid={ROUTES.HOME} isGoodWind={\r\n\t\t\t\t\t\t\t(state.ecoCity && state.ecoCity.current) ? (state.ecoCity.current.aqi<=50) : true  \r\n\t\t\t\t\t\t} />\r\n\t\t\t\t\t\r\n\t\t\t\t</View>\r\n\t\t\t</AppRoot>\r\n\t\t\t<div id='canvas' style={{width:0,height:0,opacity:0,overflow:'hidden'}}>\r\n\t\t\t<Stage\r\n\t\t\twidth={253}\r\n\t\t\theight={250}\r\n\t\t\tref={refBg}\r\n\t\t\t>\r\n\t\t\t\t<Layer>\r\n\t\t\t\t\t\t<Rect \r\n\t\t\t\t\t\tfill={'white'}\r\n\t\t\t\t\t\twidth={253}\r\n\t\t\t\t\t\theight={250}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t</Layer>\r\n\t\t\t</Stage>\r\n\t\t\t<Stage\r\n    ref={ref}\r\n        width={1362} height={1427}\r\n    >\r\n\r\n        <Layer>\r\n\t\t\t<Rect\r\n\t\t\tfillLinearGradientStartPoint={{ x: 0, y: -100 }}\r\n\t\t\tfillLinearGradientEndPoint={{ x: 670, y: 1200 }}\r\n\t\t\tfillLinearGradientColorStops={(state.ecoCity && state.ecoCity.current.aqi>100) ?\r\n\t\t\t\t[0,'rgba(255,153,182,1)',1,'rgba(204,183,254,1)'] \r\n\t\t\t\t: (state.ecoCity && state.ecoCity.current.aqi>50) ? [0,'#FDCFB2',1,'#BF8FF5']\r\n\t\t\t\t: [0,'#B3FF86',1,'#EEFFC8']}\r\n\t\t\twidth={1362}\r\n\t\t\theight={1427}\r\n\t\t\tcornerRadius={118.56}\r\n\t\t\t/>\r\n\t\t</Layer>\r\n\t\t<Layer>\r\n            <Text\r\n                fontFamily={'SF-Pro-Rounded-Heavy'}\r\n                text=\"Качество воздуха:\"\r\n\t\t\t\tx={254.58}\r\n                fontSize={96}\r\n                y={286.71}\r\n                fill='rgba(0, 0, 0, 0.5)'\r\n                width={860}\r\n                height={115}\r\n            />\r\n\t\t\t<Text\r\n                fontFamily={'SF-Pro-Rounded-Heavy'}\r\n                text={(state.ecoCity && state.ecoCity.current.aqi > 100) ? \"Плохое\" : (state.ecoCity && state.ecoCity.current.aqi > 50) ? 'Неплохое' : \"Хорошее\"}\r\n                x={(state.ecoCity && state.ecoCity.current.aqi>100) ? 340 : (state.ecoCity && state.ecoCity.current.aqi>50) ? 240 : 269.58 } //53.5\r\n                fontSize={188}\r\n                y={421.71}\r\n                fill='rgba(0, 0, 0, 0.5)'\r\n                width={1000}//146\r\n                height={224}\r\n            />\r\n            <Text\r\n                fontFamily={'SF-Pro-Rounded-Regular'}\r\n                text={(state.ecoCity ? state.ecoCity.name : 'SPb')}\r\n                x={(1362-(state.ecoCity ? (state.ecoCity.name.length*45) : 10))/2}\r\n                fontSize={99}\r\n                y={755}\r\n                fill='rgba(0, 0, 0, 0.5)'\r\n                width={1000}\r\n                height={100}\r\n            />\r\n\t\t\t<Rect\r\n\t\t\tx={231}\r\n\t\t\ty={1084}\r\n\t\t\twidth={901}\r\n\t\t\tfill={'rgba(255,255,255,0.45)'}\r\n\t\t\theight={220}\r\n\t\t\tcornerRadius={165.98}\r\n\t\t\t/>\r\n\t\t\t<Text\r\n\t\t\ttext={'Узнать больше'}\r\n\t\t\twidth={631}\r\n\t\t\theight={102}\r\n\t\t\tx={311}\r\n\t\t\tfontSize={84}\r\n\t\t\tfontFamily={'SF-Pro-Rounded-Regular'}\r\n\t\t\tfill='rgba(0, 0, 0, 0.5)'\r\n\t\t\ty={1153}\r\n\t\t\t/>\r\n            <PlaceImage x={(1362-(state.ecoCity ? state.ecoCity.name.length*45 : 10)-140)/2}/>\r\n\t\t\t<ChevronRight />\r\n\t\t</Layer>\r\n\r\n    </Stage>\r\n\t\t\t</div>\r\n\t\t</AdaptivityProvider>\r\n\t);\r\n}\r\n\r\nconst BgGood = () =>{\r\n\tconst [image] = useImage(bg_good_svg);\r\n    return <Image\r\n\t\twidth={253}\r\n\t\theight={250}\r\n        image={image} />;\r\n}\r\n\r\nconst PlaceImage = ({x}) => {\r\n    const [image] = useImage(placePNG);\r\n    return <Image\r\n        x={x}\r\n        y={762.15}\r\n        image={image} />;\r\n};\r\n\r\nconst ChevronRight = () =>{\r\n    const [image] = useImage(chevron_right);\r\n    return <Image\r\n        x={1005.8}\r\n        y={1167.05}\r\n        image={image} />;\r\n}\r\n\r\nconst BgImage = ({aqi}) =>{\r\n\tconst [image] = useImage(aqi>100 ? bg_bad : aqi>50 ? bg_okay : bg_good)\r\n\treturn <Image\r\n\t\timage={image}\r\n\t/>\r\n}\r\n\r\nexport default App;\r\n","import { Appearance, platform } from \"@vkontakte/vkui\"\r\n\r\n\r\nconst SET_PLATFORM:'initialReducer/SET_PLATFORM'='initialReducer/SET_PLATFORM'\r\nconst SET_BG_APP:'initialReducer/SET_BG_APP'='initialReducer/SET_BG_APP'\r\n\r\ntype PlatformType = 'mobile' | 'pc' \r\ntype BgAppType = 'bg__app__light' | 'bg__app__dark'\r\n\r\nconst initialState = {\r\n    platform: 'mobile',\r\n    bgApp: 'bg__app__light'\r\n}\r\ntype InitialStateType = typeof initialState\r\n\r\ntype ActionType = SetBgAppType | SetPlatformType\r\n\r\nexport const initialReducer = (state=initialState,action:ActionType):InitialStateType=>{\r\n    switch(action.type){\r\n        case SET_PLATFORM:\r\n            return{\r\n                ...state,\r\n                platform: action.platform\r\n            }\r\n        case SET_BG_APP:\r\n            return{\r\n                ...state,\r\n                bgApp: action.bgApp\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\ntype SetPlatformType = {\r\n    type: typeof SET_PLATFORM,\r\n    platform: PlatformType\r\n}\r\nexport const  setPlatform = (platform:PlatformType):SetPlatformType =>{\r\n    return{\r\n        type: SET_PLATFORM,\r\n        platform\r\n    }\r\n}\r\n\r\ntype SetBgAppType = {\r\n    type: typeof SET_BG_APP,\r\n    bgApp: BgAppType\r\n}\r\nexport const setBgApp = (bgApp:BgAppType):SetBgAppType =>{\r\n    return{\r\n        type: SET_BG_APP,\r\n        bgApp\r\n    }\r\n}\r\n ","import { combineReducers, createStore } from \"redux\";\r\nimport { initialReducer } from \"./Reducers/initialReducer\";\r\n\r\n\r\n\r\n\r\n\r\nconst reducers = combineReducers({\r\n    initial: initialReducer\r\n})\r\n\r\ntype ReducersType = typeof reducers\r\nexport type AppReducerType = ReturnType<ReducersType>\r\n\r\nexport const store = createStore(reducers)\r\n\r\n\r\n","import bridge from \"@vkontakte/vk-bridge\";\r\nimport { setBgApp, setPlatform } from \"../bll/Reducers/initialReducer\";\r\nimport { store } from \"../bll/store\";\r\n\r\n\r\nconst dispatch = store.dispatch\r\ntype DataType = {scheme:string}\r\nexport const subscribeVkBridge = async () => {\r\n    bridge.subscribe(({ detail }) => {\r\n        const {type, data} = detail\r\n        if (type === 'VKWebAppUpdateConfig') {\r\n            const schemeAttribute = document.createAttribute('scheme');\r\n            //@ts-ignore\r\n            schemeAttribute.value = data.scheme ? data.scheme : 'client_light';\r\n            const title = new RegExp('light')\t\t\t\t\r\n            //@ts-ignore\r\n            if((data.scheme.match(title)) || data.scheme.match(new RegExp('vkcom'))){\r\n                dispatch(setBgApp('bg__app__light'))\r\n                //@ts-ignore\r\n                bridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"light\", \"action_bar_color\": \"#F5F5F5\"})\r\n            }else{\r\n                dispatch(setBgApp('bg__app__dark'))\r\n                bridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"dark\", \"action_bar_color\": \"#373737\"})\r\n            }\r\n\r\n            //@ts-ignore\r\n            if(window.location.href.match(new RegExp('m.vk.com')) || data.scheme.match(new RegExp('vkcom'))){\r\n                dispatch(setPlatform('pc'))\r\n            }else{\r\n                dispatch(setPlatform('mobile'))\r\n            }\r\n\r\n            document.body.attributes.setNamedItem(schemeAttribute);\r\n        }\r\n    })}","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport App from \"./App\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store } from \"./bll/store\";\r\nimport { subscribeVkBridge } from \"./utils/initialVkBridge\";\r\n\r\n// Init VK  Mini App\r\nsubscribeVkBridge()\r\nbridge.send(\"VKWebAppInit\");\r\n\r\n\r\nconst AppContainer = () =>{\r\n  return<Provider store = {store}>\r\n    <App/>\r\n  </Provider>\r\n}\r\nReactDOM.render(<AppContainer />, document.getElementById(\"root\"));\r\nif (process.env.NODE_ENV === \"development\") {\r\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\r\n}\r\n"],"sourceRoot":""}