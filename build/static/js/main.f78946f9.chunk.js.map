{"version":3,"sources":["panels/Intro.js","media/IQAir_logo.svg","media/loader.gif","bricks/Loader.tsx","bricks/ListItem.tsx","bricks/Tooltip.tsx","bricks/PollutionItem.tsx","bricks/Badge.tsx","utils/getDayOfWeek.ts","bricks/WeatherItem.tsx","media/mask.svg","media/score_high.svg","media/score_low.svg","bricks/Advice.tsx","media/window.png","utils/pollutants.ts","dal/api.ts","bricks/StationItem.tsx","media/station.png","utils/getDistance.ts","panels/Home.tsx","panels/ForecastPollutionForDay.tsx","bricks/PlaceItem.tsx","panels/PollutionCities.tsx","panels/MyCities.tsx","media/place.png","bricks/MySnackbar.tsx","media/bg_okay.jpg","media/bg_good.jpg","media/bg_bad.jpg","panels/TurnNoticifications.tsx","App.js","media/chevron_right.png","index.js"],"names":["LIGHT_BLUE","Intro","id","bgApp","handlerClose","checkInfo","requestPermissionLocation","onClose","header","className","Icon","Icon28NarrativeOutline","description","title","Icon28Notifications","Icon28StoryOutline","size","onClick","style","background","before","InfoBlock","fill","Loader","props","src","loader","ListItem","memo","display","color","paddingRight","paddingLeft","children","Tooltip","tooltipDescription","tooltip","padding","margin","PollutionItem","value","bar","aqi","useState","fontSize","max","justifyContent","height","overflow","marginLeft","Badge","getDayOfWeek","day","dayOfWeek","WeatherItem","mode","disabled","after","Advice","isGoodWind","pollution","doStory","score_low","score_high","mask","separator","windows","width","exercice","getFullNamePollutant","toUpperCase","getDescriptionPollutant","instance","axios","create","baseURL","getEcoSearchData","searchQ","post","window","location","search","then","res","data","catch","e","response","getEcologyCity","cityId","target","getCityByCoordinate","lat","long","get","StationItem","stationName","distance","marginRight","overflowX","innerWidth","getDistance","point1","point2","P","Math","PI","latitude","longitude","String","slice","Home","snackbar","city","go","isInit","nativeCityId","isCitySubscribed","subscribeNoticification","unsubsubscribeNoticification","isShowMore","setShowMore","isShowBigImage","setShowBigImage","stations","setStations","useEffect","name","goToForecastPollutionForTheDay","stationsJSX","map","c","index","coordinates","length","pollutantsJSX","current","pollutants","p","pollutantName","concentration","currentDay","Date","getDay","forecastsJSX","forecasts","daily","temperature","paddingTop","flexDirection","position","zIndex","fontWeight","lineHeight","marginTop","opacity","backgroundColor","shadow","recommendations","borderRadius","gridTemplateColumns","gridGap","logo","ForecastPollutionForDay","month","right","settlingHeight","PlaceItem","country","bg","setBG","PollutionCities","countryId","setDefaultCity","countryName","myCity","myCityId","isAllowedPlace","setTitle","cities","setCities","clearestCities","setClearestCitites","isFetching","setFetching","getEcoRankCity","citiesJSX","clearestCitiesJSX","onChange","BgInitClearestCities","items","BgInitCities","MyCities","handleClose","cityFromSearch","cityOfUser","setCitySearch","toHome","MySnackbar","text","resultOperation","closeHandler","success_img","failed_img","TurnNoticifications","icon","subheader","actions","ROUTES","STATE_KEYS","IS_CHECK_INFO","IS_ALLOWED_PLACE","DEFAULT_CITY_ID","DEFAULT_COUNTRY_NAME","DEFAULT_COUNTRY_ID","PlaceImage","x","useImage","placePNG","image","y","ChevronRight","App","setInit","activePanel","popout","activeModal","setActiveModal","setSnackbar","isCheckInfo","defaultCityId","defaultCountryId","ecoCity","nativeCity","subscribedCities","defaultCountryName","state","setState","handlerCloseModal","platform","setPlatform","setBgApp","fetchData","a","bridge","send","keys","Object","values","forEach","s","JSON","parse","key","prev","subscribe","detail","type","console","log","appearance","schemeAttribute","document","createAttribute","scheme","RegExp","match","body","attributes","setNamedItem","idCountry","defaultNameCountry","cityName","currentCity","item","countries","handlerLocationHashChange","hash","addEventListener","removeEventListener","stringify","ref","useRef","refBg","React","useCallback","background_type","blob","toDataURL","closeSnackbarHandler","result","subscribeNoticificationForButton","unsubsubscribeNoticificationForButton","delete","filter","modal","onClickMyCities","some","fillLinearGradientStartPoint","fillLinearGradientEndPoint","fillLinearGradientColorStops","cornerRadius","fontFamily","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.f78946f9.chunk.js","sourcesContent":["import { Div, Spacing, FixedLayout, Group, ModalPage, PanelHeaderClose, ModalPageHeader, Panel, useAdaptivity, ViewWidth, usePlatform, Button, Cell } from \"@vkontakte/vkui\"\r\nimport React,{ Fragment } from \"react\"\r\nimport './Intro.css'\r\nimport { Icon28NarrativeOutline } from '@vkontakte/icons';\r\nimport { Icon28Notifications } from '@vkontakte/icons';\r\nimport { Icon28StoryOutline } from '@vkontakte/icons';\r\nimport { Icon24LocationOutline } from '@vkontakte/icons';\r\n\r\n\r\nconst LIGHT_BLUE = '#4475F1'\r\n\r\nexport const Intro=({id,bgApp,handlerClose,checkInfo,requestPermissionLocation})=>{\r\n    \r\n    \r\n\r\n    return<ModalPage\r\n    id={id}      \r\n    onClose={handlerClose}\r\n    header={\r\n            <ModalPageHeader\r\n            className={bgApp==='bg__app__light' ? 'modal__app__light' : 'modal__app__dark'}\r\n            ></ModalPageHeader>\r\n    }>\r\n        <div className={bgApp}>\r\n        <Fragment>\r\n            <Group>\r\n                <Div className='center__x text__big'>\r\n                    Добро пожаловать в Purify\r\n                </Div>\r\n                <Div>\r\n                    <InfoBlock \r\n                    Icon={Icon28NarrativeOutline}\r\n                    description={'Просматривайте актуальную статистику и получайте важные советы, чтобы сберечь здоровье. '}\r\n                    title={'Следите за качеством воздуха'} />\r\n                    <InfoBlock \r\n                    Icon={Icon28Notifications}\r\n                    description={'Получайте уведомления, чтобы заранее знать об изменениях в худшую сторону.'}\r\n                    title={'Будьте в курсе'}\r\n                    />\r\n                    <InfoBlock \r\n                    Icon={Icon28StoryOutline}\r\n                    description={'Информируйте их в критических ситуациях через истории ВКонтакте.'}\r\n                    title={'Сообщайте близким'}\r\n                    />\r\n                </Div>\r\n            </Group>\r\n            <Div\r\n            className='center__x'\r\n            >\r\n                <Button  \r\n                size='l'\r\n                onClick={requestPermissionLocation}\r\n                className='intro__button__location'\r\n                style={{background:LIGHT_BLUE}}\r\n                before={<Icon24LocationOutline/>}>\r\n                  Разрешить доступ к местоположению  \r\n                </Button>\r\n            </Div>\r\n            <Div\r\n            onClick={()=>{\r\n                checkInfo()\r\n            }}\r\n            className='w-100 highlight_on_touch center__x text__gray'\r\n            >\r\n                Пропустить\r\n            </Div>\r\n            <Spacing size={32}/>\r\n        </Fragment>\r\n        </div>\r\n    </ModalPage>\r\n}\r\n\r\nexport const InfoBlock=({description, title, Icon})=>{\r\n    return<Div className='intro__info'>\r\n    <div className='center__y'>\r\n        <Icon fill={LIGHT_BLUE}/>\r\n    </div>\r\n    <Div>\r\n        <div>\r\n            <strong>{title}</strong>\r\n        </div>\r\n        <div className='text__gray'>\r\n            {description}\r\n        </div>\r\n    </Div>\r\n</Div>\r\n}","export default __webpack_public_path__ + \"static/media/IQAir_logo.faabc11a.svg\";","export default __webpack_public_path__ + \"static/media/loader.4eb6b9ea.gif\";","//@ts-ignore\r\nimport loader from \"../media/loader.gif\";\r\n\r\ntype PropsType={}\r\n\r\nexport const Loader:React.FC<PropsType>=(props)=>{\r\n    return<img className='w-100' src={loader} />\r\n}","import { ElementType, JSXElementConstructor, memo, ReactElement } from \"react\"\r\n\r\n\r\n\r\ntype PropsType={\r\n    description: string | ReactElement<any, any>,\r\n    className?: string,\r\n    bgApp: string,\r\n    onClick?: ()=>void\r\n}\r\n\r\n\r\nexport const ListItem:React.FC<PropsType> = memo(({ description, onClick, className, bgApp, ...props }) => {\r\n    return <div className=''\r\n        onClick = {onClick ? onClick : ()=>{}} \r\n        style={{ display: 'flex', color: (bgApp==='bg__app__light' ? '#454545' : 'white') }}>\r\n        <div className={className ? className :'center__y'}\r\n        style={{paddingRight: 16, paddingLeft:8}}\r\n        >\r\n            {props.children}\r\n        </div>\r\n        <div className='center__y'> \r\n            {description}\r\n        </div>\r\n    </div>\r\n})","\r\nimport './Tooltip.css'\r\n\r\n\r\n\r\ntype PropsType={\r\n    tooltipDescription: string\r\n}\r\n\r\nexport const Tooltip:React.FC<PropsType> = ({tooltipDescription,children}) =>{\r\n    //@ts-ignore\r\n    return<div tooltip={tooltipDescription} tooltip-position={'bottom'}\r\n    style={{padding:0,margin:0}}>\r\n        {children}\r\n    </div>\r\n}","import { Icon20Info } from \"@vkontakte/icons\"\r\nimport {Tooltip} from './Tooltip'\r\nimport React, { memo, useState } from \"react\"\r\n\r\n\r\n\r\ntype PropsType = {\r\n    title: string,\r\n    value: number,\r\n    tooltipDescription: string,\r\n    bar: string,\r\n    aqi?: number,\r\n    bgApp: string\r\n}\r\n\r\nexport const PollutionItem: React.FC<PropsType> = memo(({ title, value, tooltipDescription, bar, aqi, bgApp }) => {\r\n\r\n    let [show, setShow] = useState(false)\r\n\r\n\r\n    const showTooltip = () => {\r\n        setShow(true)\r\n        setTimeout(() => {\r\n            setShow(false)\r\n        }, 4000)\r\n    }\r\n\r\n    return <div\r\n        style={{paddingRight:4,paddingLeft:4, color:bgApp==='bg__app__light' ? '#454545' : 'white'}}\r\n        className='w-100 pollution__item'>\r\n        <div style={{fontSize:16}} >\r\n            {title}\r\n        </div>\r\n        <div className='center__y'>\r\n            <progress className={bar} value={aqi ? aqi : value } max={100}/>\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'end'}}>\r\n            <div className='text__gray' style={{fontSize:14,height:20,overflow:'hidden'}}>\r\n                {value}  μm<sup>3</sup>\r\n            </div>\r\n            <div style={{marginLeft:3}}>\r\n                <Tooltip tooltipDescription={tooltipDescription}>\r\n                    <Icon20Info fill='#C1C1C1' />\r\n                </Tooltip>\r\n            </div>\r\n        </div>\r\n    </div>\r\n})\r\n","import React, { memo } from \"react\";\r\n\r\n\r\ntype PropsType={\r\n    value: any,\r\n    color: string,\r\n    style?: any\r\n}\r\n\r\nexport const Badge:React.FC<PropsType> = memo(({value,color,style}) =>{\r\n\r\n    return<span {...style} className={'badge' + ' ' + color } >\r\n        {value}\r\n    </span>\r\n})","\r\n\r\n\r\nexport const getDayOfWeek=(day:number):string=>{\r\n    const week = [\r\n        'Понедельник',\r\n        'Вторник',\r\n        'Среда',\r\n        'Четверг',\r\n        'Пятница',\r\n        'Суббота',\r\n        'Воскресенье'\r\n    ]\r\n    let dayOfWeek = day\r\n    while (dayOfWeek>7){\r\n        dayOfWeek = dayOfWeek -7\r\n    }\r\n        \r\n    return week[dayOfWeek-1]\r\n}","import { Icon24ChevronCompactRight, Icon24ErrorCircle } from \"@vkontakte/icons\"\r\nimport { Cell } from \"@vkontakte/vkui\"\r\nimport React, { memo } from \"react\"\r\nimport {Badge} from './Badge'\r\nimport {getDayOfWeek} from '../utils/getDayOfWeek'\r\n\r\n\r\ntype PropsType={\r\n    day: number,\r\n    value: any,\r\n    mode: 'danger' | 'okay' | 'good',\r\n    onClick: ()=>void\r\n}\r\n\r\nexport const WeatherItem:React.FC<PropsType>=memo(({day, value, mode, onClick})=>{\r\n    const color='bg__'+mode\r\n    return<div style={{fontSize:16, color:'#454545'}} className='w-100'>\r\n        <Cell\r\n        disabled={true}\r\n        after={<div>\r\n        <Badge value={value}  color={color} />\r\n        {/*<Icon24ChevronCompactRight fill='#C1C1C1' />*/}\r\n        </div>\r\n        }\r\n        before={mode==='danger' && <Icon24ErrorCircle fill={'#EF462F'}/>} >\r\n        <div>\r\n            <div className='center__y'>\r\n            {getDayOfWeek(day)}\r\n            </div>\r\n        </div>\r\n        </Cell>\r\n    </div>\r\n})","export default __webpack_public_path__ + \"static/media/mask.ca4eeaf1.svg\";","export default __webpack_public_path__ + \"static/media/score_high.8b2dd071.svg\";","export default __webpack_public_path__ + \"static/media/score_low.272815f5.svg\";","import { Card, Spacing } from \"@vkontakte/vkui\";\r\nimport React from \"react\";\r\n//@ts-ignore\r\nimport mask from '../media/mask.svg'\r\n//@ts-ignore\r\nimport windowSVG from '../media/window.png'\r\n//@ts-ignore\r\nimport score_high from '../media/score_high.svg'\r\n//@ts-ignore\r\nimport score_low from '../media/score_low.svg'\r\nimport { ListItem } from \"./ListItem\";\r\nimport { Icon28LikeOutline, Icon28StoryOutline } from \"@vkontakte/icons\";\r\n\r\n\r\n\r\ntype PropsType = {\r\n    pollution: {\r\n        exercice: {\r\n            value: string;\r\n            text: string;\r\n        };\r\n        windows: {\r\n            value: string;\r\n            text: string;\r\n        };\r\n        mask: {\r\n            value: string;\r\n        };\r\n        air_purifier: {\r\n            value: string;\r\n        };\r\n    };\r\n    isGoodWind: boolean,\r\n    bgApp: string,\r\n    doStory: ()=>void\r\n};\r\n\r\nconst LIGHT_BLUE = '#4475F1'\r\n\r\nexport const Advice:React.FC<PropsType> = ({isGoodWind,pollution,bgApp, doStory}) =>{\r\n    return<Card\r\n    mode=\"shadow\"\r\n    className='card__app'>\r\n       <div>\r\n\r\n           <ListItem bgApp={bgApp} description={isGoodWind ? 'Качество воздуха хорошее и соответствует требованиям ООН. Наслаждайтесь.' : <span>Качество воздуха плохое и превышает требования ООН.</span>}>\r\n               {isGoodWind ? <img src={score_low} /> : <img src={score_high} />}\r\n           </ListItem>\r\n           {(pollution.mask.value!=='green' && pollution.mask.value!=='hidden') && <><Spacing className=\"spacing\" size={32} separator />\r\n            <ListItem bgApp={bgApp} description={'Носите маску на улице.'}>\r\n               <img src={mask} />\r\n           </ListItem></>}\r\n           {pollution.windows.value!=='hidden' && <><Spacing size={32} separator className=\"spacing\" />\r\n            <ListItem bgApp={bgApp} description={pollution.windows.value!=='green' ? 'Закройте окна.' : 'Откройте окна и проветрите помещение свежим воздухом.'}>\r\n               <div style={{width:28}} className='center__x'>\r\n               <img src={windowSVG} />\r\n               </div>\r\n           </ListItem></>}\r\n           {(pollution.exercice.value!=='hidden') && <><Spacing size={32} separator />\r\n           <ListItem bgApp={bgApp} description={pollution.exercice.value!=='green' ? 'Избегайте нагрузок на улице.' : 'Хорошее время для тренировки.'}>\r\n               <Icon28LikeOutline fill={LIGHT_BLUE} />\r\n           </ListItem></>}\r\n           <Spacing size={32} separator className=\"spacing\" />\r\n           <ListItem\r\n           onClick={doStory}\r\n           bgApp={bgApp} description={<div style={{color:LIGHT_BLUE}}><div>Сообщите друзьям и близким</div><div>Поделитесь историей</div></div>}>\r\n                <Icon28StoryOutline fill={LIGHT_BLUE} />\r\n            </ListItem>\r\n\r\n       </div>\r\n</Card>\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAYAAACAl21KAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAF1SURBVHgB3VTRbcJADH2+ZIB8tLQIKqUbMEIYgQlgC8gX4St0itIJGKF0g2xQVIFo4Sf/JXF9l4BCFSJF9KPC0uUcn/3uzn5nQi7t4c6DwpjBLgEuKoSIYmaOFNTsI7x5MTYD4n8Foo7lLwZjCab4GKS4wwxHbItTNPYyJZmswmZAD6PtgAnPcpIoSdPe51NzWfRv+dt3Pa/DxmPRfj/cuLZlzWXjDtKkq5iob3BLQKpE++6TpEf6FsoaKyLuCOqiDkgRjEEy4Cpz/0uEEeviKPyR/D8gavtb1op8lqUOOTnPrUu1HCGnY+feMVKc2SqfuXxZ+GeKlQGliNbTRrfM8UjI6SkhD9L2d68C511x1WxTDbqQ3UCsSN6KLrErrxk1JYuRdsKQ3pRiIjbnW1nzOmDady8xWpc2NMsa22gnTY2D3GfxK8bTR5cRHQySDkeI6GoigjlYTe8mB7qhNdoMCHYfyrSVypxJx9DpkNxSsApv37TtB9gfl4I+GD1PAAAAAElFTkSuQmCC\"","\r\n\r\n\r\n\r\nexport const getFullNamePollutant=(title:string)=>{\r\n    switch (title) {\r\n        case 'pm25':\r\n            return 'PM2.5'\r\n        case 'pm10':\r\n            return 'PM10'\r\n        case 'o3':\r\n            return 'O3'\r\n        case 'no2':\r\n            return 'NO2'\r\n        case 'so2':\r\n            return 'SO2'\r\n        case 'co':\r\n            return 'CO'\r\n        default:\r\n            return title.toUpperCase()\r\n    }\r\n}\r\nexport const getDescriptionPollutant=(title:string)=>{\r\n    switch (title) {\r\n        case 'pm25':\r\n            return 'Крошечные частицы (<2.5 μm) в воздухе, которые, при вдыхании, попадают напрямую в кровь.'\r\n        case 'pm10':\r\n            return 'Крошечные частицы (<10 μm) в воздухе, которые, при вдыхании, попадают напрямую в кровь.'\r\n        case 'o3':\r\n            return 'Озон — токсичный и канцерогенный газ, влияющий на органы дыхания.'\r\n        case 'no2':\r\n            return 'Оксид азота — особо токсичен, раздражает дыхательные пути и уменьшает содержание гемоглобина в крови.'\r\n        case 'so2':\r\n            return 'Оксид серы — при длительном воздействии может нанести непоправимый вред лёгким.'\r\n        case 'co':\r\n            return 'Монооксид углерода — не имеет запаха и цвета. Симптомы отравления включают слабость, головную боль, тошноту и др.'\r\n        default:\r\n            return 'Еще нет подходящего описания для этого элемента.'\r\n    }\r\n}","import axios from \"axios\";\r\nimport { EcoCityData, EcoCityRank, EcoSearchData, UserEcoSubs } from \"../types/EcoTypes\";\r\n\r\n\r\nconst instance = axios.create({\r\n    baseURL:'https://vk-showtime.herokuapp.com/api/ecology/'\r\n})\r\n\r\nexport const getEcoSearchData = (searchQ?:string) =>{\r\n    return instance.post<{data:EcoSearchData}>(`search${window.location.search}`,{\r\n        searchQ\r\n    }).then(res=>res.data)\r\n    .catch(e=>e.response.data)\r\n}\r\nexport const getEcologyCity = (cityId:string) =>{\r\n    return instance.post<{data:EcoCityData} | null>(`eco-info${window.location.search}`,{\r\n        id: cityId,\r\n        target: 'city'\r\n    }).then(res=>res.data)\r\n    .catch(e=>e.response.data)\r\n}\r\nexport const getEcologyCountry = (countryId:string) =>{\r\n    return instance.post<{data:EcoCityData} | null>(`eco-info${window.location.search}`,{\r\n        id: countryId,\r\n        target: 'country'\r\n    }).then(res=>res.data)\r\n    .catch(e=>e.response.data)\r\n}\r\nexport type CityCoordinateType={\r\n    city: string,\r\n    countryName: string\r\n}\r\nexport const getCityByCoordinate = (lat:number, long:number) =>{\r\n    return axios.get<CityCoordinateType>(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${long}&localityLanguage=ru`)\r\n    .then(res=>res.data)\r\n    .catch(e=>e.response.data)\r\n}\r\nexport const getEcoRankCity = (countryId: string) =>{\r\n    return instance.post<EcoCityRank>(`rank${window.location.search}`,{\r\n        id: countryId\r\n    })\r\n    .then(res=>res.data)\r\n    .catch(e=>e.response.data)\r\n}\r\nexport const subscribeNoticification=(cityId:string)=>{\r\n    return instance.post(`subscribe${window.location.search}`,{id:cityId})\r\n}\r\nexport const unsubscribeNoticification=(cityId:string)=>{\r\n    return instance.delete(`subscribe${window.location.search}`,\r\n    {data:{id:cityId}})\r\n}\r\nexport const getSubscribes=()=>{\r\n    return instance.get<{data:UserEcoSubs[]}>(`subscribe${window.location.search}`)\r\n    .then(res=>res.data.data)\r\n}\r\n","import { Icon24ChevronCompactRight, Icon24ErrorCircle } from \"@vkontakte/icons\"\r\nimport { Cell } from \"@vkontakte/vkui\"\r\nimport React, { memo } from \"react\"\r\nimport {Badge} from './Badge'\r\n//@ts-ignore\r\nimport stationPNG from '../media/station.png'\r\n\r\n\r\ntype PropsType={\r\n    stationName: string,\r\n    value: any,\r\n    mode: 'danger' | 'okay' | 'good',\r\n    onClick?: ()=>void,\r\n    distance: number\r\n}\r\n\r\nexport const StationItem:React.FC<PropsType>=memo(({value, mode, stationName, distance})=>{\r\n    const color='bg__'+mode\r\n    return<div style={{fontSize:16, color:'#454545'}} className='w-100'>\r\n        <Cell\r\n        disabled={true}\r\n        after={<div>\r\n        <Badge value={value}  color={color} />\r\n        {/*<Icon24ChevronCompactRight fill='#C1C1C1' />*/}\r\n        </div>\r\n        }>\r\n        <div className='d-flex'>\r\n            <div className='center__y'>\r\n                <img src={stationPNG} style={{marginRight:16}} />\r\n            </div>\r\n            <div>\r\n            <div style={{fontSize:16,overflowX: window.innerWidth>500 ? 'hidden' : 'scroll'}}>\r\n                {stationName}\r\n            </div>\r\n            <div style={{fontSize:15,overflowX: window.innerWidth>500 ? 'hidden' : 'scroll'}} className=\"text__gray\">\r\n                \r\n                {distance>10 && 'Информация может быть не точный'}\r\n            </div>\r\n            </div>\r\n        </div>\r\n        </Cell>\r\n    </div>\r\n})","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAASCAYAAABfJS4tAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKaSURBVHgBtVRdUhNBEO6e2cDy87BUCUKR6HKDcALhBIQTqCcAHiwqeYG8CNEHcwPwBOAJEk8QbsCWJMZarEooRCSZnXZ6djcSypTkwX6Z2enur7/+W4RE/FKYjwBrWkXl1rvFKowh2VJYRYINrXqbrffZM34TFnS37UcEJ0TkAYrn9m373OP3UWDLb8L8QK+xQ8ZFOBMnnvEbAEdS7rECCOqtysKODTQ101BCnqeG98Xf63joQCMSssa2zcP5MgDWGWN2avqIbZAVDMAfSkcrLgcyDjYQ4GnzYH7zb4xzpUvOsIAAwfXtzao76XoZKRtE4IGO1kUknC02NA/H3ypLQcqegM5GgbJcvGVdwtKd3mJfIDy2ShQvBCGs2TsmjxR/g+q//sOu/cow7OSK4fmzYvhygK6hHAPhtnXV8MmeiAXMlcIO0/9xezPnTc/4iqBhdN3mwcLcANgAxqWxMqRbNjpTDj8jMj45cKV6/Q7bCFsTvlVXuipCL2F9NpQ3wqCBpkTdYRUGfPa18oPyXKrzBCLYD+6+AyqIUxmwS1KOdtKrBNwfBiZrS+ruiqclzUpQEnF20s0HpgEciFPL7rbXUueLw6Xj9P7lYOFjeuelShod8GKoXyofZwWBMBtTjz/khj01xlsn5B78QxThB4hTtBgoKW6shjpmdy/XQFCN6Ts6WgXX7fZ7vYapna+1KHytPLGdzhZD4tM0DvnMFb8XCPQJs420Xuf5v78PolmZr5tRO+UyG8URN4ANTfG2f95dfx7FVk7Iuhmvqhm1zXj+Hcs+3QcbfdFsnxSixiyNZr95+LT8EOgh4yGd+QmZWm6l7BnY/iv4kjGRWUGEHowpRDoAnq6E/Ti+lnHK+jEi4D+J81hDLhOMIb8B/4VS44OksbgAAAAASUVORK5CYII=\"","\r\n\r\n\r\n\r\ntype GetDistanceType = {\r\n    point1:{\r\n        latitude:number,\r\n        longitude:number\r\n    },\r\n    point2:{\r\n        latitude:number,\r\n        longitude:number\r\n    }\r\n}\r\n\r\nexport const getDistance = ({point1,point2}:GetDistanceType):number =>{\r\n\r\n    const RADIUS_EARTH = 6371\r\n    const P = Math.PI\r\n    \r\n    const distance = (((((point1.latitude-point2.latitude)**2) + ((point2.longitude-point2.longitude)**2))**0.5)/180)*P*RADIUS_EARTH \r\n\r\n    return (+(String(distance).slice(0,3)))\r\n\r\n}","import { CardGrid, Group, Panel, Div, Avatar, Card, Cell, Spacing, Header, Progress, Link, Footer, FixedLayout } from \"@vkontakte/vkui\"\r\nimport React, { ReactElement, useEffect,useRef,useState} from \"react\"\r\nimport './Home.css'\r\nimport { Icon16Place, Icon24Search } from '@vkontakte/icons';\r\nimport { Icon28Notifications } from '@vkontakte/icons';\r\nimport { Icon28StoryOutline } from '@vkontakte/icons';\r\nimport { Icon28LikeOutline } from '@vkontakte/icons';\r\n//@ts-ignore\r\nimport logo from '../media/IQAir_logo.svg'\r\nimport { Icon24Dropdown } from '@vkontakte/icons';\r\nimport { Loader } from '../bricks/Loader'\r\nimport { Icon24Fullscreen } from '@vkontakte/icons';\r\nimport {ListItem} from '../bricks/ListItem'\r\nimport {PollutionItem} from '../bricks/PollutionItem'\r\nimport { WeatherItem } from \"../bricks/WeatherItem\";\r\nimport { Advice } from \"../bricks/Advice\";\r\nimport { EcoCityData, EcoCityType, EcoSearchData, EcoStation } from \"../types/EcoTypes\";\r\nimport { getDescriptionPollutant, getFullNamePollutant } from \"../utils/pollutants\";\r\nimport { Badge } from \"../bricks/Badge\";\r\nimport { MyCanvas } from \"../bricks/MyCanvas\";\r\nimport { getEcoSearchData } from \"../dal/api\";\r\nimport { StationItem } from \"../bricks/StationItem\";\r\nimport { getDistance } from \"../utils/getDistance\";\r\n\r\n\r\n\r\nconst LIGHT_BLUE = '#4475F1'\r\ntype PropsType={\r\n    id: string,\r\n    isGoodWind: boolean,\r\n    city: EcoCityData | null,\r\n    nativeCityId: string,\r\n    go:(modal:string)=>void,\r\n    isInit: boolean,\r\n    bgApp: string,\r\n    subscribeNoticification: ()=>void,\r\n\tunsubsubscribeNoticification: ()=>void,\r\n\tisCitySubscribed: boolean,\r\n    snackbar: ReactElement<any,any> | null,\r\n    doStory: ()=>void\r\n}\r\n\r\n\r\nexport const Home:React.FC<PropsType> = ({ id, snackbar, bgApp, isGoodWind, city, go, isInit, nativeCityId, isCitySubscribed, subscribeNoticification, unsubsubscribeNoticification, doStory }) => {\r\n\r\n    const [isShowMore,setShowMore] = useState(false)\r\n    const [isShowBigImage, setShowBigImage] = useState(false)\r\n    const [stations,setStations] = useState<EcoStation[]>([])\r\n\r\n    useEffect(()=>{\r\n        if(city){\r\n            getEcoSearchData(city.name).then((res:{data:EcoSearchData})=>{\r\n                if(res.data){\r\n                    setStations(res.data.stations)\r\n                }\r\n            })\r\n            setShowMore(false)    \r\n        }\r\n        return()=>{\r\n            setShowMore(false)\r\n        }\r\n    },[city])\r\n\r\n\r\n    const handlerOpenImage=()=>{\r\n        setShowBigImage(true)\r\n    }\r\n    const handlerCloseImage=()=>{\r\n        setShowBigImage(false)\r\n    }\r\n    const goToForecastPollutionForTheDay=()=>{\r\n        go('FORECAST_POLLUTION_FOR_THE_DAY')\r\n    }\r\n    \r\n    const stationsJSX = city ? stations.map((c,index)=><>\r\n    <StationItem \r\n    distance={getDistance({point1:c.coordinates,point2:city.coordinates})}\r\n    stationName={c.name}\r\n    key={`${index}${c.name}`}\r\n    value={c.aqi} mode={c.aqi > 100 ? 'danger' : ((c.aqi>50) ? 'okay' : 'good')} />\r\n    {(index+1)!==stations.length && <Spacing className=\"spacing\" separator size={16} />}\r\n</>) : []\r\n\r\n    const pollutantsJSX = city ? city.current.pollutants.map((p,index)=><>\r\n    <PollutionItem\r\n    bgApp={bgApp}\r\n    key={`${index}${p.pollutantName}`}\r\n    title={getFullNamePollutant(p.pollutantName)}\r\n    value={p.concentration}\r\n    aqi={p.aqi}\r\n    tooltipDescription={getDescriptionPollutant(p.pollutantName)}\r\n    bar={p.aqi>100 ? 'bad_bar' : p.aqi>50 ? 'okay_bar' : 'good_bar'}\r\n    /> \r\n    {(index+1)!==city.current.pollutants.length && <Spacing \r\n    className=\"spacing\"\r\n    separator size={32} />}\r\n    </>) : []\r\n\r\n    const currentDay = (new Date()).getDay()\r\n    const forecastsJSX = city ? city.forecasts.daily.map((c,index)=><>\r\n        <WeatherItem \r\n        key={`${index}-${c.temperature}${c.aqi}`}\r\n        onClick={goToForecastPollutionForTheDay}\r\n        day={currentDay+index+1} value={c.aqi} mode={c.aqi > 100 ? 'danger' : ((c.aqi>50) ? 'okay' : 'good')} />\r\n        {(index+1)!==city.forecasts.daily.length && <Spacing className=\"spacing\" separator size={16} />}\r\n    </>) : []\r\n\r\n    return <Panel id={id}>\r\n        <Group\r\n        style={{paddingTop:42}}\r\n        className={bgApp}>\r\n            {isShowBigImage && \r\n            <div \r\n            onClick={handlerCloseImage}\r\n            style={{\r\n                display:'flex',\r\n                justifyContent:'center',\r\n                flexDirection:'column',\r\n                position:'fixed',\r\n                zIndex:1000,\r\n                width:'100%',\r\n                height:'100%'\r\n                }}>\r\n                <Loader />\r\n            </div>\r\n            }\r\n            <Div\r\n                className={(isInit ? 'bg__init card' : 'card' + ' ' + ((city && city.current.aqi<=50) ? 'home__good__weather' : (city && city.current.aqi<=100) ? 'home__okay__weather' : 'home__bad__weather'))}>\r\n                <div className='home__main__title'>\r\n                    {isInit ?  <div\r\n                    style={{height:24,width:61}}\r\n                    className='bg__init__home'></div> : <div\r\n                    style={{fontSize:24,fontWeight:'inherit',lineHeight:2.2,color:'rgba(0,0,0,0.5)'}}\r\n                    className='text__SF-Pro-Rounded-Semibold'>{city && city.current.aqi} AQI</div>}\r\n                </div>\r\n                <div className='center__x text__Inter-Medium' style={{color:'rgba(0,0,0,0.5)'}}>\r\n                    {isInit && <div \r\n                    style={{height:16, width:97, marginTop:10}}\r\n                    className='bg__init__home'></div> }\r\n                    <div \r\n                    style={{fontSize:17}}\r\n                    className='center__y'>\r\n                    {(city && nativeCityId!==city.id && (!isInit)) && <Icon16Place fill='rgba(0,0,0,0.5)' style={{marginRight:3}} />}\r\n                    </div>\r\n                    {((!isInit) && city) && city.name}\r\n                </div>\r\n                <div\r\n                    className='mt-4 home__main__bottom__side'>\r\n                    <div>\r\n                        <div \r\n                        className='home__search__cell__rounded home__search__cell__rounded_active'\r\n                        onClick={()=>go('POLLUTION_CITIES')}\r\n                        style={{opacity:0.5}}>\r\n                        <Avatar \r\n                        style={{backgroundColor:'rgba(255, 255, 255, 0.35)'}}\r\n                        shadow={false}>\r\n                            {(!isInit) && <Icon24Search  fill='#000' />}\r\n                        </Avatar>\r\n                        </div>\r\n                    </div>\r\n                    <div\r\n                        className='home__main__bottom__right__side'>\r\n                        <div \r\n                        style={{opacity:0.5}}\r\n                        onClick={city ? (isCitySubscribed ? unsubsubscribeNoticification : subscribeNoticification) : ()=>{}}\r\n                        className='home__search__cell__rounded home__search__cell__rounded_active'>\r\n                        \r\n                        <Avatar \r\n                        style={{backgroundColor:'rgba(255, 255, 255, 0.35)'}}\r\n                        shadow={false}>\r\n                            {(!isInit) && <Icon28Notifications fill='#000' />}\r\n                        </Avatar>\r\n                        </div>\r\n                        <div\r\n                        className='ml-1' \r\n                        style={{opacity:0.5}}\r\n                        onClick={city ? doStory : ()=>{}}\r\n                        >\r\n                        <Avatar\r\n                        className='home__search__cell__rounded home__search__cell__rounded_active' \r\n                        style={{backgroundColor:'rgba(255, 255, 255, 0.35)'}}\r\n                        shadow={false}>\r\n                            {(!isInit) && <Icon28StoryOutline fill='#000' />}\r\n                        </Avatar>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </Div>\r\n            <Div>\r\n                {(city && (!isInit)) && <Advice\r\n                bgApp={bgApp}\r\n                doStory={doStory}\r\n                pollution={city.recommendations.pollution}\r\n                isGoodWind={isGoodWind}\r\n                />}\r\n                {isInit && <Card \r\n                className='card__app'\r\n                mode='shadow'>\r\n                    <div className='d-flex'>\r\n                        <div \r\n                        className='bg__init'\r\n                        style={{height:24,width:24,borderRadius:20000}}>\r\n                        </div>\r\n                        <div className='bg__init ml-2'\r\n                        style={{height:17,width:122}}>\r\n                        </div>\r\n                    </div>\r\n                </Card>}\r\n            </Div>  \r\n            <Div>\r\n                <Header className='text__SF-Pro-Rounded-Semibold'>\r\n                    {(!isInit) ? <span className=\"text__gray\">\r\n                    ЗАГРЯЗНИТЕЛИ\r\n                    </span> : <div\r\n                    style={{height:12, width:85}}\r\n                    className='bg__init'>\r\n                    </div>}    \r\n                </Header>\r\n                <Card \r\n                mode='shadow'\r\n                className='card__app'\r\n                >\r\n                    <div\r\n                    className='card__app'>\r\n                    {(isInit) && [3,2,1,0].map((c)=><><div\r\n                    key={`pollutant${c}`}\r\n                    style={{display:'grid',gridTemplateColumns:'1fr 50px'}}>\r\n                        <div \r\n                        style={{width:91,height:17}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                        <div style={{width:24,height:24,display:'flex',justifyContent:'end'}}\r\n                        className='bg__init'>\r\n                        </div></div>\r\n                        {c!==0 && <Spacing separator size={32}/>}</>)} \r\n                    {(!isInit) && [...pollutantsJSX].slice(0,4)}\r\n                    {((!isShowMore) && (pollutantsJSX.length>4)) && <Cell onClick={()=>setShowMore(true)}><ListItem bgApp={bgApp} description={<Link>Показать все</Link>}>\r\n                        <Icon24Dropdown fill={LIGHT_BLUE}/>\r\n                    </ListItem></Cell>}\r\n                    {(isShowMore && (!isInit)) && <>{[...pollutantsJSX].slice(4,6)}</>}\r\n                    </div>\r\n                </Card> \r\n            </Div>\r\n            <Div>\r\n                <Header className='text__SF-Pro-Rounded-Semibold'>\r\n                    {(!isInit) ? <span className='text__gray'>\r\n                        ПРОГНОЗ НА НЕДЕЛЮ\r\n                    </span> : <div\r\n                    style={{height:12, width:85}}\r\n                    className='bg__init'>\r\n                    </div>}\r\n                </Header>\r\n                <Card  \r\n                mode='shadow'\r\n                className='card__app'>\r\n                    <div className=''>\r\n                    {(isInit) && [5,6,7,8,9,4,10].map((c)=><><div \r\n                    key={`weather${c}`}\r\n                    style={{display:'grid',gridTemplateColumns:'24px 1fr 50px', gridGap:'10px'}}>\r\n                        <div \r\n                        style={{width:24,height:24}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                        <div \r\n                        style={{width:91,height:17}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                        <div style={{width:52,height:24,display:'flex',justifyContent:'end'}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                    </div>{c!==10 && <Spacing separator size={16} />}</>)}\r\n                        {(!isInit) && forecastsJSX}\r\n                    </div>\r\n                </Card>\r\n            </Div>\r\n            <Div>\r\n                <Header className='text__SF-Pro-Rounded-Semibold'>\r\n                    {(!isInit) ? <span className='text__gray'>\r\n                        Станции\r\n                    </span> : <div\r\n                    style={{height:12, width:85}}\r\n                    className='bg__init'>\r\n                    </div>}\r\n                </Header>\r\n                <Card  \r\n                mode='shadow'\r\n                className='card__app'>\r\n                    <div className=''>\r\n                    {(isInit) && [5,6,7,8,9,4,10].map((c)=><><div \r\n                    key={`station${c}`}\r\n                    style={{display:'grid',gridTemplateColumns:'24px 1fr 50px', gridGap:'10px'}}>\r\n                        <div \r\n                        style={{width:24,height:24}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                        <div \r\n                        style={{width:91,height:17}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                        <div style={{width:52,height:24,display:'flex',justifyContent:'end'}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                    </div>{c!==10 && <Spacing separator size={16} />}</>)}\r\n                        {(!isInit) && stationsJSX}\r\n                    </div>\r\n                </Card>\r\n            </Div>\r\n            {/*<Div>\r\n                <Header>\r\n                    <span className='text__gray'>\r\n                        ИНТЕРАКТИВНАЯ КАРТА\r\n                    </span>\r\n                </Header>\r\n                <Card mode='outline'>\r\n                    <Loader />\r\n                    <div className='home__map__bottom'>\r\n                    <div \r\n                    onClick={handlerOpenImage}\r\n                    className='home__map__button home__map__button_active'>\r\n                        <Icon24Fullscreen/>\r\n                        <div className='ml-1'>Открыть</div>\r\n                    </div>\r\n                    </div>\r\n                </Card>\r\n            </Div>*/}\r\n            <Footer style={{paddingTop:4,paddingLeft:4}}>\r\n                <Div className='text__SF-Pro-Rounded-Semibold'>\r\n                Информация предоставлена\r\n                </Div>\r\n                <Div className=\"\">\r\n                    <img src={logo} />\r\n                </Div>\r\n            </Footer>\r\n            <FixedLayout>\r\n                {snackbar}\r\n            </FixedLayout>\r\n        </Group>\r\n    </Panel>\r\n}\r\n\r\n\r\n\r\n","\r\nimport React, { Fragment } from 'react'\r\nimport { Card, Div, Group, Header, ModalPage, ModalPageHeader, PanelHeaderButton, Spacing } from '@vkontakte/vkui'\r\nimport { Icon24Dismiss } from '@vkontakte/icons'\r\nimport { Icon16Place } from '@vkontakte/icons';\r\nimport { Icon16ClockOutline } from '@vkontakte/icons';\r\nimport { Icon24Message } from '@vkontakte/icons';\r\nimport { PollutionItem } from '../bricks/PollutionItem';\r\n\r\n\r\ntype PropsType = {\r\n    id: string,\r\n    day: number,\r\n    month: string,\r\n    city: string,\r\n    isGoodWind: boolean,\r\n    handlerClose: () => void\r\n}\r\n\r\n\r\nexport const ForecastPollutionForDay: React.FC<PropsType> = ({ day, month, city, id, handlerClose, isGoodWind }) => {\r\n    return <ModalPage\r\n        onClose={handlerClose}\r\n        header={<ModalPageHeader\r\n            right={<PanelHeaderButton onClick={handlerClose}><Icon24Dismiss /></PanelHeaderButton>}></ModalPageHeader>}\r\n        settlingHeight={100} id={id} >\r\n        <Fragment>\r\n            <Group>\r\n                <Div className='w-100 text__dark_gray'>\r\n                    <h3 className='center__x'>\r\n                        6 AQI\r\n                    </h3>\r\n                    <div className='center__x'>\r\n                        <div className='d-flex'>\r\n                            <Icon16Place style={{ marginTop: 3, marginRight: 3 }} />\r\n                            {city}\r\n                        </div>\r\n                        <div className='d-flex ml-2'>\r\n                            <Icon16ClockOutline style={{ marginTop: 3, marginRight: 3 }} />\r\n                            {day} {month}\r\n                        </div>\r\n                    </div>\r\n                </Div>\r\n                <Div>\r\n                    <Card mode='shadow'>\r\n                        <div className='d-flex text__dark_gray p-2'>\r\n                            <div className='center__y'>\r\n                                <Icon24Message />\r\n                            </div>\r\n                            <div className='ml-2'>\r\n                                {isGoodWind ? \r\n                                'Качество воздуха хорошее и соответствует требованиям ООН.'\r\n                                : 'Качество воздуха плохое и превышает требования ООН.'\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </Card>\r\n                </Div>\r\n\r\n                <Div>\r\n                    <Header>\r\n                        <span className=\"text__gray\">\r\n                            ЗАГРЯЗНИТЕЛИ\r\n                        </span>\r\n                    </Header>\r\n                    <Card mode='shadow'>\r\n                        <div className='p-2'>\r\n                            \r\n                        </div>\r\n                    </Card>\r\n                </Div>\r\n                <Spacing size={64}/>\r\n            </Group>\r\n        </Fragment>\r\n\r\n    </ModalPage>\r\n}","import { Cell } from '@vkontakte/vkui'\r\nimport { useEffect, useState } from 'react'\r\nimport { Badge } from './Badge'\r\n\r\n\r\n\r\ntype PropsType = {\r\n    city: string,\r\n    country: string,\r\n    value?: number,\r\n    id: string,\r\n    onClick: () => void\r\n}\r\n\r\n\r\nexport const PlaceItem: React.FC<PropsType> = ({ city, country, value, onClick }) => {\r\n\r\n    let [bg, setBG] = useState('bg__good')\r\n    useEffect(() => {\r\n        if (value) {\r\n            if (value >= 100) {\r\n                setBG('bg__danger')\r\n            } else if (value >= 50) {\r\n                setBG('bg__okay')\r\n            } else {\r\n                setBG('bg__good')\r\n            }\r\n        }\r\n    }, [value])\r\n\r\n    return <div\r\n    onClick={onClick}\r\n    className='highlight_on_touch'\r\n    style={{\r\n        display: 'grid',\r\n        gridTemplateColumns: '1fr 50px'\r\n    }}>\r\n        <div>\r\n            <div style={{fontSize:16}}>\r\n                {city}\r\n            </div>\r\n            <div style={{fontSize:15,color:'#606060'}}>\r\n                {country}\r\n            </div>\r\n        </div>\r\n        {value && <div >\r\n            <Badge color={bg} value={value} >\r\n                {value}\r\n            </Badge>\r\n        </div>}\r\n    </div>\r\n}","import { Icon24Dismiss, Icon32PlaceOutline } from \"@vkontakte/icons\"\r\nimport { Card, Cell, Div, Group, Header, Input, ModalPage, ModalPageHeader, PanelHeaderButton, Search, Spacing } from \"@vkontakte/vkui\"\r\nimport React, { ChangeEvent, Fragment, useEffect, useState } from \"react\"\r\nimport { Icon20Search } from '@vkontakte/icons';\r\nimport { ListItem } from \"../bricks/ListItem\";\r\nimport { Icon20PlaceOutline } from '@vkontakte/icons';\r\nimport { PlaceItem } from \"../bricks/PlaceItem\";\r\nimport { getEcologyCity, getEcoRankCity, getEcoSearchData } from \"../dal/api\";\r\nimport { EcoCity, EcoStation } from \"../types/EcoTypes\";\r\nimport { Formik } from \"formik\";\r\nimport { hidden } from \"chalk\";\r\n\r\n\r\n\r\n\r\n\r\ntype PropsType = {\r\n    id: string,\r\n    countryId: string,\r\n    countryName: string,\r\n    handlerClose: () => void,\r\n    setDefaultCity: (cityId: string) => void,\r\n    onClickMyCities: () => void,\r\n    myCity: string,\r\n    myCityId: string,\r\n    bgApp: string,\r\n    isAllowedPlace: boolean,\r\n    requestPermissionLocation: () => void\r\n}\r\n\r\nexport const PollutionCities: React.FC<PropsType> = ({ id, bgApp, countryId, handlerClose, setDefaultCity, countryName, myCity, myCityId, isAllowedPlace, requestPermissionLocation }) => {\r\n\r\n    type CityType = {\r\n        id: string,\r\n        name: string,\r\n        country: string,\r\n        aqi?: number\r\n    }\r\n    const [title, setTitle] = useState('')\r\n    const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setTitle(e.target.value)\r\n    }\r\n    const [cities, setCities] = useState<CityType[]>([])\r\n    const [clearestCities, setClearestCitites] = useState<CityType[]>([])\r\n    const [isFetching, setFetching] = useState(true)\r\n\r\n    useEffect(() => {\r\n        setFetching(true)\r\n        getEcoSearchData(title.length > 2 ? title : countryName)\r\n            .then(res => {\r\n                const data = res.data\r\n                setCities(data.cities)\r\n                setFetching(false)\r\n            }).catch(e => {\r\n                setFetching(false)\r\n            })\r\n    }, [title])\r\n\r\n    useEffect(() => {\r\n        setFetching(true)\r\n        getEcoSearchData(countryName)\r\n            .then(res => {\r\n                const data = res.data\r\n                setCities(data.cities)\r\n\r\n                getEcoRankCity(countryId)\r\n                    .then(res => {\r\n                        const data = res.data\r\n                        setClearestCitites(data)\r\n                        setFetching(false)\r\n                    })\r\n            }).catch(e => {\r\n                setFetching(false)\r\n            })\r\n    }, [])\r\n\r\n\r\n\r\n    const citiesJSX = cities.map((c, index) => <><Div key={c.id} className=''>\r\n        <PlaceItem\r\n            onClick={() => {\r\n                setDefaultCity(c.id)\r\n                handlerClose()\r\n            }}\r\n            city={c.name} {...c} />\r\n    </Div>{(index + 1) !== cities.length && <Spacing separator className=\"spacing\" size={8} />}</>)\r\n    const clearestCitiesJSX = clearestCities.map((c, index) => <><Div key={c.id} className=''>\r\n        <PlaceItem\r\n            value={c.aqi ? c.aqi : 10}\r\n            onClick={() => {\r\n                setDefaultCity(c.id)\r\n                handlerClose()\r\n            }}\r\n            city={c.name} {...c} country={countryName} />\r\n    </Div>{(index + 1) !== cities.length && <Spacing className=\"spacing\" separator size={8} />}</>)\r\n\r\n\r\n\r\n\r\n\r\n    return <ModalPage\r\n        settlingHeight={100}\r\n        header={<ModalPageHeader\r\n            className={bgApp === 'bg__app__light' ? 'modal__app__light' : 'modal__app__dark'}\r\n            right={\r\n                <PanelHeaderButton onClick={handlerClose}><Icon24Dismiss />\r\n                </PanelHeaderButton>} />}\r\n        id={id}\r\n    >\r\n        <Group className={bgApp}>\r\n            <div>\r\n                <Search\r\n                    value={title} onChange={handleChange}\r\n                    className={bgApp} />\r\n            </div>\r\n            <Div>\r\n                <Card\r\n                    mode='shadow'\r\n                    className='card__app'\r\n                    style={{ padding: 0, overflow: 'hidden' }}>\r\n                    <Cell\r\n                        onClick={() => {\r\n                            if (isAllowedPlace) {\r\n                                setDefaultCity(myCityId)\r\n                                handlerClose()\r\n                            } else {\r\n                                requestPermissionLocation()\r\n                            }\r\n                        }}\r\n                    >\r\n                        <div className='card__app'>\r\n                            {(!isFetching) && <ListItem bgApp={bgApp} description={<div>\r\n                                {isAllowedPlace ? <> <div style={{ fontSize: 16 }}>\r\n                                    {myCity}\r\n                                </div>\r\n                                    <div style={{ fontSize: 15 }} className='text__gray'>\r\n                                        Текущее местоположение\r\n                                    </div> </> : <div\r\n                                        style={{ color: '#4475F1', fontSize: 16 }}>\r\n                                    <div>Разрешить доступ</div>\r\n                                    <div>к местоположению</div>\r\n                                </div>}\r\n                            </div>}>\r\n                                <Icon32PlaceOutline className='' fill='#4475F1' />\r\n                            </ListItem>}\r\n                            {isFetching && <ListItem\r\n                                bgApp={bgApp}\r\n                                description={<div>\r\n                                    <div\r\n                                        style={{ width: 122, height: 16 }}\r\n                                        className='bg__init'>\r\n                                    </div>\r\n                                    <div\r\n                                        style={{ width: 88, height: 12 }}\r\n                                        className='bg__init mt-1'>\r\n                                    </div>\r\n                                </div>}\r\n                            >\r\n                                <div\r\n                                    style={{ height: 24, width: 24, borderRadius: 20000 }}\r\n                                    className='bg__init'></div>\r\n                            </ListItem>}\r\n                        </div>\r\n                    </Cell>\r\n                </Card>\r\n            </Div>\r\n            <Div>\r\n                <Header className='text__SF-Pro-Rounded-Semibold'>\r\n                    {(!isFetching) ? <span className='text__gray'>\r\n                    {title.length>0 ? \"ВСЕ\" : \"С НИЗКИМИ ПОКАЗАТЕЛЯМИ\"}\r\n                    </span> : <div\r\n                        className='bg__init' style={{ width: 85, height: 12 }}\r\n                    ></div>}\r\n                </Header>\r\n                <Card\r\n                    mode='shadow'\r\n                    className='card__app'>\r\n                    <Group>\r\n                        {(isFetching) ? (title.length>0 ? <BgInitCities/> : <BgInitClearestCities />) : <></>}\r\n                        {(!isFetching) && (title.length > 0) ? citiesJSX : clearestCitiesJSX}\r\n                    </Group>\r\n                </Card>\r\n            </Div>\r\n            <Div>\r\n                <Header className='text__SF-Pro-Rounded-Semibold'>\r\n                    {(!isFetching) ? <span className='text__gray'>\r\n                        {title.length>0 ? \"С НИЗКИМИ ПОКАЗАТЕЛЯМИ\" : \"ВСЕ\"}\r\n                    </span> : <div\r\n                        className='bg__init' style={{ width: 85, height: 12 }}>\r\n                    </div>}\r\n                </Header>\r\n                <Card\r\n                    mode='shadow'\r\n                    className='card__app'>\r\n                    <Group>\r\n                        <Group className=''>\r\n                            {(isFetching) ? (title.length>0 ? <BgInitClearestCities/> : <BgInitCities/>) : <></>  }\r\n                            {citiesJSX.length > 0 ? (title.length > 0 ? clearestCitiesJSX : citiesJSX) : <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n                                Городов не найдено.</div>}\r\n                        </Group>\r\n                    </Group>\r\n                </Card>\r\n            </Div>\r\n            <Spacing size={70} />\r\n        </Group>\r\n    </ModalPage>\r\n}\r\n\r\n\r\ntype PropsClearestCitiesType = {}\r\nconst BgInitClearestCities: React.FC<PropsClearestCitiesType> = ({ }) => {\r\n\r\n    const items = [2, 3, 4, 5, 1].map(c => <><Div key={`clearCity${c}`} className='px-2'\r\n        style={{ display: 'grid', gridTemplateColumns: '1fr 50px' }}>\r\n        <div>\r\n            <div\r\n                style={{ width: 122, height: 16 }}\r\n                className='bg__init'>\r\n            </div>\r\n            <div\r\n                style={{ width: 88, height: 12 }}\r\n                className='bg__init mt-1'>\r\n            </div>\r\n        </div>\r\n        <div\r\n            style={{ width: 44, height: 24, borderRadius: 20000 }}\r\n            className='bg__init mt-1'>\r\n        </div>\r\n    </Div>{c !== 1 && <Spacing separator size={8} />}</>)\r\n\r\n    return <>{items}</>\r\n}\r\n\r\ntype PropsBgInitCitiesType = {}\r\nconst BgInitCities: React.FC<PropsBgInitCitiesType> = ({ }) => {\r\n    const items = [2, 3, 4, 5, 1].map(c => <><Div key={`city${c}`} className='px-2'>\r\n        <div>\r\n            <div\r\n                style={{ width: 122, height: 16 }}\r\n                className='bg__init'>\r\n            </div>\r\n            <div\r\n                style={{ width: 88, height: 12 }}\r\n                className='bg__init mt-1'>\r\n            </div>\r\n        </div>\r\n    </Div>{c !== 1 && <Spacing separator size={8} />}</>)\r\n\r\n    return <>{items}</>\r\n}","import { Cell, ModalCard } from \"@vkontakte/vkui\"\r\nimport { EcoCityData } from \"../types/EcoTypes\"\r\nimport { Icon28ChevronRightOutline } from '@vkontakte/icons';\r\nimport { Icon16Place } from '@vkontakte/icons';\r\n\r\n\r\n\r\n\r\n\r\ntype PropsType={\r\n    id: string,\r\n    handleClose: ()=>void,\r\n    cityFromSearch: EcoCityData,\r\n    cityOfUser: EcoCityData,\r\n    setCitySearch: (cityId:string)=>void,\r\n    toHome: ()=>void\r\n}\r\n\r\n\r\nexport const MyCities:React.FC<PropsType> = ({id,handleClose,cityFromSearch,cityOfUser,setCitySearch,toHome}) =>{\r\n    \r\n    \r\n    const handleCityFromSearchClick = () =>{\r\n        setCitySearch(cityFromSearch.id)\r\n        toHome()\r\n    }\r\n    const handleCityOfUserClick = () =>{\r\n        setCitySearch(cityOfUser.id)\r\n        toHome()\r\n    }\r\n\r\n    return<ModalCard \r\n    onClose={handleClose}\r\n    id={id}>\r\n        <Cell onClick={handleCityFromSearchClick}>\r\n        <div style={{display:'grid',gridTemplateColumns:'140px 28px 1fr'}}>\r\n            <div>\r\n                Город из поиска\r\n            </div>\r\n            <div className='center__x'>\r\n                <Icon28ChevronRightOutline fill='#808080'/>\r\n            </div>      \r\n            <div \r\n            style={{display:'flex',justifyContent:'end'}}>\r\n                <div style={{marginTop:2}} className='center__y'>\r\n                    <Icon16Place fill='#808080' className='mr-1' />\r\n                </div>\r\n                <div className='center__y'>\r\n                {cityFromSearch.name}\r\n                </div>\r\n            </div>     \r\n        </div>\r\n        </Cell>\r\n        <Cell onClick={handleCityOfUserClick}>\r\n        <div style={{display:'grid',gridTemplateColumns:'140px 28px 1fr'}}>\r\n            <div>\r\n                Текущее \r\n                <div>\r\n                местоположение\r\n                </div>\r\n            </div>\r\n            <div className='center__x'>\r\n                <Icon28ChevronRightOutline fill='#808080'/>\r\n            </div>      \r\n            <div \r\n            style={{display:'flex',justifyContent:'end',marginTop:2}}>\r\n                {cityOfUser.name}\r\n            </div>     \r\n        </div>\r\n        </Cell>\r\n    </ModalCard>\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAOCAYAAAAWo42rAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC8SURBVHgBfZAxC8JADIXTq+jkYrcuDoKbP6Czq3/Av9pJV8HJyQ7ipItOCqIg9L2SK2mgDXxHuHt5lySRbuRgBibgCa7xITGiAqxc4QuULEoHRKLOC3ChcArW5vEGKr2ncAQyHnMjOoO95new0TwLWhXj55zbFoI2HGNpvizM/YNTj8HWOfs4Bf2ukuFohE0Cvj0iDviOe6QrN5A7Efvf8T1Ye+kOxjjSjYkV0rV0X7a9p87howV/cBCz1xonDSbmODszXAAAAABJRU5ErkJggg==\"","import { Snackbar } from \"@vkontakte/vkui\"\r\n//@ts-ignore\r\nimport success_img from '../media/score_low.svg'\r\n//@ts-ignore\r\nimport failed_img from '../media/score_high.svg' \r\n\r\n\r\ntype PropsType = {\r\n    resultOperation: boolean,\r\n    text: string,\r\n    closeHandler?: ()=>void\r\n}\r\n\r\nexport const MySnackbar:React.FC<PropsType> = ({text,resultOperation,closeHandler}) =>{\r\n    return<Snackbar\r\n    onClose={closeHandler}\r\n    before={<img src={resultOperation ? success_img : failed_img} />}\r\n    >\r\n        <div \r\n        className={'text__SF-Pro-Rounded-Regular'}\r\n        style={{fontSize:15}}>\r\n            {text}\r\n        </div>\r\n    </Snackbar>\r\n}","export default __webpack_public_path__ + \"static/media/bg_okay.deb781bc.jpg\";","export default __webpack_public_path__ + \"static/media/bg_good.78cdbf75.jpg\";","export default __webpack_public_path__ + \"static/media/bg_bad.fcfcaf41.jpg\";","import { Button, Card, ModalCard } from \"@vkontakte/vkui\"\r\nimport { BackgroundColor } from \"chalk\";\r\nimport React from \"react\"\r\nimport { Icon56NotificationOutline } from '@vkontakte/icons';\r\n\r\n\r\n\r\n\r\ntype PropsType={\r\n    bgApp: string,\r\n    id: string,\r\n    closeHandler: ()=>void,\r\n    subscribeNoticification: ()=>void\r\n}\r\nconst LIGHT_BLUE = '#4475F1'\r\n\r\nexport const TurnNoticifications:React.FC<PropsType>=({id, subscribeNoticification, bgApp, closeHandler})=>{\r\n    return<ModalCard      \r\n    id={id}      \r\n\r\n          onClose={closeHandler}\r\n          icon={<Icon56NotificationOutline fill={LIGHT_BLUE} />}\r\n          header={<div className='text__Inter-Bold'>Включить уведомления?</div>}\r\n          subheader={<div className='text__Inter-Regular'>\r\n              Мы будем уведомлять вас об актуальном качестве воздуха\r\n              раз в неделю, а также:\r\n              <div style={{marginTop:10}}>\r\n                 - Если качество воздуха станет не приемлимым\r\n              </div>\r\n              <div style={{marginTop:5}}>\r\n                 - О резких скачках колличества загрязнителей\r\n              </div>\r\n            </div>}\r\n          actions={\r\n            <Button size=\"l\" mode=\"primary\" onClick={()=>{\r\n                subscribeNoticification()\r\n                closeHandler()\r\n            }} className='text__Inter-Medium'>\r\n              Включить\r\n            </Button>\r\n          }\r\n        />\r\n}","import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport { View, Panel, ScreenSpinner, AdaptivityProvider, AppRoot, ModalRoot, ConfigProvider, usePlatform } from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport { Intro } from './panels/Intro';\r\nimport { Home } from './panels/Home';\r\nimport './App.css'\r\nimport { ForecastPollutionForDay } from './panels/ForecastPollutionForDay';\r\nimport { PollutionCities } from './panels/PollutionCities';\r\nimport { getCityByCoordinate, getEcologyCity, getEcologyCountry, \r\n\tgetEcoSearchData, getSubscribes, subscribeNoticification, unsubscribeNoticification } from './dal/api';\r\nimport { MyCities } from './panels/MyCities';\r\nimport { MyCanvas } from './bricks/MyCanvas';\r\nimport { MySnackbar } from './bricks/MySnackbar';\r\nimport { Layer, Stage, Image, Text, Rect } from \"react-konva\";\r\nimport placePNG from \"./media/place.png\";\r\nimport useImage from 'use-image';\r\nimport bg_okay from './media/bg_okay.jpg'\r\nimport bg_good from './media/bg_good.jpg'\r\nimport bg_bad from './media/bg_bad.jpg'\r\nimport chevron_right from \"./media/chevron_right.png\";\r\nimport { TurnNoticifications } from './panels/TurnNoticifications';\r\n\r\n\r\n\r\nconst ROUTES = {\r\n\tINFO: 'INFO',\r\n\tPOLLUTION_CITIES: 'POLLUTION_CITIES',\r\n\tHOME: 'HOME',\r\n\tFORECAST_POLLUTION_FOR_THE_DAY: 'FORECAST_POLLUTION_FOR_THE_DAY',\r\n\tMY_CITIES: 'MY_CITIES',\r\n\tTURN_NOTICIFICATIONS: 'TURN_NOTICIFICATIONS'\r\n}\r\nconst STATE_KEYS = {\r\n\tIS_CHECK_INFO: 'IS_CHECK_INFO',\r\n\tIS_ALLOWED_PLACE: 'IS_ALLOWED_PLACE',\r\n\tDEFAULT_CITY_ID: 'DEFAULT_CITY_ID',\r\n\tDEFAULT_COUNTRY_NAME:'DEFAULT_COUNTRY_NAME',\r\n\tDEFAULT_COUNTRY_ID: 'DEFAULT_COUNTRY_ID'\r\n}\r\nconst DEFAULT_CITY_ID = '5b163b6f7fa2b15e076ad2a6'\r\nconst DEFAULT_COUNTRY_ID = 'qNvxAidZLbwhRmQXR'\r\nconst DEFAULT_COUNTRY_NAME = 'Россия'\r\n\r\nconst App = () => {\r\n\t\r\n\tconst [isInit, setInit] = useState(false)\r\n\tconst [activePanel, setActivePanel] = useState(ROUTES.HOME);\r\n\tconst [fetchedUser, setUser] = useState(null);\r\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\r\n\tconst [activeModal, setActiveModal] = useState(null)\r\n\tconst [snackbar, setSnackbar] = useState(null)\r\n\tconst [state, setState] = useState({\r\n\t\tisCheckInfo: false,\r\n\t\tisAllowedPlace: false,\r\n\t\tdefaultCityId: DEFAULT_CITY_ID,\r\n\t\tdefaultCountryId: DEFAULT_COUNTRY_ID,\r\n\t\tecoCity: null,\r\n\t\tnativeCity: null,\r\n\t\tsubscribedCities: [],\r\n\t\tdefaultCountryName: DEFAULT_COUNTRY_NAME\r\n\t})\r\n\t\r\n\tconst handlerCloseModal = () => {\r\n\t\tsetActiveModal(null)\r\n\t}\r\n\tconst [platform,setPlatform] = useState('mobile')\r\n\tconst [bgApp,setBgApp] = useState('bg__app__light')\r\n\tuseEffect(async () => {\r\n\t\tbridge.subscribe(({ detail: { type, data } }) => {\r\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\r\n\t\t\t\tconsole.log(data.appearance);\r\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\r\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\r\n\t\t\t\tconst title = new RegExp('light')\r\n\t\t\t\tif((data.scheme==='vkcom') || (data.scheme.match(title))){\r\n\t\t\t\t\tsetBgApp('bg__app__light')\r\n\t\t\t\t\tif(data.scheme==='vkcom'){\r\n\t\t\t\t\t\tsetPlatform('pc')\r\n\t\t\t\t\t}else{\t\r\n\t\t\t\t\t\tsetPlatform('mobile')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"light\", \"action_bar_color\": \"#F5F5F5\"})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsetBgApp('bg__app__dark')\r\n\t\t\t\t\tbridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"dark\", \"action_bar_color\": \"#373737\"})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\r\n\t\t\t}\r\n\t\t});\r\n\t\tasync function fetchData() {\r\n\t\t\tconst res = (await bridge.send('VKWebAppStorageGet', { keys: Object.values(STATE_KEYS) }))\r\n\r\n\t\t\tlet data = res.keys\r\n\t\t\t\tdata.forEach((s) => {\r\n\t\t\t\t\tlet value = s.value ? JSON.parse(s.value) : null\r\n\t\t\t\t\tswitch (s.key) {\r\n\t\t\t\t\t\tcase STATE_KEYS.IS_CHECK_INFO:\r\n\t\t\t\t\t\t\tif (!value) {\r\n\t\t\t\t\t\t\t\tsetActiveModal(ROUTES.INFO)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsetState(prev => {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\tisCheckInfo: true\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase STATE_KEYS.IS_ALLOWED_PLACE:\r\n\t\t\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\t\t\tsetState(prev => {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\tisAllowedPlace: true\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase STATE_KEYS.DEFAULT_COUNTRY_ID:\r\n\t\t\t\t\t\t\tif(value) {\r\n\t\t\t\t\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\t\t\t\t\treturn{\r\n\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\tdefaultCountryId: s.value\r\n\t\t\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase STATE_KEYS.DEFAULT_CITY_ID:\r\n\t\t\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\t\t\tsetState(prev => {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\tdefaultCityId: s.value\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase STATE_KEYS.DEFAULT_COUNTRY_NAME:\r\n\t\t\t\t\t\t\tif(value) {\r\n\t\t\t\t\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\t\t\t\t\treturn{\r\n\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\tdefaultCountryName:s.value\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\t\tfetchData()\r\n\t}, []);\r\n\tconst go = (modal) => {\r\n\t\tsetActiveModal(modal)\r\n\t}\r\n\tconst checkInfo = () => {\r\n\t\ttry {\r\n\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t{\r\n\t\t\t\t\tkey: STATE_KEYS.IS_CHECK_INFO,\r\n\t\t\t\t\tvalue: 'true'\r\n\t\t\t\t})\r\n\t\t\tsetState(prev => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\tisCheckInfo: true\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\thandlerCloseModal()\r\n\t\t} catch (e) {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tuseEffect(async () => {\r\n\t\tif (state.isAllowedPlace) {\r\n\t\t\ttry {\r\n\t\t\t\tsetInit(true)\r\n\t\t\t\tlet { lat, long } = await bridge.send('VKWebAppGetGeodata', { key: 'location' })\r\n\t\t\t\tconst { city } = await getCityByCoordinate( lat, long)\r\n\r\n\t\t\t\tlet id = DEFAULT_CITY_ID\r\n\t\t\t\tlet idCountry = DEFAULT_COUNTRY_ID\r\n\t\t\t\tlet defaultNameCountry = DEFAULT_COUNTRY_NAME\r\n\t\t\t\tlet cityName = city \r\n\t\t\t\tconst data = (await getEcoSearchData(cityName)).data\r\n\t\t\t\tlet currentCity = null\r\n\t\t\t\tdata.cities.forEach(item => {\r\n\t\t\t\t\t\tif (item.name === cityName && (!currentCity)) {\r\n\t\t\t\t\t\t\tid = item.id\r\n\t\t\t\t\t\t\tcurrentCity = item\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\tconst dataCountry = (await getEcoSearchData(currentCity.country)).data\r\n\t\t\t\tdataCountry.countries.forEach(item => {\r\n\t\t\t\t\tif (item.name === currentCity.country) {\r\n\t\t\t\t\t\tidCountry = item.id\r\n\t\t\t\t\t\tdefaultNameCountry = item.name\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: STATE_KEYS.DEFAULT_COUNTRY_NAME,\r\n\t\t\t\t\t\tvalue: defaultNameCountry\r\n\t\t\t\t\t})\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tdefaultCountryId: defaultNameCountry\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: STATE_KEYS.DEFAULT_COUNTRY_ID,\r\n\t\t\t\t\t\tvalue: idCountry\r\n\t\t\t\t\t})\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tdefaultCountryId: idCountry\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: STATE_KEYS.DEFAULT_CITY_ID,\r\n\t\t\t\t\t\tvalue: id\r\n\t\t\t\t\t})\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tdefaultCityId: id\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tnativeCity: currentCity\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tsetInit(false)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: STATE_KEYS.DEFAULT_CITY_ID,\r\n\t\t\t\t\t\tvalue: state.defaultCityId\r\n\t\t\t\t\t})\r\n\t\t\t\tsetInit(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}, [state.isAllowedPlace])\r\n\tuseEffect(async ()=>{\r\n\t\t\r\n\t\tsetInit(true)\r\n\t\tconst data = (await getEcologyCity(state.defaultCityId)).data\r\n\t\tif(data){\r\n\t\t\tsetState(prev=>{\r\n\t\t\t\treturn{\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\tecoCity: data\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tif(!state.nativeCity){\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tnativeCity: data\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetInit(false)\r\n\t}, [state.defaultCityId])\r\n\t\r\n\tconst handlerLocationHashChange = async ()=>{\r\n\t\tif(window.location.hash.slice(1,)){\r\n\t\t\tsetInit(true)\r\n\t\t\tconst data = (await getEcologyCity(window.location.hash.slice(1,))).data\r\n\t\t\tif(data){\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tecoCity: data\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tsetInit(false)\r\n\t\t}\r\n\t}\r\n\tuseEffect(async()=>{\r\n\t\twindow.addEventListener('hashchange',handlerLocationHashChange)\r\n\t\treturn window.removeEventListener('hashchange',handlerLocationHashChange)\r\n\t},[])\r\n\t\r\n\tuseEffect(async()=>{\r\n\t\tconst res = await getSubscribes()\r\n\t\tsetState(prev=>{\r\n\t\t\treturn{\r\n\t\t\t\t...prev,\r\n\t\t\t\tsubscribedCities: [...res]\r\n\t\t\t}\r\n\t\t})\r\n\t}, [])\r\n\r\n\tconst requestPermissionLocation = async () => {\r\n\t\tawait bridge.send('VKWebAppGetGeodata', { key: 'location' })\r\n\t\t\t.then(res => {\r\n\t\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: STATE_KEYS.IS_ALLOWED_PLACE,\r\n\t\t\t\t\t\tvalue: JSON.stringify(true)\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tsetState(prev => {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\tisAllowedPlace: true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t}).catch(e => {\r\n\t\t\t\tsetState(prev => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tisAllowedPlace: true\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\tcheckInfo()\r\n\t}\r\n\r\n\r\n\r\n\tconst handleCloseForMyCities = () =>{\r\n\t\tsetActiveModal(ROUTES.POLLUTION_CITIES)\r\n\t}\r\n\tconst handleOpenMyCities =()=>{\r\n\t\tsetActiveModal(ROUTES.MY_CITIES)\r\n\t}\r\n\r\n\tconst ref = useRef(null)\r\n\tconst refBg = useRef(null)\r\n\t\r\n\tconst doStory=React.useCallback(async ()=>{\r\n\t\t\r\n\r\n\t\ttry{\r\n\t\t\tlet data = {}\r\n\t\t\tif(platform==='pc'){\r\n\t\t\t\tdata = {\r\n\t\t\t\t\tbackground_type:'image',\r\n\t\t\t\t\tblob:refBg.current.toDataURL()\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tdata = {\r\n\t\t\t\t\tbackground_type: 'none'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tawait bridge.send('VKWebAppShowStoryBox',{\r\n\t\t\t\t...data,\r\n\t\t\t\t\"stickers\": [\r\n\t\t\t\t  {\r\n\t\t\t\t\t\"sticker_type\": \"renderable\",\r\n\t\t\t\t\t\"sticker\": {\r\n\t\t\t\t\t  \"can_delete\": false,\r\n\t\t\t\t\t  \"content_type\": \"image\",\r\n\t\t\t\t\t  \"blob\": ref.current.toDataURL(),\r\n\t\t\t\t\t  \"clickable_zones\": [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t  \"action_type\": \"link\",\r\n\t\t\t\t\t\t  \"action\": {\r\n\t\t\t\t\t\t\t\"link\": `https://vk.com/app7991717#${state.ecoCity.id}`,\r\n\t\t\t\t\t\t\t\"tooltip_text_key\": \"tooltip_open_default\"\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  ],\r\n\t\t\t\t\t  \"transform\": {\r\n\t\t\t\t\t\t  \"gravity\": \"center\",\r\n\t\t\t\t\t\t  \"relation_width\": 1\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}\r\n\t\t\t\t  }\r\n\t\t\t\t]\r\n\t\t\t  }).catch(e=>{\r\n\t\t\t\t  setSnackbar(<MySnackbar \r\n\t\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\t\tresultOperation={true} text={'Опубликовать историю не удалось'}/>)\r\n\t\t\t  }).then(res=>{\r\n\t\t\t\tif(res.result){\r\n\t\t\t\t\tsetSnackbar(<MySnackbar \r\n\t\t\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\t\t\tresultOperation={true} text={'История опубликована'}/>)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsetSnackbar(<MySnackbar \r\n\t\t\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\t\t\tresultOperation={false} text={'Опубликовать историю не удалось'}/>)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}catch(e){\r\n\t\t\tsetSnackbar(<MySnackbar \r\n\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\tresultOperation={false} text={'Опубликовать историю не удалось'} />)\r\n\t\t}\r\n\t},[ref, state.ecoCity, refBg])\r\n\tconst closeSnackbarHandler = () =>{\r\n\t\tsetSnackbar(null)\r\n\t}\r\n\t\r\n\tconst subscribeNoticificationForButton=async ()=>{\r\n\t\t\r\n\t\ttry{\r\n\t\tconst res = await bridge.send('VKWebAppAllowNotifications')\r\n\t\t\r\n\t\tif(res.result && state.ecoCity){\r\n\t\t\tawait subscribeNoticification(state.ecoCity.id)\t\t\t\t\r\n\t\t}\r\n\r\n\t\tsetState(prev=>{\r\n\t\t\treturn{\r\n\t\t\t\t...prev,\r\n\t\t\t\tsubscribedCities:[...prev.subscribedCities,{cityId:state.ecoCity.id}]\r\n\t\t\t}\r\n\t\t})\r\n\t\tsetSnackbar(<MySnackbar\r\n\t\t\tcloseHandler={closeSnackbarHandler} \r\n\t\t\tresultOperation={true}\r\n\t\t\ttext={'Уведомления включены'}/>)\r\n\t\t\r\n\t\t}catch(e){\r\n\t\t\tsetSnackbar(<MySnackbar \r\n\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\tresultOperation={false}\r\n\t\t\t\ttext={'Включить уведомления не удалось'}/>)\r\n\t\t}\r\n\r\n\t}\r\n\tconst unsubsubscribeNoticificationForButton = async ()=>{\r\n\t\t\r\n\t\ttry{\r\n\t\tconst res = await bridge.send('VKWebAppDenyNotifications')\r\n\r\n\t\tif(res.result && state.ecoCity){\r\n\t\t\tawait unsubscribeNoticification(state.ecoCity.id)\r\n\t\t}\r\n\r\n\t\tsetState(prev=>{\r\n\t\t\treturn{\r\n\t\t\t\t...prev,\r\n\t\t\t\tsubscribedCities:[...prev.subscribedCities.filter(s=>s.cityId!==state.ecoCity.id)]\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t\tsetSnackbar(<MySnackbar \r\n\t\t\tresultOperation={true}\r\n\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\ttext={'Уведомления выключены'}/>)\r\n\t\t\r\n\t\t}catch(e){\r\n\t\t\tsetSnackbar(<MySnackbar \r\n\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\tresultOperation={false}\r\n\t\t\t\ttext={'Выключить уведомления не удалось'}/>)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tconst modal = (\r\n\t\t<ModalRoot onClose={handlerCloseModal} activeModal={activeModal}>\r\n\t\t\t{<MyCities\r\n\t\t\ttoHome={handlerCloseModal}\r\n\t\t\tcityFromSearch={state.ecoCity}\r\n\t\t\tcityOfUser={state.nativeCity}\r\n\t\t\tsetCitySearch={(cityId)=>setState(prev=>{\r\n\t\t\t\treturn{\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\tdefaultCityId:cityId\r\n\t\t\t\t}\r\n\t\t\t})}\r\n\t\t\thandleClose={handleCloseForMyCities}\r\n\t\t\tid={ROUTES.MY_CITIES}\r\n\t\t\t/>}\r\n\t\t\t<Intro\r\n\t\t\tbgApp={bgApp}\r\n\t\t\t\tcheckInfo={checkInfo}\r\n\t\t\t\trequestPermissionLocation={requestPermissionLocation}\r\n\t\t\t\tid={ROUTES.INFO} handlerClose={handlerCloseModal} />\r\n\t\t\t<ForecastPollutionForDay\r\n\t\t\t\tid={ROUTES.FORECAST_POLLUTION_FOR_THE_DAY}\r\n\t\t\t\thandlerClose={handlerCloseModal}\r\n\t\t\t\tday={3} month={'Ноябрь'} city={'Санкт-Петербург'}\r\n\t\t\t/>\r\n\t\t\t<TurnNoticifications\r\n\t\t\tbgApp={bgApp}\r\n\t\t\tid={ROUTES.TURN_NOTICIFICATIONS}\r\n\t\t\tcloseHandler={handlerCloseModal}\r\n\t\t\tsubscribeNoticification={subscribeNoticificationForButton}\r\n\t\t\t/>\r\n\t\t\t<PollutionCities\r\n\t\t\t\trequestPermissionLocation={requestPermissionLocation}\r\n\t\t\t\tisAllowedPlace={state.isAllowedPlace}\r\n\t\t\t\tbgApp={bgApp}\r\n\t\t\t\tmyCityId={state.nativeCity ? state.nativeCity.id : DEFAULT_CITY_ID}\r\n\t\t\t\tmyCity={state.nativeCity ? state.nativeCity.name : 'Санкт-Петербург' }\r\n\t\t\t\tonClickMyCities = {handleOpenMyCities}\r\n\t\t\t\tsetDefaultCity={(cityId)=>setState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tdefaultCityId:cityId\r\n\t\t\t\t\t}\r\n\t\t\t\t})}\r\n\t\t\t\tcountryName={state.defaultCountryName}\r\n\t\t\t\tcountryId={state.defaultCountryId}\r\n\t\t\t\thandlerClose={handlerCloseModal}\r\n\t\t\t\tid={ROUTES.POLLUTION_CITIES} />\r\n\t\t</ModalRoot>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<AdaptivityProvider>\r\n\t\t\t<AppRoot activePanel={activePanel} popout={popout}>\r\n\t\t\t\t<View activePanel={ROUTES.HOME} modal={modal}>\r\n\t\t\t\t\t<Home\r\n\t\t\t\t\tsnackbar={snackbar}\r\n\t\t\t\t\tsubscribeNoticification={()=>setActiveModal(ROUTES.TURN_NOTICIFICATIONS)}\r\n\t\t\t\t\tunsubsubscribeNoticification={unsubsubscribeNoticificationForButton}\r\n\t\t\t\t\tisCitySubscribed={state.ecoCity ? state.subscribedCities.some(s=>s.cityId===state.ecoCity.id) : false}\r\n\t\t\t\t\tbgApp={bgApp}\r\n\t\t\t\t\tdoStory={doStory}\r\n\t\t\t\t\tnativeCityId={state.nativeCity ? state.nativeCity.id : DEFAULT_CITY_ID}\r\n\t\t\t\t\tisInit={isInit}\r\n\t\t\t\t\t\tgo={go}\r\n\t\t\t\t\t\tcity={state.ecoCity ? state.ecoCity : null}\r\n\t\t\t\t\t\tid={ROUTES.HOME} isGoodWind={\r\n\t\t\t\t\t\t\t(state.ecoCity && state.ecoCity.current) ? (state.ecoCity.current.aqi<=50) : true  \r\n\t\t\t\t\t\t} />\r\n\t\t\t\t\t\r\n\t\t\t\t</View>\r\n\t\t\t</AppRoot>\r\n\t\t\t<div id='canvas' style={{width:0,height:0,opacity:0}}>\r\n\t\t\t<Stage\r\n\t\t\twidth={253}\r\n\t\t\theight={250}\r\n\t\t\tref={refBg}\r\n\t\t\t>\r\n\t\t\t\t<Layer>\r\n\t\t\t\t\t\t<Rect \r\n\t\t\t\t\t\tfillLinearGradientStartPoint={{ x: 0, y: -100 }}\r\n\t\t\t\t\t\twidth={253}\r\n\t\t\t\t\t\theight={250}\r\n\t\t\t\t\t\tfillLinearGradientEndPoint={{ x: 120, y: 220 }}\r\n\t\t\t\t\t\tfillLinearGradientColorStops={[0,'#EBEBEB',1,'#E0E0E0']}\t\t\t\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t</Layer>\r\n\t\t\t</Stage>\r\n\t\t\t<Stage\r\n    ref={ref}\r\n        style={{ width: 253, height: 250, borderRadius: 20 }}\r\n        width={253} height={250}\r\n    >\r\n\r\n        <Layer>\r\n\t\t\t<Rect\r\n\t\t\tfillLinearGradientStartPoint={{ x: 0, y: -100 }}\r\n\t\t\tfillLinearGradientEndPoint={{ x: 120, y: 220 }}\r\n\t\t\tfillLinearGradientColorStops={(state.ecoCity && state.ecoCity.current.aqi>100) ?\r\n\t\t\t\t[0,'rgba(255,153,182,1)',1,'rgba(204,183,254,1)'] \r\n\t\t\t\t: (state.ecoCity && state.ecoCity.current.aqi>50) ? [0,'#FDCFB2',1,'#BF8FF5']\r\n\t\t\t\t: [0,'#B3FF86',1,'#EEFFC8']}\r\n\t\t\twidth={253}\r\n\t\t\theight={250}\r\n\t\t\tcornerRadius={20}\r\n\t\t\t/>\r\n            <Text\r\n                fontFamily={'SF-Pro-Rounded-Heavy'}\r\n                text=\"Качество воздуха:\"\r\n                x={55}\r\n                fontSize={15}\r\n                y={52}\r\n                fill='rgba(0, 0, 0, 0.5)'\r\n                width={150}\r\n                height={30}\r\n            />\r\n            <Text\r\n                fontFamily={'SF-Pro-Rounded-Heavy'}\r\n                text={(state.ecoCity && state.ecoCity.current.aqi > 100) ? \"Плохое\" : (state.ecoCity && state.ecoCity.current.aqi > 50) ? 'Неплохое' : \"Хорошее\"}\r\n                x={(state.ecoCity && state.ecoCity.current.aqi>100) ? 66 : (state.ecoCity && state.ecoCity.current.aqi>50) ? 48 : 53.5 } //53.5\r\n                fontSize={32}\r\n                y={76}\r\n                fill='rgba(0, 0, 0, 0.5)'\r\n                width={(state.ecoCity && state.ecoCity.current.aqi>100) ? 161 : 176}//146\r\n                height={38}\r\n            />\r\n            <Text\r\n                fontFamily={'SF-Pro-Rounded-Regular'}\r\n                text={(state.ecoCity ? state.ecoCity.name : 'SPb')}\r\n                x={(253-(state.ecoCity ? state.ecoCity.name.length*8 : 10))/2}\r\n                fontSize={17}\r\n                y={130}\r\n                fill='rgba(0, 0, 0, 0.5)'\r\n                width={200}\r\n                height={100}\r\n            />\r\n\t\t\t<Rect\r\n\t\t\tx={42}\r\n\t\t\ty={191}\r\n\t\t\twidth={169}\r\n\t\t\tfill={'rgba(255,255,255,0.5)'}\r\n\t\t\theight={39}\r\n\t\t\tcornerRadius={28}\r\n\t\t\t/>\r\n\t\t\t<Text\r\n\t\t\ttext={'Узнать больше'}\r\n\t\t\twidth={200}\r\n\t\t\theight={39}\r\n\t\t\tx={56}\r\n\t\t\tfontSize={18}\r\n\t\t\tfontFamily={'SF-Pro-Rounded-Regular'}\r\n\t\t\tfill='rgba(0, 0, 0, 0.5)'\r\n\t\t\ty={201}\r\n\t\t\t/>\r\n            <PlaceImage x={(253-(state.ecoCity ? state.ecoCity.name.length*8 : 10)-30)/2}/>\r\n\t\t\t<ChevronRight />\r\n\t\t</Layer>\r\n\r\n    </Stage>\r\n\t\t\t</div>\r\n\t\t</AdaptivityProvider>\r\n\t);\r\n}\r\n\r\nconst PlaceImage = ({x}) => {\r\n    const [image] = useImage(placePNG);\r\n    return <Image\r\n        x={x}\r\n        y={130}\r\n        image={image} />;\r\n};\r\n\r\nconst ChevronRight = () =>{\r\n    const [image] = useImage(chevron_right);\r\n    return <Image\r\n        x={188.6}\r\n        y={205.6}\r\n        image={image} />;\r\n}\r\n\r\nconst BgImage = ({aqi}) =>{\r\n\tconst [image] = useImage(aqi>100 ? bg_bad : aqi>50 ? bg_okay : bg_good)\r\n\treturn <Image\r\n\t\timage={image}\r\n\t/>\r\n}\r\n\r\nexport default App;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAALCAYAAACzkJeoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABvSURBVHgBdZAxCoAwDEVTs3TwAI4ODh7Bmzh6Ng/VUXARPICDg4M/8IcoaeCRwvtNSkVEMhjZP6VgADN7AY+XF0X3DygPJQooJ4QBdfstsIEJtOBonMx8mNUJ9uTEwpEmVnCnmrAbNraPhN8V/tALxhgbBZpF7PYAAAAASUVORK5CYII=\"","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport App from \"./App\";\r\n\r\n// Init VK  Mini App\r\nbridge.send(\"VKWebAppInit\");\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\nif (process.env.NODE_ENV === \"development\") {\r\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\r\n}\r\n"],"sourceRoot":""}