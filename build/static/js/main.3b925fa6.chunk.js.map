{"version":3,"sources":["panels/Intro.js","media/IQAir_logo.svg","media/loader.gif","bricks/Loader.tsx","bricks/ListItem.tsx","bricks/Tooltip.tsx","bricks/PollutionItem.tsx","bricks/Badge.tsx","utils/getDayOfWeek.ts","bricks/WeatherItem.tsx","media/mask.svg","media/window.svg","media/score_high.svg","media/score_low.svg","bricks/Advice.tsx","utils/pollutants.ts","dal/api.ts","media/station.svg","bricks/StationItem.tsx","utils/getDistance.ts","panels/Home.tsx","panels/ForecastPollutionForDay.tsx","bricks/PlaceItem.tsx","panels/PollutionCities.tsx","panels/MyCities.tsx","media/place.png","bricks/MySnackbar.tsx","media/bg_okay.jpg","media/bg_good.jpg","media/bg_bad.jpg","panels/TurnNoticifications.tsx","bll/Selectors/initialSelector.ts","App.js","media/chevron_right.png","bll/Reducers/initialReducer.ts","bll/store.ts","utils/initialVkBridge.ts","index.js"],"names":["LIGHT_BLUE","Intro","id","bgApp","handlerClose","checkInfo","requestPermissionLocation","onClose","header","className","Icon","Icon28NarrativeOutline","description","title","Icon28Notifications","Icon28StoryOutline","size","onClick","style","background","before","InfoBlock","fill","Loader","props","src","loader","ListItem","memo","display","color","paddingRight","paddingLeft","children","Tooltip","tooltipDescription","tooltip","padding","margin","PollutionItem","value","bar","aqi","useState","fontSize","max","justifyContent","height","overflow","marginLeft","Badge","getDayOfWeek","day","dayOfWeek","WeatherItem","mode","disabled","after","Advice","isGoodWind","pollution","doStory","score_low","score_high","mask","separator","windows","width","windowSVG","exercice","getFullNamePollutant","toUpperCase","getDescriptionPollutant","instance","axios","create","baseURL","getEcoSearchData","searchQ","post","window","location","search","then","res","data","catch","e","response","getEcologyCity","cityId","target","getCityByCoordinate","lat","long","get","StationItem","stationName","distance","stationPNG","marginRight","overflowX","getDistance","point1","point2","P","Math","PI","latitude","longitude","String","slice","Home","snackbar","city","go","isInit","nativeCityId","isCitySubscribed","subscribeNoticification","unsubsubscribeNoticification","isShowMore","setShowMore","isShowBigImage","setShowBigImage","stations","setStations","useEffect","name","goToForecastPollutionForTheDay","stationsJSX","map","c","index","coordinates","length","pollutantsJSX","current","pollutants","p","pollutantName","concentration","currentDay","Date","getDay","forecastsJSX","forecasts","daily","temperature","paddingTop","flexDirection","position","zIndex","fontWeight","lineHeight","marginTop","opacity","backgroundColor","shadow","recommendations","borderRadius","gridTemplateColumns","gridGap","logo","ForecastPollutionForDay","month","right","settlingHeight","PlaceItem","country","bg","setBG","PollutionCities","countryId","setDefaultCity","countryName","myCity","myCityId","isAllowedPlace","setTitle","cities","setCities","clearestCities","setClearestCitites","isFetching","setFetching","getEcoRankCity","citiesJSX","clearestCitiesJSX","onChange","BgInitClearestCities","items","BgInitCities","MyCities","handleClose","cityFromSearch","cityOfUser","setCitySearch","toHome","MySnackbar","text","resultOperation","closeHandler","success_img","failed_img","TurnNoticifications","icon","subheader","actions","bgAppSelector","state","initial","platformSelector","platform","ROUTES","STATE_KEYS","IS_CHECK_INFO","IS_ALLOWED_PLACE","DEFAULT_CITY_ID","DEFAULT_COUNTRY_NAME","DEFAULT_COUNTRY_ID","PlaceImage","x","useImage","placePNG","image","y","ChevronRight","App","setInit","activePanel","popout","activeModal","setActiveModal","setSnackbar","isCheckInfo","defaultCityId","defaultCountryId","ecoCity","nativeCity","subscribedCities","defaultCountryName","setState","handlerCloseModal","useSelector","fetchData","a","bridge","send","keys","Object","values","forEach","s","JSON","parse","key","prev","idCountry","defaultNameCountry","cityName","currentCity","item","countries","handlerLocationHashChange","hash","stringify","ref","useRef","refBg","React","useCallback","background_type","blob","toDataURL","closeSnackbarHandler","result","subscribeNoticificationForButton","unsubsubscribeNoticificationForButton","delete","filter","modal","onClickMyCities","some","fillLinearGradientStartPoint","fillLinearGradientEndPoint","fillLinearGradientColorStops","cornerRadius","fontFamily","SET_PLATFORM","SET_BG_APP","initialState","setPlatform","type","setBgApp","reducers","combineReducers","action","store","createStore","dispatch","subscribeVkBridge","subscribe","detail","schemeAttribute","document","createAttribute","scheme","RegExp","match","body","attributes","setNamedItem","AppContainer","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.3b925fa6.chunk.js","sourcesContent":["import { Div, Spacing, FixedLayout, Group, ModalPage, PanelHeaderClose, ModalPageHeader, Panel, useAdaptivity, ViewWidth, usePlatform, Button, Cell } from \"@vkontakte/vkui\"\r\nimport React,{ Fragment } from \"react\"\r\nimport './Intro.css'\r\nimport { Icon28NarrativeOutline } from '@vkontakte/icons';\r\nimport { Icon28Notifications } from '@vkontakte/icons';\r\nimport { Icon28StoryOutline } from '@vkontakte/icons';\r\nimport { Icon24LocationOutline } from '@vkontakte/icons';\r\n\r\n\r\nconst LIGHT_BLUE = '#4475F1'\r\n\r\nexport const Intro=({id,bgApp,handlerClose,checkInfo,requestPermissionLocation})=>{\r\n    \r\n    \r\n\r\n    return<ModalPage\r\n    id={id}      \r\n    onClose={handlerClose}\r\n    header={\r\n            <ModalPageHeader\r\n            className={bgApp==='bg__app__light' ? 'modal__app__light' : 'modal__app__dark'}\r\n            ></ModalPageHeader>\r\n    }>\r\n        <div className={bgApp}>\r\n        <Fragment>\r\n            <Group>\r\n                <Div className='center__x text__big'>\r\n                    Добро пожаловать в Purify\r\n                </Div>\r\n                <Div>\r\n                    <InfoBlock \r\n                    Icon={Icon28NarrativeOutline}\r\n                    description={'Просматривайте актуальную статистику и получайте важные советы, чтобы сберечь здоровье. '}\r\n                    title={'Следите за качеством воздуха'} />\r\n                    <InfoBlock \r\n                    Icon={Icon28Notifications}\r\n                    description={'Получайте уведомления, чтобы заранее знать об изменениях в худшую сторону.'}\r\n                    title={'Будьте в курсе'}\r\n                    />\r\n                    <InfoBlock \r\n                    Icon={Icon28StoryOutline}\r\n                    description={'Информируйте их в критических ситуациях через истории ВКонтакте.'}\r\n                    title={'Сообщайте близким'}\r\n                    />\r\n                </Div>\r\n            </Group>\r\n            <Div\r\n            className='center__x'\r\n            >\r\n                <Button  \r\n                size='l'\r\n                onClick={requestPermissionLocation}\r\n                className='intro__button__location'\r\n                style={{background:LIGHT_BLUE}}\r\n                before={<Icon24LocationOutline/>}>\r\n                  Разрешить доступ к местоположению  \r\n                </Button>\r\n            </Div>\r\n            <Div\r\n            onClick={()=>{\r\n                checkInfo()\r\n            }}\r\n            className='w-100 highlight_on_touch center__x text__gray'\r\n            >\r\n                Пропустить\r\n            </Div>\r\n            <Spacing size={32}/>\r\n        </Fragment>\r\n        </div>\r\n    </ModalPage>\r\n}\r\n\r\nexport const InfoBlock=({description, title, Icon})=>{\r\n    return<Div className='intro__info'>\r\n    <div className='center__y'>\r\n        <Icon fill={LIGHT_BLUE}/>\r\n    </div>\r\n    <Div>\r\n        <div>\r\n            <strong>{title}</strong>\r\n        </div>\r\n        <div className='text__gray'>\r\n            {description}\r\n        </div>\r\n    </Div>\r\n</Div>\r\n}","export default __webpack_public_path__ + \"static/media/IQAir_logo.60893679.svg\";","export default __webpack_public_path__ + \"static/media/loader.4eb6b9ea.gif\";","//@ts-ignore\r\nimport loader from \"../media/loader.gif\";\r\n\r\ntype PropsType={}\r\n\r\nexport const Loader:React.FC<PropsType>=(props)=>{\r\n    return<img className='w-100' src={loader} />\r\n}","import { ElementType, JSXElementConstructor, memo, ReactElement } from \"react\"\r\n\r\n\r\n\r\ntype PropsType={\r\n    description: string | ReactElement<any, any>,\r\n    className?: string,\r\n    bgApp: string,\r\n    onClick?: ()=>void\r\n}\r\n\r\n\r\nexport const ListItem:React.FC<PropsType> = memo(({ description, onClick, className, bgApp, ...props }) => {\r\n    return <div className=''\r\n        onClick = {onClick ? onClick : ()=>{}} \r\n        style={{ display: 'flex', color: (bgApp==='bg__app__light' ? '#454545' : 'white') }}>\r\n        <div className={className ? className :'center__y'}\r\n        style={{paddingRight: 16, paddingLeft:8}}\r\n        >\r\n            {props.children}\r\n        </div>\r\n        <div className='center__y'> \r\n            {description}\r\n        </div>\r\n    </div>\r\n})","\r\nimport './Tooltip.css'\r\n\r\n\r\n\r\ntype PropsType={\r\n    tooltipDescription: string\r\n}\r\n\r\nexport const Tooltip:React.FC<PropsType> = ({tooltipDescription,children}) =>{\r\n    //@ts-ignore\r\n    return<div tooltip={tooltipDescription} tooltip-position={'bottom'}\r\n    style={{padding:0,margin:0}}>\r\n        {children}\r\n    </div>\r\n}","import { Icon20Info } from \"@vkontakte/icons\"\r\nimport {Tooltip} from './Tooltip'\r\nimport React, { memo, useState } from \"react\"\r\n\r\n\r\n\r\ntype PropsType = {\r\n    title: string,\r\n    value: number,\r\n    tooltipDescription: string,\r\n    bar: string,\r\n    aqi?: number,\r\n    bgApp: string\r\n}\r\n\r\nexport const PollutionItem: React.FC<PropsType> = memo(({ title, value, tooltipDescription, bar, aqi, bgApp }) => {\r\n\r\n    let [show, setShow] = useState(false)\r\n\r\n\r\n    const showTooltip = () => {\r\n        setShow(true)\r\n        setTimeout(() => {\r\n            setShow(false)\r\n        }, 4000)\r\n    }\r\n\r\n    return <div\r\n        style={{paddingRight:4,paddingLeft:4, color:bgApp==='bg__app__light' ? '#454545' : 'white'}}\r\n        className='w-100 pollution__item'>\r\n        <div style={{fontSize:16}} >\r\n            {title}\r\n        </div>\r\n        <div className='center__y'>\r\n            <progress className={bar} value={aqi ? aqi : value } max={100}/>\r\n        </div>\r\n        <div style={{ display: 'flex', justifyContent: 'end'}}>\r\n            <div className='text__gray' style={{fontSize:14,height:20,overflow:'hidden'}}>\r\n                {value}  μm<sup>3</sup>\r\n            </div>\r\n            <div style={{marginLeft:3}}>\r\n                <Tooltip tooltipDescription={tooltipDescription}>\r\n                    <Icon20Info fill='#C1C1C1' />\r\n                </Tooltip>\r\n            </div>\r\n        </div>\r\n    </div>\r\n})\r\n","import React, { memo } from \"react\";\r\n\r\n\r\ntype PropsType={\r\n    value: any,\r\n    color: string,\r\n    style?: any\r\n}\r\n\r\nexport const Badge:React.FC<PropsType> = memo(({value,color,style}) =>{\r\n\r\n    return<span {...style} className={'badge' + ' ' + color } >\r\n        {value}\r\n    </span>\r\n})","\r\n\r\n\r\nexport const getDayOfWeek=(day:number):string=>{\r\n    const week = [\r\n        'Понедельник',\r\n        'Вторник',\r\n        'Среда',\r\n        'Четверг',\r\n        'Пятница',\r\n        'Суббота',\r\n        'Воскресенье'\r\n    ]\r\n    let dayOfWeek = day\r\n    while (dayOfWeek>7){\r\n        dayOfWeek = dayOfWeek -7\r\n    }\r\n        \r\n    return week[dayOfWeek-1]\r\n}","import { Icon24ChevronCompactRight, Icon24ErrorCircle } from \"@vkontakte/icons\"\r\nimport { Cell } from \"@vkontakte/vkui\"\r\nimport React, { memo } from \"react\"\r\nimport {Badge} from './Badge'\r\nimport {getDayOfWeek} from '../utils/getDayOfWeek'\r\n\r\n\r\ntype PropsType={\r\n    day: number,\r\n    value: any,\r\n    mode: 'danger' | 'okay' | 'good',\r\n    onClick: ()=>void\r\n}\r\n\r\nexport const WeatherItem:React.FC<PropsType>=memo(({day, value, mode, onClick})=>{\r\n    const color='bg__'+mode\r\n    return<div style={{fontSize:16, color:'#454545'}} className='w-100'>\r\n        <Cell\r\n        disabled={true}\r\n        after={<div>\r\n        <Badge value={value}  color={color} />\r\n        {/*<Icon24ChevronCompactRight fill='#C1C1C1' />*/}\r\n        </div>\r\n        }\r\n        before={mode==='danger' && <Icon24ErrorCircle fill={'#EF462F'}/>} >\r\n        <div>\r\n            <div className='center__y'>\r\n            {getDayOfWeek(day)}\r\n            </div>\r\n        </div>\r\n        </Cell>\r\n    </div>\r\n})","export default __webpack_public_path__ + \"static/media/mask.ca4eeaf1.svg\";","export default __webpack_public_path__ + \"static/media/window.a4f0a59c.svg\";","export default __webpack_public_path__ + \"static/media/score_high.8b2dd071.svg\";","export default __webpack_public_path__ + \"static/media/score_low.272815f5.svg\";","import { Card, Spacing } from \"@vkontakte/vkui\";\r\nimport React from \"react\";\r\n//@ts-ignore\r\nimport mask from '../media/mask.svg'\r\n//@ts-ignore\r\nimport windowSVG from '../media/window.svg'\r\n//@ts-ignore\r\nimport score_high from '../media/score_high.svg'\r\n//@ts-ignore\r\nimport score_low from '../media/score_low.svg'\r\nimport { ListItem } from \"./ListItem\";\r\nimport { Icon28LikeOutline, Icon28StoryOutline } from \"@vkontakte/icons\";\r\n\r\n\r\n\r\ntype PropsType = {\r\n    pollution: {\r\n        exercice: {\r\n            value: string;\r\n            text: string;\r\n        };\r\n        windows: {\r\n            value: string;\r\n            text: string;\r\n        };\r\n        mask: {\r\n            value: string;\r\n        };\r\n        air_purifier: {\r\n            value: string;\r\n        };\r\n    };\r\n    isGoodWind: boolean,\r\n    bgApp: string,\r\n    doStory: ()=>void\r\n};\r\n\r\nconst LIGHT_BLUE = '#4475F1'\r\n\r\nexport const Advice:React.FC<PropsType> = ({isGoodWind,pollution,bgApp, doStory}) =>{\r\n    return<Card\r\n    mode=\"shadow\"\r\n    className='card__app'>\r\n       <div>\r\n\r\n           <ListItem bgApp={bgApp} description={isGoodWind ? 'Качество воздуха хорошее и соответствует требованиям ООН. Наслаждайтесь.' : <span>Качество воздуха плохое и превышает требования ООН.</span>}>\r\n               {isGoodWind ? <img src={score_low} /> : <img src={score_high} />}\r\n           </ListItem>\r\n           {(pollution.mask.value!=='green' && pollution.mask.value!=='hidden') && <><Spacing className=\"spacing\" size={32} separator />\r\n            <ListItem bgApp={bgApp} description={'Носите маску на улице.'}>\r\n               <img src={mask} />\r\n           </ListItem></>}\r\n           {pollution.windows.value!=='hidden' && <><Spacing size={32} separator className=\"spacing\" />\r\n            <ListItem bgApp={bgApp} description={pollution.windows.value!=='green' ? 'Закройте окна.' : 'Откройте окна и проветрите помещение свежим воздухом.'}>\r\n               <div style={{width:28}} className='center__x'>\r\n               <img src={windowSVG} />\r\n               </div>\r\n           </ListItem></>}\r\n           {(pollution.exercice.value!=='hidden') && <><Spacing size={32} separator />\r\n           <ListItem bgApp={bgApp} description={pollution.exercice.value!=='green' ? 'Избегайте нагрузок на улице.' : 'Хорошее время для тренировки.'}>\r\n               <Icon28LikeOutline fill={LIGHT_BLUE} />\r\n           </ListItem></>}\r\n           <Spacing size={32} separator className=\"spacing\" />\r\n           <ListItem\r\n           onClick={doStory}\r\n           bgApp={bgApp} description={<div style={{color:LIGHT_BLUE}}><div>Сообщите друзьям и близким</div><div>Поделитесь историей</div></div>}>\r\n                <Icon28StoryOutline fill={LIGHT_BLUE} />\r\n            </ListItem>\r\n\r\n       </div>\r\n</Card>\r\n}","\r\n\r\n\r\n\r\nexport const getFullNamePollutant=(title:string)=>{\r\n    switch (title) {\r\n        case 'pm25':\r\n            return 'PM2.5'\r\n        case 'pm10':\r\n            return 'PM10'\r\n        case 'o3':\r\n            return 'O3'\r\n        case 'no2':\r\n            return 'NO2'\r\n        case 'so2':\r\n            return 'SO2'\r\n        case 'co':\r\n            return 'CO'\r\n        default:\r\n            return title.toUpperCase()\r\n    }\r\n}\r\nexport const getDescriptionPollutant=(title:string)=>{\r\n    switch (title) {\r\n        case 'pm25':\r\n            return 'Крошечные частицы (<2.5 μm) в воздухе, которые, при вдыхании, попадают напрямую в кровь.'\r\n        case 'pm10':\r\n            return 'Крошечные частицы (<10 μm) в воздухе, которые, при вдыхании, попадают напрямую в кровь.'\r\n        case 'o3':\r\n            return 'Озон — токсичный и канцерогенный газ, влияющий на органы дыхания.'\r\n        case 'no2':\r\n            return 'Оксид азота — особо токсичен, раздражает дыхательные пути и уменьшает содержание гемоглобина в крови.'\r\n        case 'so2':\r\n            return 'Оксид серы — при длительном воздействии может нанести непоправимый вред лёгким.'\r\n        case 'co':\r\n            return 'Монооксид углерода — не имеет запаха и цвета. Симптомы отравления включают слабость, головную боль, тошноту и др.'\r\n        default:\r\n            return 'Еще нет подходящего описания для этого элемента.'\r\n    }\r\n}","import axios from \"axios\";\r\nimport { EcoCityData, EcoCityRank, EcoSearchData, UserEcoSubs } from \"../types/EcoTypes\";\r\n\r\n\r\nconst instance = axios.create({\r\n    baseURL:'https://vk-showtime.herokuapp.com/api/ecology/'\r\n})\r\n\r\nexport const getEcoSearchData = (searchQ?:string) =>{\r\n    return instance.post<{data:EcoSearchData}>(`search${window.location.search}`,{\r\n        searchQ\r\n    }).then(res=>res.data)\r\n    .catch(e=>e.response.data)\r\n}\r\nexport const getEcologyCity = (cityId:string) =>{\r\n    return instance.post<{data:EcoCityData} | null>(`eco-info${window.location.search}`,{\r\n        id: cityId,\r\n        target: 'city'\r\n    }).then(res=>res.data)\r\n    .catch(e=>e.response.data)\r\n}\r\nexport const getEcologyCountry = (countryId:string) =>{\r\n    return instance.post<{data:EcoCityData} | null>(`eco-info${window.location.search}`,{\r\n        id: countryId,\r\n        target: 'country'\r\n    }).then(res=>res.data)\r\n    .catch(e=>e.response.data)\r\n}\r\nexport type CityCoordinateType={\r\n    city: string,\r\n    countryName: string\r\n}\r\nexport const getCityByCoordinate = (lat:number, long:number) =>{\r\n    return axios.get<CityCoordinateType>(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${long}&localityLanguage=ru`)\r\n    .then(res=>res.data)\r\n    .catch(e=>e.response.data)\r\n}\r\nexport const getEcoRankCity = (countryId: string) =>{\r\n    return instance.post<EcoCityRank>(`rank${window.location.search}`,{\r\n        id: countryId\r\n    })\r\n    .then(res=>res.data)\r\n    .catch(e=>e.response.data)\r\n}\r\nexport const subscribeNoticification=(cityId:string)=>{\r\n    return instance.post(`subscribe${window.location.search}`,{id:cityId})\r\n}\r\nexport const unsubscribeNoticification=(cityId:string)=>{\r\n    return instance.delete(`subscribe${window.location.search}`,\r\n    {data:{id:cityId}})\r\n}\r\nexport const getSubscribes=()=>{\r\n    return instance.get<{data:UserEcoSubs[]}>(`subscribe${window.location.search}`)\r\n    .then(res=>res.data.data)\r\n}\r\n","export default __webpack_public_path__ + \"static/media/station.933949ec.svg\";","import { Icon24ChevronCompactRight, Icon24ErrorCircle } from \"@vkontakte/icons\"\r\nimport { Cell } from \"@vkontakte/vkui\"\r\nimport React, { memo } from \"react\"\r\nimport {Badge} from './Badge'\r\n//@ts-ignore\r\nimport stationPNG from '../media/station.svg'\r\nimport { Icon12ErrorCircle } from '@vkontakte/icons';\r\n\r\n\r\ntype PropsType={\r\n    stationName: string,\r\n    value: any,\r\n    mode: 'danger' | 'okay' | 'good',\r\n    onClick?: ()=>void,\r\n    distance: number\r\n}\r\n\r\nexport const StationItem:React.FC<PropsType>=memo(({value, mode, stationName, distance})=>{\r\n    const color='bg__'+mode\r\n    return<div style={{fontSize:16, color:'#454545'}} className='w-100'>\r\n        <Cell\r\n        disabled={true}\r\n        after={<div>\r\n        <Badge value={value}  color={color} />\r\n        {/*<Icon24ChevronCompactRight fill='#C1C1C1' />*/}\r\n        </div>\r\n        }>\r\n        <div className='d-flex'>\r\n            <div className='center__y'>\r\n                <img src={stationPNG} style={{marginRight:16}} />\r\n            </div>\r\n            <div>\r\n            <div style={{fontSize:16,width:200,overflowX:'scroll'}}>\r\n                {stationName}\r\n            </div>\r\n            <div className=\"text__gray\">\r\n                \r\n                {distance>10 && <div\r\n                className='d-flex'><div style={{height:18,marginRight:5}} className='center__y'>\r\n                    <Icon12ErrorCircle fill='C1C1C1'/>\r\n                </div><div \r\n                className='center__y'\r\n                style={{fontSize:15,height:18}}>Может быть неточной</div></div>}\r\n            </div>\r\n            </div>\r\n        </div>\r\n        </Cell>\r\n    </div>\r\n})","\r\n\r\n\r\n\r\ntype GetDistanceType = {\r\n    point1:{\r\n        latitude:number,\r\n        longitude:number\r\n    },\r\n    point2:{\r\n        latitude:number,\r\n        longitude:number\r\n    }\r\n}\r\n\r\nexport const getDistance = ({point1,point2}:GetDistanceType):number =>{\r\n\r\n    const RADIUS_EARTH = 6371\r\n    const P = Math.PI\r\n    \r\n    const distance = (((((point1.latitude-point2.latitude)**2) + ((point2.longitude-point2.longitude)**2))**0.5)/180)*P*RADIUS_EARTH \r\n\r\n    return (+(String(distance).slice(0,3)))\r\n\r\n}","import { CardGrid, Group, Panel, Div, Avatar, Card, Cell, Spacing, Header, Progress, Link, Footer, FixedLayout } from \"@vkontakte/vkui\"\r\nimport React, { ReactElement, useEffect,useRef,useState} from \"react\"\r\nimport './Home.css'\r\nimport { Icon16Place, Icon24Search } from '@vkontakte/icons';\r\nimport { Icon28Notifications } from '@vkontakte/icons';\r\nimport { Icon28StoryOutline } from '@vkontakte/icons';\r\n//@ts-ignore\r\nimport logo from '../media/IQAir_logo.svg'\r\nimport { Icon24Dropdown } from '@vkontakte/icons';\r\nimport { Loader } from '../bricks/Loader'\r\nimport {ListItem} from '../bricks/ListItem'\r\nimport {PollutionItem} from '../bricks/PollutionItem'\r\nimport { WeatherItem } from \"../bricks/WeatherItem\";\r\nimport { Advice } from \"../bricks/Advice\";\r\nimport { EcoCityData, EcoCityType, EcoSearchData, EcoStation } from \"../types/EcoTypes\";\r\nimport { getDescriptionPollutant, getFullNamePollutant } from \"../utils/pollutants\";\r\nimport { getEcoSearchData } from \"../dal/api\";\r\nimport { StationItem } from \"../bricks/StationItem\";\r\nimport { getDistance } from \"../utils/getDistance\";\r\n\r\n\r\n\r\nconst LIGHT_BLUE = '#4475F1'\r\ntype PropsType={\r\n    id: string,\r\n    isGoodWind: boolean,\r\n    city: EcoCityData | null,\r\n    nativeCityId: string,\r\n    go:(modal:string)=>void,\r\n    isInit: boolean,\r\n    bgApp: string,\r\n    subscribeNoticification: ()=>void,\r\n\tunsubsubscribeNoticification: ()=>void,\r\n\tisCitySubscribed: boolean,\r\n    snackbar: ReactElement<any,any> | null,\r\n    doStory: ()=>void\r\n}\r\n\r\n\r\nexport const Home:React.FC<PropsType> = ({ id, snackbar, bgApp, isGoodWind, city, go, isInit, nativeCityId, isCitySubscribed, subscribeNoticification, unsubsubscribeNoticification, doStory }) => {\r\n\r\n    const [isShowMore,setShowMore] = useState(false)\r\n    const [isShowBigImage, setShowBigImage] = useState(false)\r\n    const [stations,setStations] = useState<EcoStation[]>([])\r\n\r\n    useEffect(()=>{\r\n        if(city){\r\n            getEcoSearchData(city.name).then((res:{data:EcoSearchData})=>{\r\n                if(res.data){\r\n                    setStations(res.data.stations)\r\n                }\r\n            })\r\n            setShowMore(false)    \r\n        }\r\n        return()=>{\r\n            setShowMore(false)\r\n        }\r\n    },[city])\r\n\r\n\r\n    const handlerOpenImage=()=>{\r\n        setShowBigImage(true)\r\n    }\r\n    const handlerCloseImage=()=>{\r\n        setShowBigImage(false)\r\n    }\r\n    const goToForecastPollutionForTheDay=()=>{\r\n        go('FORECAST_POLLUTION_FOR_THE_DAY')\r\n    }\r\n    \r\n    const stationsJSX = city ? stations.map((c,index)=><>\r\n    <StationItem \r\n    distance={getDistance({point1:c.coordinates,point2:city.coordinates})}\r\n    stationName={c.name}\r\n    key={`${index}${c.name}`}\r\n    value={c.aqi} mode={c.aqi > 100 ? 'danger' : ((c.aqi>50) ? 'okay' : 'good')} />\r\n    {(index+1)!==stations.length && <Spacing className=\"spacing\" separator size={16} />}\r\n</>) : []\r\n\r\n    const pollutantsJSX = city ? city.current.pollutants.map((p,index)=><>\r\n    <PollutionItem\r\n    bgApp={bgApp}\r\n    key={`${index}${p.pollutantName}`}\r\n    title={getFullNamePollutant(p.pollutantName)}\r\n    value={p.concentration}\r\n    aqi={p.aqi}\r\n    tooltipDescription={getDescriptionPollutant(p.pollutantName)}\r\n    bar={p.aqi>100 ? 'bad_bar' : p.aqi>50 ? 'okay_bar' : 'good_bar'}\r\n    /> \r\n    {(index+1)!==city.current.pollutants.length && <Spacing \r\n    className=\"spacing\"\r\n    separator size={32} />}\r\n    </>) : []\r\n\r\n    const currentDay = (new Date()).getDay()\r\n    const forecastsJSX = city ? city.forecasts.daily.map((c,index)=><>\r\n        <WeatherItem \r\n        key={`${index}-${c.temperature}${c.aqi}`}\r\n        onClick={goToForecastPollutionForTheDay}\r\n        day={currentDay+index+1} value={c.aqi} mode={c.aqi > 100 ? 'danger' : ((c.aqi>50) ? 'okay' : 'good')} />\r\n        {(index+1)!==city.forecasts.daily.length && <Spacing className=\"spacing\" separator size={16} />}\r\n    </>) : []\r\n\r\n    return <Panel id={id}>\r\n        <Group\r\n        style={{paddingTop:42}}\r\n        className={bgApp}>\r\n            {isShowBigImage && \r\n            <div \r\n            onClick={handlerCloseImage}\r\n            style={{\r\n                display:'flex',\r\n                justifyContent:'center',\r\n                flexDirection:'column',\r\n                position:'fixed',\r\n                zIndex:1000,\r\n                width:'100%',\r\n                height:'100%'\r\n                }}>\r\n                <Loader />\r\n            </div>\r\n            }\r\n            <Div\r\n                className={(isInit ? 'bg__init card' : 'card' + ' ' + ((city && city.current.aqi<=50) ? 'home__good__weather' : (city && city.current.aqi<=100) ? 'home__okay__weather' : 'home__bad__weather'))}>\r\n                <div className='home__main__title'>\r\n                    {isInit ?  <div\r\n                    style={{height:24,width:61}}\r\n                    className='bg__init__home'></div> : <div\r\n                    style={{fontSize:24,fontWeight:'inherit',lineHeight:2.2,color:'rgba(0,0,0,0.5)'}}\r\n                    className='text__SF-Pro-Rounded-Semibold'>{city && city.current.aqi} AQI</div>}\r\n                </div>\r\n                <div className='center__x text__Inter-Medium' style={{color:'rgba(0,0,0,0.5)'}}>\r\n                    {isInit && <div \r\n                    style={{height:16, width:97, marginTop:10}}\r\n                    className='bg__init__home'></div> }\r\n                    <div \r\n                    style={{fontSize:17}}\r\n                    className='center__y'>\r\n                    {(city && nativeCityId!==city.id && (!isInit)) && <Icon16Place fill='rgba(0,0,0,0.5)' style={{marginRight:3}} />}\r\n                    </div>\r\n                    {((!isInit) && city) && city.name}\r\n                </div>\r\n                <div\r\n                    className='mt-4 home__main__bottom__side'>\r\n                    <div>\r\n                        <div \r\n                        className='home__search__cell__rounded home__search__cell__rounded_active'\r\n                        onClick={()=>go('POLLUTION_CITIES')}\r\n                        style={{opacity:0.5}}>\r\n                        <Avatar \r\n                        style={{backgroundColor:'rgba(255, 255, 255, 0.35)'}}\r\n                        shadow={false}>\r\n                            {(!isInit) && <Icon24Search  fill='#000' />}\r\n                        </Avatar>\r\n                        </div>\r\n                    </div>\r\n                    <div\r\n                        className='home__main__bottom__right__side'>\r\n                        <div \r\n                        style={{opacity:0.5}}\r\n                        onClick={city ? (isCitySubscribed ? unsubsubscribeNoticification : subscribeNoticification) : ()=>{}}\r\n                        className='home__search__cell__rounded home__search__cell__rounded_active'>\r\n                        \r\n                        <Avatar \r\n                        style={{backgroundColor:'rgba(255, 255, 255, 0.35)'}}\r\n                        shadow={false}>\r\n                            {(!isInit) && <Icon28Notifications fill='#000' />}\r\n                        </Avatar>\r\n                        </div>\r\n                        <div\r\n                        className='ml-1' \r\n                        style={{opacity:0.5}}\r\n                        onClick={city ? doStory : ()=>{}}\r\n                        >\r\n                        <Avatar\r\n                        className='home__search__cell__rounded home__search__cell__rounded_active' \r\n                        style={{backgroundColor:'rgba(255, 255, 255, 0.35)'}}\r\n                        shadow={false}>\r\n                            {(!isInit) && <Icon28StoryOutline fill='#000' />}\r\n                        </Avatar>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </Div>\r\n            <Div>\r\n                {(city && (!isInit)) && <Advice\r\n                bgApp={bgApp}\r\n                doStory={doStory}\r\n                pollution={city.recommendations.pollution}\r\n                isGoodWind={isGoodWind}\r\n                />}\r\n                {isInit && <Card \r\n                className='card__app'\r\n                mode='shadow'>\r\n                    <div className='d-flex'>\r\n                        <div \r\n                        className='bg__init'\r\n                        style={{height:24,width:24,borderRadius:20000}}>\r\n                        </div>\r\n                        <div className='bg__init ml-2'\r\n                        style={{height:17,width:122}}>\r\n                        </div>\r\n                    </div>\r\n                </Card>}\r\n            </Div>  \r\n            <Div>\r\n                <Header className='text__SF-Pro-Rounded-Semibold'>\r\n                    {(!isInit) ? <span className=\"text__gray\">\r\n                    ЗАГРЯЗНИТЕЛИ\r\n                    </span> : <div\r\n                    style={{height:12, width:85}}\r\n                    className='bg__init'>\r\n                    </div>}    \r\n                </Header>\r\n                <Card \r\n                mode='shadow'\r\n                className='card__app'\r\n                >\r\n                    <div\r\n                    className='card__app'>\r\n                    {(isInit) && [3,2,1,0].map((c)=><><div\r\n                    key={`pollutant${c}`}\r\n                    style={{display:'grid',gridTemplateColumns:'1fr 50px'}}>\r\n                        <div \r\n                        style={{width:91,height:17}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                        <div style={{width:24,height:24,display:'flex',justifyContent:'end'}}\r\n                        className='bg__init'>\r\n                        </div></div>\r\n                        {c!==0 && <Spacing separator size={32}/>}</>)} \r\n                    {(!isInit) && [...pollutantsJSX].slice(0,4)}\r\n                    {((!isShowMore) && (pollutantsJSX.length>4)) && <Cell onClick={()=>setShowMore(true)}><ListItem bgApp={bgApp} description={<Link>Показать все</Link>}>\r\n                        <Icon24Dropdown fill={LIGHT_BLUE}/>\r\n                    </ListItem></Cell>}\r\n                    {(isShowMore && (!isInit)) && <>{[...pollutantsJSX].slice(4,6)}</>}\r\n                    </div>\r\n                </Card> \r\n            </Div>\r\n            <Div>\r\n                <Header className='text__SF-Pro-Rounded-Semibold'>\r\n                    {(!isInit) ? <span className='text__gray'>\r\n                        ПРОГНОЗ НА НЕДЕЛЮ\r\n                    </span> : <div\r\n                    style={{height:12, width:85}}\r\n                    className='bg__init'>\r\n                    </div>}\r\n                </Header>\r\n                <Card  \r\n                mode='shadow'\r\n                className='card__app'>\r\n                    <div className=''>\r\n                    {(isInit) && [5,6,7,8,9,4,10].map((c)=><><div \r\n                    key={`weather${c}`}\r\n                    style={{display:'grid',gridTemplateColumns:'24px 1fr 50px', gridGap:'10px'}}>\r\n                        <div \r\n                        style={{width:24,height:24}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                        <div \r\n                        style={{width:91,height:17}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                        <div style={{width:52,height:24,display:'flex',justifyContent:'end'}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                    </div>{c!==10 && <Spacing separator size={16} />}</>)}\r\n                        {(!isInit) && forecastsJSX}\r\n                    </div>\r\n                </Card>\r\n            </Div>\r\n            {stations.length!==0 && <Div>\r\n                <Header className='text__SF-Pro-Rounded-Semibold'>\r\n                    {(!isInit) ? <span className='text__gray'>\r\n                        Станции\r\n                    </span> : <div\r\n                    style={{height:12, width:85}}\r\n                    className='bg__init'>\r\n                    </div>}\r\n                </Header>\r\n                <Card  \r\n                mode='shadow'\r\n                className='card__app'>\r\n                    <div className=''>\r\n                    {(isInit) && [5,6,7,8,9,4,10].map((c)=><><div \r\n                    key={`station${c}`}\r\n                    style={{display:'grid',gridTemplateColumns:'24px 1fr 50px', gridGap:'10px'}}>\r\n                        <div \r\n                        style={{width:24,height:24}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                        <div \r\n                        style={{width:91,height:17}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                        <div style={{width:52,height:24,display:'flex',justifyContent:'end'}}\r\n                        className='bg__init'>\r\n                        </div>\r\n                    </div>{c!==10 && <Spacing separator size={16} />}</>)}\r\n                        {(!isInit) && stationsJSX}\r\n                    </div>\r\n                </Card>\r\n            </Div>}\r\n            {/*<Div>\r\n                <Header>\r\n                    <span className='text__gray'>\r\n                        ИНТЕРАКТИВНАЯ КАРТА\r\n                    </span>\r\n                </Header>\r\n                <Card mode='outline'>\r\n                    <Loader />\r\n                    <div className='home__map__bottom'>\r\n                    <div \r\n                    onClick={handlerOpenImage}\r\n                    className='home__map__button home__map__button_active'>\r\n                        <Icon24Fullscreen/>\r\n                        <div className='ml-1'>Открыть</div>\r\n                    </div>\r\n                    </div>\r\n                </Card>\r\n            </Div>*/}\r\n            <Footer style={{paddingTop:4,paddingLeft:4}}>\r\n                <Div className='text__SF-Pro-Rounded-Semibold'>\r\n                Информация предоставлена\r\n                </Div>\r\n                <Div className=\"\">\r\n                    <img src={logo} />\r\n                </Div>\r\n            </Footer>\r\n            <FixedLayout>\r\n                {snackbar}\r\n            </FixedLayout>\r\n        </Group>\r\n    </Panel>\r\n}\r\n\r\n\r\n\r\n","\r\nimport React, { Fragment } from 'react'\r\nimport { Card, Div, Group, Header, ModalPage, ModalPageHeader, PanelHeaderButton, Spacing } from '@vkontakte/vkui'\r\nimport { Icon24Dismiss } from '@vkontakte/icons'\r\nimport { Icon16Place } from '@vkontakte/icons';\r\nimport { Icon16ClockOutline } from '@vkontakte/icons';\r\nimport { Icon24Message } from '@vkontakte/icons';\r\nimport { PollutionItem } from '../bricks/PollutionItem';\r\n\r\n\r\ntype PropsType = {\r\n    id: string,\r\n    day: number,\r\n    month: string,\r\n    city: string,\r\n    isGoodWind: boolean,\r\n    handlerClose: () => void\r\n}\r\n\r\n\r\nexport const ForecastPollutionForDay: React.FC<PropsType> = ({ day, month, city, id, handlerClose, isGoodWind }) => {\r\n    return <ModalPage\r\n        onClose={handlerClose}\r\n        header={<ModalPageHeader\r\n            right={<PanelHeaderButton onClick={handlerClose}><Icon24Dismiss /></PanelHeaderButton>}></ModalPageHeader>}\r\n        settlingHeight={100} id={id} >\r\n        <Fragment>\r\n            <Group>\r\n                <Div className='w-100 text__dark_gray'>\r\n                    <h3 className='center__x'>\r\n                        6 AQI\r\n                    </h3>\r\n                    <div className='center__x'>\r\n                        <div className='d-flex'>\r\n                            <Icon16Place style={{ marginTop: 3, marginRight: 3 }} />\r\n                            {city}\r\n                        </div>\r\n                        <div className='d-flex ml-2'>\r\n                            <Icon16ClockOutline style={{ marginTop: 3, marginRight: 3 }} />\r\n                            {day} {month}\r\n                        </div>\r\n                    </div>\r\n                </Div>\r\n                <Div>\r\n                    <Card mode='shadow'>\r\n                        <div className='d-flex text__dark_gray p-2'>\r\n                            <div className='center__y'>\r\n                                <Icon24Message />\r\n                            </div>\r\n                            <div className='ml-2'>\r\n                                {isGoodWind ? \r\n                                'Качество воздуха хорошее и соответствует требованиям ООН.'\r\n                                : 'Качество воздуха плохое и превышает требования ООН.'\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </Card>\r\n                </Div>\r\n\r\n                <Div>\r\n                    <Header>\r\n                        <span className=\"text__gray\">\r\n                            ЗАГРЯЗНИТЕЛИ\r\n                        </span>\r\n                    </Header>\r\n                    <Card mode='shadow'>\r\n                        <div className='p-2'>\r\n                            \r\n                        </div>\r\n                    </Card>\r\n                </Div>\r\n                <Spacing size={64}/>\r\n            </Group>\r\n        </Fragment>\r\n\r\n    </ModalPage>\r\n}","import { Cell } from '@vkontakte/vkui'\r\nimport { useEffect, useState } from 'react'\r\nimport { Badge } from './Badge'\r\n\r\n\r\n\r\ntype PropsType = {\r\n    city: string,\r\n    country: string,\r\n    value?: number,\r\n    id: string,\r\n    onClick: () => void\r\n}\r\n\r\n\r\nexport const PlaceItem: React.FC<PropsType> = ({ city, country, value, onClick }) => {\r\n\r\n    let [bg, setBG] = useState('bg__good')\r\n    useEffect(() => {\r\n        if (value) {\r\n            if (value >= 100) {\r\n                setBG('bg__danger')\r\n            } else if (value >= 50) {\r\n                setBG('bg__okay')\r\n            } else {\r\n                setBG('bg__good')\r\n            }\r\n        }\r\n    }, [value])\r\n\r\n    return <div\r\n    onClick={onClick}\r\n    className='highlight_on_touch'\r\n    style={{\r\n        display: 'grid',\r\n        gridTemplateColumns: '1fr 50px'\r\n    }}>\r\n        <div>\r\n            <div style={{fontSize:16}}>\r\n                {city}\r\n            </div>\r\n            <div style={{fontSize:15,color:'#606060'}}>\r\n                {country}\r\n            </div>\r\n        </div>\r\n        {value && <div >\r\n            <Badge color={bg} value={value} >\r\n                {value}\r\n            </Badge>\r\n        </div>}\r\n    </div>\r\n}","import { Icon24Dismiss, Icon32PlaceOutline } from \"@vkontakte/icons\"\r\nimport { Card, Cell, Div, Group, Header, Input, ModalPage, ModalPageHeader, PanelHeaderButton, Search, Spacing } from \"@vkontakte/vkui\"\r\nimport React, { ChangeEvent, Fragment, useEffect, useState } from \"react\"\r\nimport { Icon20Search } from '@vkontakte/icons';\r\nimport { ListItem } from \"../bricks/ListItem\";\r\nimport { Icon20PlaceOutline } from '@vkontakte/icons';\r\nimport { PlaceItem } from \"../bricks/PlaceItem\";\r\nimport { getEcologyCity, getEcoRankCity, getEcoSearchData } from \"../dal/api\";\r\nimport { EcoCity, EcoStation } from \"../types/EcoTypes\";\r\nimport { Formik } from \"formik\";\r\nimport { hidden } from \"chalk\";\r\n\r\n\r\n\r\n\r\n\r\ntype PropsType = {\r\n    id: string,\r\n    countryId: string,\r\n    countryName: string,\r\n    handlerClose: () => void,\r\n    setDefaultCity: (cityId: string) => void,\r\n    onClickMyCities: () => void,\r\n    myCity: string,\r\n    myCityId: string,\r\n    bgApp: string,\r\n    isAllowedPlace: boolean,\r\n    requestPermissionLocation: () => void\r\n}\r\n\r\nexport const PollutionCities: React.FC<PropsType> = ({ id, bgApp, countryId, handlerClose, setDefaultCity, countryName, myCity, myCityId, isAllowedPlace, requestPermissionLocation }) => {\r\n\r\n    type CityType = {\r\n        id: string,\r\n        name: string,\r\n        country: string,\r\n        aqi?: number\r\n    }\r\n    const [title, setTitle] = useState('')\r\n    const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setTitle(e.target.value)\r\n    }\r\n    const [cities, setCities] = useState<CityType[]>([])\r\n    const [clearestCities, setClearestCitites] = useState<CityType[]>([])\r\n    const [isFetching, setFetching] = useState(true)\r\n\r\n    useEffect(() => {\r\n        setFetching(true)\r\n        getEcoSearchData(title.length > 2 ? title : countryName)\r\n            .then(res => {\r\n                const data = res.data\r\n                setCities(data.cities)\r\n                setFetching(false)\r\n            }).catch(e => {\r\n                setFetching(false)\r\n            })\r\n    }, [title])\r\n\r\n    useEffect(() => {\r\n        setFetching(true)\r\n        getEcoSearchData(countryName)\r\n            .then(res => {\r\n                const data = res.data\r\n                setCities(data.cities)\r\n\r\n                getEcoRankCity(countryId)\r\n                    .then(res => {\r\n                        const data = res.data\r\n                        setClearestCitites(data)\r\n                        setFetching(false)\r\n                    })\r\n            }).catch(e => {\r\n                setFetching(false)\r\n            })\r\n    }, [])\r\n\r\n\r\n\r\n    const citiesJSX = cities.length>0 ? cities.map((c, index) => <><Div key={c.id} className=''>\r\n        <PlaceItem\r\n            onClick={() => {\r\n                setDefaultCity(c.id)\r\n                handlerClose()\r\n            }}\r\n            city={c.name} {...c} />\r\n    </Div>{(index + 1) !== cities.length && <Spacing separator className=\"spacing\" size={8} />}</>) : <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n                                Городов не найдено.</div> \r\n    const clearestCitiesJSX = clearestCities.length>0 ? clearestCities.map((c, index) => <><Div key={c.id} className=''>\r\n        <PlaceItem\r\n            value={c.aqi ? c.aqi : 10}\r\n            onClick={() => {\r\n                setDefaultCity(c.id)\r\n                handlerClose()\r\n            }}\r\n            city={c.name} {...c} country={countryName} />\r\n    </Div>{(index + 1) !== cities.length && <Spacing className=\"spacing\" separator size={8} />}</>) : <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n                                Городов не найдено.</div> \r\n\r\n\r\n\r\n    return <ModalPage\r\n        settlingHeight={100}\r\n        header={<ModalPageHeader\r\n            className={bgApp === 'bg__app__light' ? 'modal__app__light' : 'modal__app__dark'}\r\n            right={\r\n                <PanelHeaderButton onClick={handlerClose}><Icon24Dismiss />\r\n                </PanelHeaderButton>} />}\r\n        id={id}\r\n    >\r\n        <Group className={bgApp}>\r\n            <div>\r\n                <Search\r\n                    value={title} onChange={handleChange}\r\n                    className={bgApp} />\r\n            </div>\r\n            <Div>\r\n                <Card\r\n                    mode='shadow'\r\n                    className='card__app'\r\n                    style={{ padding: 0, overflow: 'hidden' }}>\r\n                    <Cell\r\n                        onClick={() => {\r\n                            if (isAllowedPlace) {\r\n                                setDefaultCity(myCityId)\r\n                                handlerClose()\r\n                            } else {\r\n                                requestPermissionLocation()\r\n                            }\r\n                        }}\r\n                    >\r\n                        <div className='card__app'>\r\n                            {(!isFetching) && <ListItem bgApp={bgApp} description={<div>\r\n                                {isAllowedPlace ? <> <div style={{ fontSize: 16 }}>\r\n                                    {myCity}\r\n                                </div>\r\n                                    <div style={{ fontSize: 15 }} className='text__gray'>\r\n                                        Текущее местоположение\r\n                                    </div> </> : <div\r\n                                        style={{ color: '#4475F1', fontSize: 16 }}>\r\n                                    <div>Разрешить доступ</div>\r\n                                    <div>к местоположению</div>\r\n                                </div>}\r\n                            </div>}>\r\n                                <Icon32PlaceOutline className='' fill='#4475F1' />\r\n                            </ListItem>}\r\n                            {isFetching && <ListItem\r\n                                bgApp={bgApp}\r\n                                description={<div>\r\n                                    <div\r\n                                        style={{ width: 122, height: 16 }}\r\n                                        className='bg__init'>\r\n                                    </div>\r\n                                    <div\r\n                                        style={{ width: 88, height: 12 }}\r\n                                        className='bg__init mt-1'>\r\n                                    </div>\r\n                                </div>}\r\n                            >\r\n                                <div\r\n                                    style={{ height: 24, width: 24, borderRadius: 20000 }}\r\n                                    className='bg__init'></div>\r\n                            </ListItem>}\r\n                        </div>\r\n                    </Cell>\r\n                </Card>\r\n            </Div>\r\n            <Div>\r\n                <Header className='text__SF-Pro-Rounded-Semibold'>\r\n                    {(!isFetching) ? <span className='text__gray'>\r\n                    {title.length>0 ? \"ВСЕ\" : \"С НИЗКИМИ ПОКАЗАТЕЛЯМИ\"}\r\n                    </span> : <div\r\n                        className='bg__init' style={{ width: 85, height: 12 }}\r\n                    ></div>}\r\n                </Header>\r\n                <Card\r\n                    mode='shadow'\r\n                    className='card__app'>\r\n                    <Group>\r\n                        {(isFetching) ? (title.length>0 ? <BgInitCities/> : <BgInitClearestCities />) : <></>}\r\n                        {(!isFetching) ? ((title.length > 0) ? citiesJSX : clearestCitiesJSX) : <></>}\r\n                    </Group>\r\n                </Card>\r\n            </Div>\r\n            <Div>\r\n                <Header className='text__SF-Pro-Rounded-Semibold'>\r\n                    {(!isFetching) ? <span className='text__gray'>\r\n                        {title.length>0 ? \"С НИЗКИМИ ПОКАЗАТЕЛЯМИ\" : \"ВСЕ\"}\r\n                    </span> : <div\r\n                        className='bg__init' style={{ width: 85, height: 12 }}>\r\n                    </div>}\r\n                </Header>\r\n                <Card\r\n                    mode='shadow'\r\n                    className='card__app'>\r\n                    <Group>\r\n                        <Group className=''>\r\n                            {(isFetching) ? (title.length>0 ? <BgInitClearestCities/> : <BgInitCities/>) : <></>  }\r\n                            {(!isFetching) ? ((title.length > 0) ? clearestCitiesJSX : citiesJSX) : <></> }\r\n                        </Group>\r\n                    </Group>\r\n                </Card>\r\n            </Div>\r\n            <Spacing size={70} />\r\n        </Group>\r\n    </ModalPage>\r\n}\r\n\r\n\r\ntype PropsClearestCitiesType = {}\r\nconst BgInitClearestCities: React.FC<PropsClearestCitiesType> = ({ }) => {\r\n\r\n    const items = [2, 3, 4, 5, 1].map(c => <><Div key={`clearCity${c}`} className='px-2'\r\n        style={{ display: 'grid', gridTemplateColumns: '1fr 50px' }}>\r\n        <div>\r\n            <div\r\n                style={{ width: 122, height: 16 }}\r\n                className='bg__init'>\r\n            </div>\r\n            <div\r\n                style={{ width: 88, height: 12 }}\r\n                className='bg__init mt-1'>\r\n            </div>\r\n        </div>\r\n        <div\r\n            style={{ width: 44, height: 24, borderRadius: 20000 }}\r\n            className='bg__init mt-1'>\r\n        </div>\r\n    </Div>{c !== 1 && <Spacing separator size={8} />}</>)\r\n\r\n    return <>{items}</>\r\n}\r\n\r\ntype PropsBgInitCitiesType = {}\r\nconst BgInitCities: React.FC<PropsBgInitCitiesType> = ({ }) => {\r\n    const items = [2, 3, 4, 5, 1].map(c => <><Div key={`city${c}`} className='px-2'>\r\n        <div>\r\n            <div\r\n                style={{ width: 122, height: 16 }}\r\n                className='bg__init'>\r\n            </div>\r\n            <div\r\n                style={{ width: 88, height: 12 }}\r\n                className='bg__init mt-1'>\r\n            </div>\r\n        </div>\r\n    </Div>{c !== 1 && <Spacing separator size={8} />}</>)\r\n\r\n    return <>{items}</>\r\n}","import { Cell, ModalCard } from \"@vkontakte/vkui\"\r\nimport { EcoCityData } from \"../types/EcoTypes\"\r\nimport { Icon28ChevronRightOutline } from '@vkontakte/icons';\r\nimport { Icon16Place } from '@vkontakte/icons';\r\n\r\n\r\n\r\n\r\n\r\ntype PropsType={\r\n    id: string,\r\n    handleClose: ()=>void,\r\n    cityFromSearch: EcoCityData,\r\n    cityOfUser: EcoCityData,\r\n    setCitySearch: (cityId:string)=>void,\r\n    toHome: ()=>void\r\n}\r\n\r\n\r\nexport const MyCities:React.FC<PropsType> = ({id,handleClose,cityFromSearch,cityOfUser,setCitySearch,toHome}) =>{\r\n    \r\n    \r\n    const handleCityFromSearchClick = () =>{\r\n        setCitySearch(cityFromSearch.id)\r\n        toHome()\r\n    }\r\n    const handleCityOfUserClick = () =>{\r\n        setCitySearch(cityOfUser.id)\r\n        toHome()\r\n    }\r\n\r\n    return<ModalCard \r\n    onClose={handleClose}\r\n    id={id}>\r\n        <Cell onClick={handleCityFromSearchClick}>\r\n        <div style={{display:'grid',gridTemplateColumns:'140px 28px 1fr'}}>\r\n            <div>\r\n                Город из поиска\r\n            </div>\r\n            <div className='center__x'>\r\n                <Icon28ChevronRightOutline fill='#808080'/>\r\n            </div>      \r\n            <div \r\n            style={{display:'flex',justifyContent:'end'}}>\r\n                <div style={{marginTop:2}} className='center__y'>\r\n                    <Icon16Place fill='#808080' className='mr-1' />\r\n                </div>\r\n                <div className='center__y'>\r\n                {cityFromSearch.name}\r\n                </div>\r\n            </div>     \r\n        </div>\r\n        </Cell>\r\n        <Cell onClick={handleCityOfUserClick}>\r\n        <div style={{display:'grid',gridTemplateColumns:'140px 28px 1fr'}}>\r\n            <div>\r\n                Текущее \r\n                <div>\r\n                местоположение\r\n                </div>\r\n            </div>\r\n            <div className='center__x'>\r\n                <Icon28ChevronRightOutline fill='#808080'/>\r\n            </div>      \r\n            <div \r\n            style={{display:'flex',justifyContent:'end',marginTop:2}}>\r\n                {cityOfUser.name}\r\n            </div>     \r\n        </div>\r\n        </Cell>\r\n    </ModalCard>\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAOCAYAAAAWo42rAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAC8SURBVHgBfZAxC8JADIXTq+jkYrcuDoKbP6Czq3/Av9pJV8HJyQ7ipItOCqIg9L2SK2mgDXxHuHt5lySRbuRgBibgCa7xITGiAqxc4QuULEoHRKLOC3ChcArW5vEGKr2ncAQyHnMjOoO95new0TwLWhXj55zbFoI2HGNpvizM/YNTj8HWOfs4Bf2ukuFohE0Cvj0iDviOe6QrN5A7Efvf8T1Ye+kOxjjSjYkV0rV0X7a9p87howV/cBCz1xonDSbmODszXAAAAABJRU5ErkJggg==\"","import { Snackbar } from \"@vkontakte/vkui\"\r\n//@ts-ignore\r\nimport success_img from '../media/score_low.svg'\r\n//@ts-ignore\r\nimport failed_img from '../media/score_high.svg' \r\n\r\n\r\ntype PropsType = {\r\n    resultOperation: boolean,\r\n    text: string,\r\n    closeHandler?: ()=>void\r\n}\r\n\r\nexport const MySnackbar:React.FC<PropsType> = ({text,resultOperation,closeHandler}) =>{\r\n    return<Snackbar\r\n    onClose={closeHandler}\r\n    before={<img src={resultOperation ? success_img : failed_img} />}\r\n    >\r\n        <div \r\n        className={'text__SF-Pro-Rounded-Regular'}\r\n        style={{fontSize:15}}>\r\n            {text}\r\n        </div>\r\n    </Snackbar>\r\n}","export default __webpack_public_path__ + \"static/media/bg_okay.deb781bc.jpg\";","export default __webpack_public_path__ + \"static/media/bg_good.78cdbf75.jpg\";","export default __webpack_public_path__ + \"static/media/bg_bad.fcfcaf41.jpg\";","import { Button, Card, ModalCard } from \"@vkontakte/vkui\"\r\nimport { BackgroundColor } from \"chalk\";\r\nimport React from \"react\"\r\nimport { Icon56NotificationOutline } from '@vkontakte/icons';\r\n\r\n\r\n\r\n\r\ntype PropsType={\r\n    bgApp: string,\r\n    id: string,\r\n    closeHandler: ()=>void,\r\n    subscribeNoticification: ()=>void\r\n}\r\nconst LIGHT_BLUE = '#4475F1'\r\n\r\nexport const TurnNoticifications:React.FC<PropsType>=({id, subscribeNoticification, bgApp, closeHandler})=>{\r\n    return<ModalCard      \r\n    id={id}      \r\n\r\n          onClose={closeHandler}\r\n          icon={<Icon56NotificationOutline fill={LIGHT_BLUE} />}\r\n          header={<div className='text__Inter-Bold'>Включить уведомления?</div>}\r\n          subheader={<div className='text__Inter-Regular'>\r\n              Мы будем уведомлять вас об актуальном качестве воздуха\r\n              раз в неделю, а также:\r\n              <div style={{marginTop:10}}>\r\n                 - Если качество воздуха станет не приемлимым\r\n              </div>\r\n              <div style={{marginTop:5}}>\r\n                 - О резких скачках колличества загрязнителей\r\n              </div>\r\n            </div>}\r\n          actions={\r\n            <Button size=\"l\" mode=\"primary\" onClick={()=>{\r\n                subscribeNoticification()\r\n                closeHandler()\r\n            }} className='text__Inter-Medium'>\r\n              Включить\r\n            </Button>\r\n          }\r\n        />\r\n}","import { AppReducerType } from \"../store\";\r\n\r\n\r\n\r\n\r\nexport const bgAppSelector = (state: AppReducerType) =>{\r\n    return state.initial.bgApp\r\n}\r\n\r\nexport const platformSelector = (state: AppReducerType) =>{\r\n    return state.initial.platform\r\n}","import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport bridge from '@vkontakte/vk-bridge';\r\nimport { View, Panel, ScreenSpinner, AdaptivityProvider, AppRoot, ModalRoot, ConfigProvider, usePlatform } from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport { Intro } from './panels/Intro';\r\nimport { Home } from './panels/Home';\r\nimport './App.css'\r\nimport { ForecastPollutionForDay } from './panels/ForecastPollutionForDay';\r\nimport { PollutionCities } from './panels/PollutionCities';\r\nimport { getCityByCoordinate, getEcologyCity, getEcologyCountry, \r\n\tgetEcoSearchData, getSubscribes, subscribeNoticification, unsubscribeNoticification } from './dal/api';\r\nimport { MyCities } from './panels/MyCities';\r\nimport { MyCanvas } from './bricks/MyCanvas';\r\nimport { MySnackbar } from './bricks/MySnackbar';\r\nimport { Layer, Stage, Image, Text, Rect } from \"react-konva\";\r\nimport placePNG from \"./media/place.png\";\r\nimport useImage from 'use-image';\r\nimport bg_okay from './media/bg_okay.jpg'\r\nimport bg_good from './media/bg_good.jpg'\r\nimport bg_bad from './media/bg_bad.jpg'\r\nimport chevron_right from \"./media/chevron_right.png\";\r\nimport { TurnNoticifications } from './panels/TurnNoticifications';\r\nimport { useSelector } from 'react-redux';\r\nimport { bgAppSelector, platformSelector } from './bll/Selectors/initialSelector';\r\n\r\n\r\n\r\nconst ROUTES = {\r\n\tINFO: 'INFO',\r\n\tPOLLUTION_CITIES: 'POLLUTION_CITIES',\r\n\tHOME: 'HOME',\r\n\tFORECAST_POLLUTION_FOR_THE_DAY: 'FORECAST_POLLUTION_FOR_THE_DAY',\r\n\tMY_CITIES: 'MY_CITIES',\r\n\tTURN_NOTICIFICATIONS: 'TURN_NOTICIFICATIONS'\r\n}\r\nconst STATE_KEYS = {\r\n\tIS_CHECK_INFO: 'IS_CHECK_INFO',\r\n\tIS_ALLOWED_PLACE: 'IS_ALLOWED_PLACE',\r\n\tDEFAULT_CITY_ID: 'DEFAULT_CITY_ID',\r\n\tDEFAULT_COUNTRY_NAME:'DEFAULT_COUNTRY_NAME',\r\n\tDEFAULT_COUNTRY_ID: 'DEFAULT_COUNTRY_ID'\r\n}\r\nconst DEFAULT_CITY_ID = '5b163b6f7fa2b15e076ad2a6'\r\nconst DEFAULT_COUNTRY_ID = 'qNvxAidZLbwhRmQXR'\r\nconst DEFAULT_COUNTRY_NAME = 'Россия'\r\n\r\nconst App = () => {\r\n\t\r\n\tconst [isInit, setInit] = useState(false)\r\n\tconst [activePanel, setActivePanel] = useState(ROUTES.HOME);\r\n\tconst [fetchedUser, setUser] = useState(null);\r\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\r\n\tconst [activeModal, setActiveModal] = useState(null)\r\n\tconst [snackbar, setSnackbar] = useState(null)\r\n\tconst [state, setState] = useState({\r\n\t\tisCheckInfo: false,\r\n\t\tisAllowedPlace: false,\r\n\t\tdefaultCityId: DEFAULT_CITY_ID,\r\n\t\tdefaultCountryId: DEFAULT_COUNTRY_ID,\r\n\t\tecoCity: null,\r\n\t\tnativeCity: null,\r\n\t\tsubscribedCities: [],\r\n\t\tdefaultCountryName: DEFAULT_COUNTRY_NAME\r\n\t})\r\n\t\r\n\tconst handlerCloseModal = () => {\r\n\t\tsetActiveModal(null)\r\n\t}\r\n\tconst platform = useSelector(platformSelector)\r\n\tconst bgApp = useSelector(bgAppSelector)\r\n\tuseEffect(async () => {\r\n\t\t/*bridge.subscribe(({ detail: { type, data } }) => {\r\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\r\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\r\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\r\n\t\t\t\tconst title = new RegExp('light')\t\t\t\t\r\n\t\t\t\tif((data.scheme==='vkcom') || (data.scheme.match(title))){\r\n\t\t\t\t\tsetBgApp('bg__app__light')\r\n\t\t\t\t\tif(data.scheme==='vkcom'){\r\n\t\t\t\t\t\tsetPlatform('pc')\r\n\t\t\t\t\t}else{\t\r\n\t\t\t\t\t\tsetPlatform('mobile')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"light\", \"action_bar_color\": \"#F5F5F5\"})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsetBgApp('bg__app__dark')\r\n\t\t\t\t\tbridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"dark\", \"action_bar_color\": \"#373737\"})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\r\n\t\t\t}\r\n\t\t});*/\r\n\t\tasync function fetchData() {\r\n\t\t\tconst res = (await bridge.send('VKWebAppStorageGet', { keys: Object.values(STATE_KEYS) }))\r\n\r\n\t\t\tlet data = res.keys\r\n\t\t\t\tdata.forEach((s) => {\r\n\t\t\t\t\tlet value = s.value ? JSON.parse(s.value) : null\r\n\t\t\t\t\tswitch (s.key) {\r\n\t\t\t\t\t\tcase STATE_KEYS.IS_CHECK_INFO:\r\n\t\t\t\t\t\t\tif (!value) {\r\n\t\t\t\t\t\t\t\tsetActiveModal(ROUTES.INFO)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsetState(prev => {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\tisCheckInfo: true\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase STATE_KEYS.IS_ALLOWED_PLACE:\r\n\t\t\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\t\t\tsetState(prev => {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\tisAllowedPlace: true\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase STATE_KEYS.DEFAULT_COUNTRY_ID:\r\n\t\t\t\t\t\t\tif(value) {\r\n\t\t\t\t\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\t\t\t\t\treturn{\r\n\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\tdefaultCountryId: s.value\r\n\t\t\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcase STATE_KEYS.DEFAULT_CITY_ID:\r\n\t\t\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\t\t\tsetState(prev => {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\tdefaultCityId: s.value\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase STATE_KEYS.DEFAULT_COUNTRY_NAME:\r\n\t\t\t\t\t\t\tif(value) {\r\n\t\t\t\t\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\t\t\t\t\treturn{\r\n\t\t\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\t\t\tdefaultCountryName:s.value\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t}\r\n\t\tfetchData()\r\n\t}, []);\r\n\tconst go = (modal) => {\r\n\t\tsetActiveModal(modal)\r\n\t}\r\n\tconst checkInfo = () => {\r\n\t\ttry {\r\n\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t{\r\n\t\t\t\t\tkey: STATE_KEYS.IS_CHECK_INFO,\r\n\t\t\t\t\tvalue: 'true'\r\n\t\t\t\t})\r\n\t\t\tsetState(prev => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\tisCheckInfo: true\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\thandlerCloseModal()\r\n\t\t} catch (e) {\r\n\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tuseEffect(async () => {\r\n\t\tif (state.isAllowedPlace) {\r\n\t\t\ttry {\r\n\t\t\t\tsetInit(true)\r\n\t\t\t\tlet { lat, long } = await bridge.send('VKWebAppGetGeodata', { key: 'location' })\r\n\t\t\t\tconst { city } = await getCityByCoordinate( lat, long)\r\n\r\n\t\t\t\tlet id = DEFAULT_CITY_ID\r\n\t\t\t\tlet idCountry = DEFAULT_COUNTRY_ID\r\n\t\t\t\tlet defaultNameCountry = DEFAULT_COUNTRY_NAME\r\n\t\t\t\tlet cityName = city \r\n\t\t\t\tconst data = (await getEcoSearchData(cityName)).data\r\n\t\t\t\tlet currentCity = null\r\n\t\t\t\tdata.cities.forEach(item => {\r\n\t\t\t\t\t\tif (item.name === cityName && (!currentCity)) {\r\n\t\t\t\t\t\t\tid = item.id\r\n\t\t\t\t\t\t\tcurrentCity = item\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\tconst dataCountry = (await getEcoSearchData(currentCity.country)).data\r\n\t\t\t\tdataCountry.countries.forEach(item => {\r\n\t\t\t\t\tif (item.name === currentCity.country) {\r\n\t\t\t\t\t\tidCountry = item.id\r\n\t\t\t\t\t\tdefaultNameCountry = item.name\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: STATE_KEYS.DEFAULT_COUNTRY_NAME,\r\n\t\t\t\t\t\tvalue: defaultNameCountry\r\n\t\t\t\t\t})\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tdefaultCountryId: defaultNameCountry\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: STATE_KEYS.DEFAULT_COUNTRY_ID,\r\n\t\t\t\t\t\tvalue: idCountry\r\n\t\t\t\t\t})\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tdefaultCountryId: idCountry\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: STATE_KEYS.DEFAULT_CITY_ID,\r\n\t\t\t\t\t\tvalue: id\r\n\t\t\t\t\t})\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tdefaultCityId: id\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tnativeCity: currentCity\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tsetInit(false)\r\n\t\t\t} catch (e) {\r\n\t\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: STATE_KEYS.DEFAULT_CITY_ID,\r\n\t\t\t\t\t\tvalue: state.defaultCityId\r\n\t\t\t\t\t})\r\n\t\t\t\tsetInit(false)\r\n\t\t\t}\r\n\t\t}\r\n\t}, [state.isAllowedPlace])\r\n\tuseEffect(async ()=>{\r\n\t\t\r\n\t\tsetInit(true)\r\n\t\tconst data = (await getEcologyCity(state.defaultCityId)).data\r\n\t\tif(data){\r\n\t\t\tsetState(prev=>{\r\n\t\t\t\treturn{\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\tecoCity: data\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tif(!state.nativeCity){\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tnativeCity: data\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetInit(false)\r\n\t}, [state.defaultCityId])\r\n\t\r\n\tconst handlerLocationHashChange = async ()=>{\r\n\t\tif(window.location.hash.slice(1,)){\r\n\t\t\tsetInit(true)\r\n\t\t\tconst data = (await getEcologyCity(window.location.hash.slice(1,))).data\r\n\t\t\tif(data){\r\n\t\t\t\tsetState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tecoCity: data\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tsetInit(false)\r\n\t\t}\r\n\t}\r\n\tuseEffect(async()=>{\r\n\t\thandlerLocationHashChange()\r\n\t},[window.location.hash])\r\n\t\r\n\tuseEffect(async()=>{\r\n\t\tconst res = await getSubscribes()\r\n\t\tsetState(prev=>{\r\n\t\t\treturn{\r\n\t\t\t\t...prev,\r\n\t\t\t\tsubscribedCities: [...res]\r\n\t\t\t}\r\n\t\t})\r\n\t}, [])\r\n\r\n\tconst requestPermissionLocation = async () => {\r\n\t\tawait bridge.send('VKWebAppGetGeodata', { key: 'location' })\r\n\t\t\t.then(res => {\r\n\t\t\t\tbridge.send('VKWebAppStorageSet',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tkey: STATE_KEYS.IS_ALLOWED_PLACE,\r\n\t\t\t\t\t\tvalue: JSON.stringify(true)\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tsetState(prev => {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\t\t\tisAllowedPlace: true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t}).catch(e => {\r\n\t\t\t\tsetState(prev => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tisAllowedPlace: true\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\tcheckInfo()\r\n\t}\r\n\r\n\r\n\r\n\tconst handleCloseForMyCities = () =>{\r\n\t\tsetActiveModal(ROUTES.POLLUTION_CITIES)\r\n\t}\r\n\tconst handleOpenMyCities =()=>{\r\n\t\tsetActiveModal(ROUTES.MY_CITIES)\r\n\t}\r\n\r\n\tconst ref = useRef(null)\r\n\tconst refBg = useRef(null)\r\n\t\r\n\tconst doStory=React.useCallback(async ()=>{\r\n\t\t\r\n\r\n\t\ttry{\r\n\t\t\tlet data = {}\r\n\t\t\tif(platform==='pc'){\r\n\t\t\t\tdata = {\r\n\t\t\t\t\tbackground_type:'image',\r\n\t\t\t\t\tblob:refBg.current.toDataURL()\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tdata = {\r\n\t\t\t\t\tbackground_type: 'none'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tawait bridge.send('VKWebAppShowStoryBox',{\r\n\t\t\t\t...data,\r\n\t\t\t\t\"stickers\": [\r\n\t\t\t\t  {\r\n\t\t\t\t\t\"sticker_type\": \"renderable\",\r\n\t\t\t\t\t\"sticker\": {\r\n\t\t\t\t\t  \"can_delete\": false,\r\n\t\t\t\t\t  \"content_type\": \"image\",\r\n\t\t\t\t\t  \"blob\": ref.current.toDataURL(),\r\n\t\t\t\t\t  \"clickable_zones\": [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t  \"action_type\": \"link\",\r\n\t\t\t\t\t\t  \"action\": {\r\n\t\t\t\t\t\t\t\"link\": `https://vk.com/app7991717#${state.ecoCity.id}`,\r\n\t\t\t\t\t\t\t\"tooltip_text_key\": \"tooltip_open_default\"\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t  ],\r\n\t\t\t\t\t  \"transform\": {\r\n\t\t\t\t\t\t  \"gravity\": \"center\",\r\n\t\t\t\t\t\t  \"relation_width\": 1\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}\r\n\t\t\t\t  }\r\n\t\t\t\t]\r\n\t\t\t  }).catch(e=>{\r\n\t\t\t\t  setSnackbar(<MySnackbar \r\n\t\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\t\tresultOperation={true} text={'Опубликовать историю не удалось'}/>)\r\n\t\t\t  }).then(res=>{\r\n\t\t\t\tif(res.result){\r\n\t\t\t\t\tsetSnackbar(<MySnackbar \r\n\t\t\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\t\t\tresultOperation={true} text={'История опубликована'}/>)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tsetSnackbar(<MySnackbar \r\n\t\t\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\t\t\tresultOperation={false} text={'Опубликовать историю не удалось'}/>)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}catch(e){\r\n\t\t\tsetSnackbar(<MySnackbar \r\n\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\tresultOperation={false} text={'Опубликовать историю не удалось'} />)\r\n\t\t}\r\n\t},[ref, state.ecoCity, refBg])\r\n\tconst closeSnackbarHandler = () =>{\r\n\t\tsetSnackbar(null)\r\n\t}\r\n\t\r\n\tconst subscribeNoticificationForButton=async ()=>{\r\n\t\t\r\n\t\ttry{\r\n\t\tconst res = await bridge.send('VKWebAppAllowNotifications')\r\n\t\t\r\n\t\tif(res.result && state.ecoCity){\r\n\t\t\tawait subscribeNoticification(state.ecoCity.id)\t\t\t\t\r\n\t\t}\r\n\r\n\t\tsetState(prev=>{\r\n\t\t\treturn{\r\n\t\t\t\t...prev,\r\n\t\t\t\tsubscribedCities:[...prev.subscribedCities,{cityId:state.ecoCity.id}]\r\n\t\t\t}\r\n\t\t})\r\n\t\tsetSnackbar(<MySnackbar\r\n\t\t\tcloseHandler={closeSnackbarHandler} \r\n\t\t\tresultOperation={true}\r\n\t\t\ttext={'Уведомления включены'}/>)\r\n\t\t\r\n\t\t}catch(e){\r\n\t\t\tsetSnackbar(<MySnackbar \r\n\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\tresultOperation={false}\r\n\t\t\t\ttext={'Включить уведомления не удалось'}/>)\r\n\t\t}\r\n\r\n\t}\r\n\tconst unsubsubscribeNoticificationForButton = async ()=>{\r\n\t\t\r\n\t\ttry{\r\n\t\tconst res = await bridge.send('VKWebAppDenyNotifications')\r\n\r\n\t\tif(res.result && state.ecoCity){\r\n\t\t\tawait unsubscribeNoticification(state.ecoCity.id)\r\n\t\t}\r\n\r\n\t\tsetState(prev=>{\r\n\t\t\treturn{\r\n\t\t\t\t...prev,\r\n\t\t\t\tsubscribedCities:[...prev.subscribedCities.filter(s=>s.cityId!==state.ecoCity.id)]\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t\tsetSnackbar(<MySnackbar \r\n\t\t\tresultOperation={true}\r\n\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\ttext={'Уведомления выключены'}/>)\r\n\t\t\r\n\t\t}catch(e){\r\n\t\t\tsetSnackbar(<MySnackbar \r\n\t\t\t\tcloseHandler={closeSnackbarHandler}\r\n\t\t\t\tresultOperation={false}\r\n\t\t\t\ttext={'Выключить уведомления не удалось'}/>)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tconst modal = (\r\n\t\t<ModalRoot onClose={handlerCloseModal} activeModal={activeModal}>\r\n\t\t\t{<MyCities\r\n\t\t\ttoHome={handlerCloseModal}\r\n\t\t\tcityFromSearch={state.ecoCity}\r\n\t\t\tcityOfUser={state.nativeCity}\r\n\t\t\tsetCitySearch={(cityId)=>setState(prev=>{\r\n\t\t\t\treturn{\r\n\t\t\t\t\t...prev,\r\n\t\t\t\t\tdefaultCityId:cityId\r\n\t\t\t\t}\r\n\t\t\t})}\r\n\t\t\thandleClose={handleCloseForMyCities}\r\n\t\t\tid={ROUTES.MY_CITIES}\r\n\t\t\t/>}\r\n\t\t\t<Intro\r\n\t\t\tbgApp={bgApp}\r\n\t\t\t\tcheckInfo={checkInfo}\r\n\t\t\t\trequestPermissionLocation={requestPermissionLocation}\r\n\t\t\t\tid={ROUTES.INFO} handlerClose={handlerCloseModal} />\r\n\t\t\t<ForecastPollutionForDay\r\n\t\t\t\tid={ROUTES.FORECAST_POLLUTION_FOR_THE_DAY}\r\n\t\t\t\thandlerClose={handlerCloseModal}\r\n\t\t\t\tday={3} month={'Ноябрь'} city={'Санкт-Петербург'}\r\n\t\t\t/>\r\n\t\t\t<TurnNoticifications\r\n\t\t\tbgApp={bgApp}\r\n\t\t\tid={ROUTES.TURN_NOTICIFICATIONS}\r\n\t\t\tcloseHandler={handlerCloseModal}\r\n\t\t\tsubscribeNoticification={subscribeNoticificationForButton}\r\n\t\t\t/>\r\n\t\t\t<PollutionCities\r\n\t\t\t\trequestPermissionLocation={requestPermissionLocation}\r\n\t\t\t\tisAllowedPlace={state.isAllowedPlace}\r\n\t\t\t\tbgApp={bgApp}\r\n\t\t\t\tmyCityId={state.nativeCity ? state.nativeCity.id : DEFAULT_CITY_ID}\r\n\t\t\t\tmyCity={state.nativeCity ? state.nativeCity.name : 'Санкт-Петербург' }\r\n\t\t\t\tonClickMyCities = {handleOpenMyCities}\r\n\t\t\t\tsetDefaultCity={(cityId)=>setState(prev=>{\r\n\t\t\t\t\treturn{\r\n\t\t\t\t\t\t...prev,\r\n\t\t\t\t\t\tdefaultCityId:cityId\r\n\t\t\t\t\t}\r\n\t\t\t\t})}\r\n\t\t\t\tcountryName={state.defaultCountryName}\r\n\t\t\t\tcountryId={state.defaultCountryId}\r\n\t\t\t\thandlerClose={handlerCloseModal}\r\n\t\t\t\tid={ROUTES.POLLUTION_CITIES} />\r\n\t\t</ModalRoot>\r\n\t)\r\n\r\n\treturn (\r\n\t\t<AdaptivityProvider>\r\n\t\t\t<AppRoot activePanel={activePanel} popout={popout}>\r\n\t\t\t\t<View activePanel={ROUTES.HOME} modal={modal}>\r\n\t\t\t\t\t<Home\r\n\t\t\t\t\tsnackbar={snackbar}\r\n\t\t\t\t\tsubscribeNoticification={()=>setActiveModal(ROUTES.TURN_NOTICIFICATIONS)}\r\n\t\t\t\t\tunsubsubscribeNoticification={unsubsubscribeNoticificationForButton}\r\n\t\t\t\t\tisCitySubscribed={state.ecoCity ? state.subscribedCities.some(s=>s.cityId===state.ecoCity.id) : false}\r\n\t\t\t\t\tbgApp={bgApp}\r\n\t\t\t\t\tdoStory={doStory}\r\n\t\t\t\t\tnativeCityId={state.nativeCity ? state.nativeCity.id : DEFAULT_CITY_ID}\r\n\t\t\t\t\tisInit={isInit}\r\n\t\t\t\t\t\tgo={go}\r\n\t\t\t\t\t\tcity={state.ecoCity ? state.ecoCity : null}\r\n\t\t\t\t\t\tid={ROUTES.HOME} isGoodWind={\r\n\t\t\t\t\t\t\t(state.ecoCity && state.ecoCity.current) ? (state.ecoCity.current.aqi<=50) : true  \r\n\t\t\t\t\t\t} />\r\n\t\t\t\t\t\r\n\t\t\t\t</View>\r\n\t\t\t</AppRoot>\r\n\t\t\t<div id='canvas' style={{width:0,height:0,opacity:0}}>\r\n\t\t\t<Stage\r\n\t\t\twidth={253}\r\n\t\t\theight={250}\r\n\t\t\tref={refBg}\r\n\t\t\t>\r\n\t\t\t\t<Layer>\r\n\t\t\t\t\t\t<Rect \r\n\t\t\t\t\t\tfill={'white'}\r\n\t\t\t\t\t\twidth={253}\r\n\t\t\t\t\t\theight={250}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t</Layer>\r\n\t\t\t</Stage>\r\n\t\t\t<Stage\r\n    ref={ref}\r\n        style={{ width: 253, height: 250, borderRadius: 20 }}\r\n        width={253} height={250}\r\n    >\r\n\r\n        <Layer>\r\n\t\t\t<Rect\r\n\t\t\tfillLinearGradientStartPoint={{ x: 0, y: -100 }}\r\n\t\t\tfillLinearGradientEndPoint={{ x: 120, y: 220 }}\r\n\t\t\tfillLinearGradientColorStops={(state.ecoCity && state.ecoCity.current.aqi>100) ?\r\n\t\t\t\t[0,'rgba(255,153,182,1)',1,'rgba(204,183,254,1)'] \r\n\t\t\t\t: (state.ecoCity && state.ecoCity.current.aqi>50) ? [0,'#FDCFB2',1,'#BF8FF5']\r\n\t\t\t\t: [0,'#B3FF86',1,'#EEFFC8']}\r\n\t\t\twidth={253}\r\n\t\t\theight={250}\r\n\t\t\tcornerRadius={20}\r\n\t\t\t/>\r\n            <Text\r\n                fontFamily={'SF-Pro-Rounded-Heavy'}\r\n                text=\"Качество воздуха:\"\r\n                x={55}\r\n                fontSize={15}\r\n                y={52}\r\n                fill='rgba(0, 0, 0, 0.5)'\r\n                width={150}\r\n                height={30}\r\n            />\r\n            <Text\r\n                fontFamily={'SF-Pro-Rounded-Heavy'}\r\n                text={(state.ecoCity && state.ecoCity.current.aqi > 100) ? \"Плохое\" : (state.ecoCity && state.ecoCity.current.aqi > 50) ? 'Неплохое' : \"Хорошее\"}\r\n                x={(state.ecoCity && state.ecoCity.current.aqi>100) ? 66 : (state.ecoCity && state.ecoCity.current.aqi>50) ? 48 : 53.5 } //53.5\r\n                fontSize={32}\r\n                y={76}\r\n                fill='rgba(0, 0, 0, 0.5)'\r\n                width={(state.ecoCity && state.ecoCity.current.aqi>100) ? 161 : 176}//146\r\n                height={38}\r\n            />\r\n            <Text\r\n                fontFamily={'SF-Pro-Rounded-Regular'}\r\n                text={(state.ecoCity ? state.ecoCity.name : 'SPb')}\r\n                x={(253-(state.ecoCity ? state.ecoCity.name.length*8 : 10))/2}\r\n                fontSize={17}\r\n                y={130}\r\n                fill='rgba(0, 0, 0, 0.5)'\r\n                width={200}\r\n                height={100}\r\n            />\r\n\t\t\t<Rect\r\n\t\t\tx={42}\r\n\t\t\ty={191}\r\n\t\t\twidth={169}\r\n\t\t\tfill={'rgba(255,255,255,0.5)'}\r\n\t\t\theight={39}\r\n\t\t\tcornerRadius={28}\r\n\t\t\t/>\r\n\t\t\t<Text\r\n\t\t\ttext={'Узнать больше'}\r\n\t\t\twidth={200}\r\n\t\t\theight={39}\r\n\t\t\tx={56}\r\n\t\t\tfontSize={18}\r\n\t\t\tfontFamily={'SF-Pro-Rounded-Regular'}\r\n\t\t\tfill='rgba(0, 0, 0, 0.5)'\r\n\t\t\ty={201}\r\n\t\t\t/>\r\n            <PlaceImage x={(253-(state.ecoCity ? state.ecoCity.name.length*8 : 10)-30)/2}/>\r\n\t\t\t<ChevronRight />\r\n\t\t</Layer>\r\n\r\n    </Stage>\r\n\t\t\t</div>\r\n\t\t</AdaptivityProvider>\r\n\t);\r\n}\r\n\r\nconst PlaceImage = ({x}) => {\r\n    const [image] = useImage(placePNG);\r\n    return <Image\r\n        x={x}\r\n        y={130}\r\n        image={image} />;\r\n};\r\n\r\nconst ChevronRight = () =>{\r\n    const [image] = useImage(chevron_right);\r\n    return <Image\r\n        x={188.6}\r\n        y={205.6}\r\n        image={image} />;\r\n}\r\n\r\nconst BgImage = ({aqi}) =>{\r\n\tconst [image] = useImage(aqi>100 ? bg_bad : aqi>50 ? bg_okay : bg_good)\r\n\treturn <Image\r\n\t\timage={image}\r\n\t/>\r\n}\r\n\r\nexport default App;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAALCAYAAACzkJeoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABvSURBVHgBdZAxCoAwDEVTs3TwAI4ODh7Bmzh6Ng/VUXARPICDg4M/8IcoaeCRwvtNSkVEMhjZP6VgADN7AY+XF0X3DygPJQooJ4QBdfstsIEJtOBonMx8mNUJ9uTEwpEmVnCnmrAbNraPhN8V/tALxhgbBZpF7PYAAAAASUVORK5CYII=\"","import { Appearance, platform } from \"@vkontakte/vkui\"\r\n\r\n\r\nconst SET_PLATFORM:'initialReducer/SET_PLATFORM'='initialReducer/SET_PLATFORM'\r\nconst SET_BG_APP:'initialReducer/SET_BG_APP'='initialReducer/SET_BG_APP'\r\n\r\ntype PlatformType = 'mobile' | 'pc'\r\ntype BgAppType = 'bg__app__light' | 'bg__app__dark'\r\n\r\nconst initialState = {\r\n    platform: 'mobile',\r\n    bgApp: 'bg__app__light',\r\n}\r\ntype InitialStateType = typeof initialState\r\n\r\ntype ActionType = SetBgAppType | SetPlatformType\r\n\r\nexport const initialReducer = (state=initialState,action:ActionType):InitialStateType=>{\r\n    switch(action.type){\r\n        case SET_PLATFORM:\r\n            return{\r\n                ...state,\r\n                platform: action.platform\r\n            }\r\n        case SET_BG_APP:\r\n            return{\r\n                ...state,\r\n                bgApp: action.bgApp\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\ntype SetPlatformType = {\r\n    type: typeof SET_PLATFORM,\r\n    platform: PlatformType\r\n}\r\nexport const  setPlatform = (platform:PlatformType):SetPlatformType =>{\r\n    return{\r\n        type: SET_PLATFORM,\r\n        platform\r\n    }\r\n}\r\n\r\ntype SetBgAppType = {\r\n    type: typeof SET_BG_APP,\r\n    bgApp: BgAppType\r\n}\r\nexport const setBgApp = (bgApp:BgAppType):SetBgAppType =>{\r\n    return{\r\n        type: SET_BG_APP,\r\n        bgApp\r\n    }\r\n}\r\n ","import { combineReducers, createStore } from \"redux\";\r\nimport { initialReducer } from \"./Reducers/initialReducer\";\r\n\r\n\r\n\r\n\r\n\r\nconst reducers = combineReducers({\r\n    initial: initialReducer\r\n})\r\n\r\ntype ReducersType = typeof reducers\r\nexport type AppReducerType = ReturnType<ReducersType>\r\n\r\nexport const store = createStore(reducers)\r\n\r\n","import bridge from \"@vkontakte/vk-bridge\";\r\nimport { setBgApp, setPlatform } from \"../bll/Reducers/initialReducer\";\r\nimport { store } from \"../bll/store\";\r\n\r\n\r\nconst dispatch = store.dispatch\r\ntype DataType = {scheme:string}\r\nexport const subscribeVkBridge = async () => {\r\n    bridge.subscribe(({ detail }) => {\r\n        const {type, data} = detail\r\n        if (type === 'VKWebAppUpdateConfig') {\r\n            const schemeAttribute = document.createAttribute('scheme');\r\n            //@ts-ignore\r\n            schemeAttribute.value = data.scheme ? data.scheme : 'client_light';\r\n            const title = new RegExp('light')\t\t\t\t\r\n            //@ts-ignore\r\n            if((data.scheme.match(new RegExp('vkcom'))) || (data.scheme.match(title))){\r\n                dispatch(setBgApp('bg__app__light'))\r\n                //@ts-ignore\r\n                if(data.scheme.match(new RegExp('vkcom'))){\r\n                    dispatch(setPlatform('pc'))\r\n                }else{\t\r\n                    dispatch(setPlatform('mobile'))\r\n                }\r\n                bridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"light\", \"action_bar_color\": \"#F5F5F5\"})\r\n            }else{\r\n                dispatch(setBgApp('bg__app__dark'))\r\n                bridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"dark\", \"action_bar_color\": \"#373737\"})\r\n            }\r\n            \r\n            document.body.attributes.setNamedItem(schemeAttribute);\r\n        }\r\n    })}","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport App from \"./App\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store } from \"./bll/store\";\r\nimport { subscribeVkBridge } from \"./utils/initialVkBridge\";\r\n\r\n// Init VK  Mini App\r\nsubscribeVkBridge()\r\nbridge.send(\"VKWebAppInit\");\r\n\r\n\r\nconst AppContainer = () =>{\r\n  return<Provider store = {store}>\r\n    <App/>\r\n  </Provider>\r\n}\r\nReactDOM.render(<AppContainer />, document.getElementById(\"root\"));\r\nif (process.env.NODE_ENV === \"development\") {\r\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\r\n}\r\n"],"sourceRoot":""}