(this["webpackJsonpmini-app"]=this["webpackJsonpmini-app"]||[]).push([[0],{151:function(e,t,c){},153:function(e,t,c){},154:function(e,t,c){},173:function(e,t,c){},182:function(e,t,c){"use strict";c.r(t);var i=c(1),n=c.n(i),a=c(31),s=c.n(a),r=c(19),l=c.n(r),d=c(25),o=c(18),j=c.n(o),b=c(10),u=c(21),h=c(15),O=c(4),x=(c(150),c(151),c(184)),p=c(185),f=c(186),_=c(187),m=c(0),g="#4475F1",y=function(e){var t=e.id,c=e.bgApp,n=e.handlerClose,a=e.checkInfo,s=e.requestPermissionLocation;return Object(m.jsx)(O.n,{id:t,onClose:n,header:Object(m.jsx)(O.o,{className:"bg__app__light"===c?"modal__app__light":"modal__app__dark"}),children:Object(m.jsx)("div",{className:c,children:Object(m.jsxs)(i.Fragment,{children:[Object(m.jsxs)(O.j,{children:[Object(m.jsx)(O.g,{className:"center__x text__big",children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 Purify"}),Object(m.jsxs)(O.g,{children:[Object(m.jsx)(v,{Icon:x.a,description:"\u041f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0439\u0442\u0435 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u0443\u044e \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443 \u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0439\u0442\u0435 \u0432\u0430\u0436\u043d\u044b\u0435 \u0441\u043e\u0432\u0435\u0442\u044b, \u0447\u0442\u043e\u0431\u044b \u0441\u0431\u0435\u0440\u0435\u0447\u044c \u0437\u0434\u043e\u0440\u043e\u0432\u044c\u0435. ",title:"\u0421\u043b\u0435\u0434\u0438\u0442\u0435 \u0437\u0430 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e\u043c \u0432\u043e\u0437\u0434\u0443\u0445\u0430"}),Object(m.jsx)(v,{Icon:p.a,description:"\u041f\u043e\u043b\u0443\u0447\u0430\u0439\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0440\u0430\u043d\u0435\u0435 \u0437\u043d\u0430\u0442\u044c \u043e\u0431 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f\u0445 \u0432 \u0445\u0443\u0434\u0448\u0443\u044e \u0441\u0442\u043e\u0440\u043e\u043d\u0443.",title:"\u0411\u0443\u0434\u044c\u0442\u0435 \u0432 \u043a\u0443\u0440\u0441\u0435"}),Object(m.jsx)(v,{Icon:f.a,description:"\u0418\u043d\u0444\u043e\u0440\u043c\u0438\u0440\u0443\u0439\u0442\u0435 \u0438\u0445 \u0432 \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044f\u0445 \u0447\u0435\u0440\u0435\u0437 \u0438\u0441\u0442\u043e\u0440\u0438\u0438 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435.",title:"\u0421\u043e\u043e\u0431\u0449\u0430\u0439\u0442\u0435 \u0431\u043b\u0438\u0437\u043a\u0438\u043c"})]})]}),Object(m.jsx)(O.g,{className:"center__x",children:Object(m.jsx)(O.d,{size:"l",onClick:s,className:"intro__button__location",style:{background:g},before:Object(m.jsx)(_.a,{}),children:"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044e"})}),Object(m.jsx)("div",{onClick:function(){a()},style:{marginTop:15},className:"w-100 highlight_on_touch center__x text__gray",children:"\u041f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c"}),Object(m.jsx)(O.v,{size:64})]})})})},v=function(e){var t=e.description,c=e.title,i=e.Icon;return Object(m.jsxs)(O.g,{className:"intro__info",children:[Object(m.jsx)("div",{className:"center__y",children:Object(m.jsx)(i,{fill:g})}),Object(m.jsxs)(O.g,{children:[Object(m.jsx)("div",{children:Object(m.jsx)("strong",{children:c})}),Object(m.jsx)("div",{className:"text__gray",children:t})]})]})},C=(c(153),c(192)),N=c(193),w=c.p+"static/media/IQAir_logo.60893679.svg",k=c(194),S=c.p+"static/media/loader.4eb6b9ea.gif",A=function(e){return Object(m.jsx)("img",{className:"w-100",src:S})},I=c(61),F=["description","onClick","className","bgApp"],T=Object(i.memo)((function(e){var t=e.description,c=e.onClick,i=e.className,n=e.bgApp,a=Object(I.a)(e,F);return Object(m.jsxs)("div",{className:"",onClick:c||function(){},style:{display:"flex",color:"bg__app__light"===n?"#454545":"white"},children:[Object(m.jsx)("div",{className:i||"center__y",style:{paddingRight:16,paddingLeft:8},children:a.children}),Object(m.jsx)("div",{className:"center__y",children:t})]})})),E=c(188),R=(c(154),function(e){var t=e.tooltipDescription,c=e.children;return Object(m.jsx)("div",{tooltip:t,"tooltip-position":"bottom",style:{padding:0,margin:0},children:c})}),L=Object(i.memo)((function(e){var t=e.title,c=e.value,n=e.tooltipDescription,a=e.bar,s=e.aqi,r=e.bgApp,l=Object(i.useState)(!1),d=Object(h.a)(l,2);d[0],d[1];return Object(m.jsxs)("div",{style:{paddingRight:4,paddingLeft:4,color:"bg__app__light"===r?"#454545":"white"},className:"w-100 pollution__item",children:[Object(m.jsx)("div",{style:{fontSize:16,overflow:"hidden"},children:t}),Object(m.jsx)("div",{className:"center__y",children:Object(m.jsx)("progress",{className:a,value:s||c,max:100})}),Object(m.jsxs)("div",{style:{display:"flex",justifyContent:"end"},children:[Object(m.jsxs)("div",{className:"text__gray",style:{fontSize:14,height:20,overflow:"hidden"},children:[c,"  \u03bcm",Object(m.jsx)("sup",{children:"3"})]}),Object(m.jsx)("div",{style:{marginLeft:3},children:Object(m.jsx)(R,{tooltipDescription:n,children:Object(m.jsx)(E.a,{fill:"#C1C1C1"})})})]})]})})),P=c(189),D=Object(i.memo)((function(e){var t=e.value,c=e.color,i=e.style;return Object(m.jsx)("span",Object(b.a)(Object(b.a)({},i),{},{className:"badge "+c,children:t}))})),z=function(e){for(var t=e;t>7;)t-=7;return["\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430","\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435"][t-1]},U=Object(i.memo)((function(e){var t=e.day,c=e.value,i=e.mode,n=(e.onClick,"bg__"+i);return Object(m.jsx)("div",{style:{fontSize:16,color:"#454545"},className:"w-100",children:Object(m.jsx)(O.f,{disabled:!0,after:Object(m.jsx)("div",{children:Object(m.jsx)(D,{value:c,color:n})}),before:"danger"===i&&Object(m.jsx)(P.a,{fill:"#EF462F"}),children:Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"center__y",children:z(t)})})})})})),q=c.p+"static/media/mask.ca4eeaf1.svg",W=c.p+"static/media/window.a4f0a59c.svg",H=c.p+"static/media/score_high.8b2dd071.svg",K=c.p+"static/media/score_low.272815f5.svg",V=c(190),M="#4475F1",G=function(e){var t=e.isGoodWind,c=e.pollution,i=e.bgApp,n=e.doStory;return Object(m.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(m.jsxs)("div",{children:[Object(m.jsx)(T,{bgApp:i,description:t?"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c \u041e\u041e\u041d. \u041d\u0430\u0441\u043b\u0430\u0436\u0434\u0430\u0439\u0442\u0435\u0441\u044c.":Object(m.jsx)("span",{children:"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u043f\u043b\u043e\u0445\u043e\u0435 \u0438 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u041e\u041e\u041d."}),children:t?Object(m.jsx)("img",{src:K}):Object(m.jsx)("img",{src:H})}),"green"!==c.mask.value&&"hidden"!==c.mask.value&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(O.v,{className:"spacing",size:32,separator:!0}),Object(m.jsx)(T,{bgApp:i,description:"\u041d\u043e\u0441\u0438\u0442\u0435 \u043c\u0430\u0441\u043a\u0443 \u043d\u0430 \u0443\u043b\u0438\u0446\u0435.",children:Object(m.jsx)("img",{src:q})})]}),"hidden"!==c.windows.value&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(O.v,{size:32,separator:!0,className:"spacing"}),Object(m.jsx)(T,{bgApp:i,description:"green"!==c.windows.value?"\u0417\u0430\u043a\u0440\u043e\u0439\u0442\u0435 \u043e\u043a\u043d\u0430.":"\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u043e\u043a\u043d\u0430 \u0438 \u043f\u0440\u043e\u0432\u0435\u0442\u0440\u0438\u0442\u0435 \u043f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u0441\u0432\u0435\u0436\u0438\u043c \u0432\u043e\u0437\u0434\u0443\u0445\u043e\u043c.",children:Object(m.jsx)("div",{style:{width:28},className:"center__x",children:Object(m.jsx)("img",{src:W})})})]}),"hidden"!==c.exercice.value&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(O.v,{size:32,className:"spacing",separator:!0}),Object(m.jsx)(T,{bgApp:i,description:"green"!==c.exercice.value?"\u0418\u0437\u0431\u0435\u0433\u0430\u0439\u0442\u0435 \u043d\u0430\u0433\u0440\u0443\u0437\u043e\u043a \u043d\u0430 \u0443\u043b\u0438\u0446\u0435.":"\u0425\u043e\u0440\u043e\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0434\u043b\u044f \u0442\u0440\u0435\u043d\u0438\u0440\u043e\u0432\u043a\u0438.",children:Object(m.jsx)(V.a,{fill:M})})]}),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(O.v,{className:"spacing",size:32,separator:!0}),Object(m.jsx)(T,{onClick:n,bgApp:i,description:Object(m.jsxs)("div",{style:{color:M},children:[Object(m.jsx)("div",{children:"\u0421\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u0434\u0440\u0443\u0437\u044c\u044f\u043c \u0438 \u0431\u043b\u0438\u0437\u043a\u0438\u043c"}),Object(m.jsx)("div",{children:"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u0435\u0441\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u0435\u0439"})]}),children:Object(m.jsx)(f.a,{fill:M})})]})]})})},Y=function(e){switch(e){case"pm25":return"PM2.5";case"pm10":return"PM10";case"o3":return"O3";case"no2":return"NO2";case"so2":return"SO2";case"co":return"CO";default:return e.toUpperCase()}},B=function(e){switch(e){case"pm25":return"\u041a\u0440\u043e\u0448\u0435\u0447\u043d\u044b\u0435 \u0447\u0430\u0441\u0442\u0438\u0446\u044b (<2.5 \u03bcm) \u0432 \u0432\u043e\u0437\u0434\u0443\u0445\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0435, \u043f\u0440\u0438 \u0432\u0434\u044b\u0445\u0430\u043d\u0438\u0438, \u043f\u043e\u043f\u0430\u0434\u0430\u044e\u0442 \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0432 \u043a\u0440\u043e\u0432\u044c.";case"pm10":return"\u041a\u0440\u043e\u0448\u0435\u0447\u043d\u044b\u0435 \u0447\u0430\u0441\u0442\u0438\u0446\u044b (<10 \u03bcm) \u0432 \u0432\u043e\u0437\u0434\u0443\u0445\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0435, \u043f\u0440\u0438 \u0432\u0434\u044b\u0445\u0430\u043d\u0438\u0438, \u043f\u043e\u043f\u0430\u0434\u0430\u044e\u0442 \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0432 \u043a\u0440\u043e\u0432\u044c.";case"o3":return"\u041e\u0437\u043e\u043d \u2014 \u0442\u043e\u043a\u0441\u0438\u0447\u043d\u044b\u0439 \u0438 \u043a\u0430\u043d\u0446\u0435\u0440\u043e\u0433\u0435\u043d\u043d\u044b\u0439 \u0433\u0430\u0437, \u0432\u043b\u0438\u044f\u044e\u0449\u0438\u0439 \u043d\u0430 \u043e\u0440\u0433\u0430\u043d\u044b \u0434\u044b\u0445\u0430\u043d\u0438\u044f.";case"no2":return"\u041e\u043a\u0441\u0438\u0434 \u0430\u0437\u043e\u0442\u0430 \u2014 \u043e\u0441\u043e\u0431\u043e \u0442\u043e\u043a\u0441\u0438\u0447\u0435\u043d, \u0440\u0430\u0437\u0434\u0440\u0430\u0436\u0430\u0435\u0442 \u0434\u044b\u0445\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0443\u0442\u0438 \u0438 \u0443\u043c\u0435\u043d\u044c\u0448\u0430\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u0433\u0435\u043c\u043e\u0433\u043b\u043e\u0431\u0438\u043d\u0430 \u0432 \u043a\u0440\u043e\u0432\u0438.";case"so2":return"\u041e\u043a\u0441\u0438\u0434 \u0441\u0435\u0440\u044b \u2014 \u043f\u0440\u0438 \u0434\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u043c \u0432\u043e\u0437\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u043d\u0435\u0441\u0442\u0438 \u043d\u0435\u043f\u043e\u043f\u0440\u0430\u0432\u0438\u043c\u044b\u0439 \u0432\u0440\u0435\u0434 \u043b\u0451\u0433\u043a\u0438\u043c.";case"co":return"\u041c\u043e\u043d\u043e\u043e\u043a\u0441\u0438\u0434 \u0443\u0433\u043b\u0435\u0440\u043e\u0434\u0430 \u2014 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u0437\u0430\u043f\u0430\u0445\u0430 \u0438 \u0446\u0432\u0435\u0442\u0430. \u0421\u0438\u043c\u043f\u0442\u043e\u043c\u044b \u043e\u0442\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442 \u0441\u043b\u0430\u0431\u043e\u0441\u0442\u044c, \u0433\u043e\u043b\u043e\u0432\u043d\u0443\u044e \u0431\u043e\u043b\u044c, \u0442\u043e\u0448\u043d\u043e\u0442\u0443 \u0438 \u0434\u0440.";default:return"\u0415\u0449\u0435 \u043d\u0435\u0442 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430."}},Q=c(43),J=c.n(Q),X=J.a.create({baseURL:"https://showtime.app-dich.com/api/ecology/"}),Z=function(e){return X.post("search".concat(window.location.search),{searchQ:e}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},$=function(e){return X.post("eco-info".concat(window.location.search),{id:e,target:"city"}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},ee=function(e,t){return J.a.get("https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=".concat(e,"&longitude=").concat(t,"&localityLanguage=ru")).then((function(e){return e.data})).catch((function(e){return e.response.data}))},te=c.p+"static/media/station.933949ec.svg",ce=c(191),ie=Object(i.memo)((function(e){var t=e.value,c=e.mode,i=e.stationName,n=e.distance,a="bg__"+c;return Object(m.jsx)("div",{style:{fontSize:16,color:"#454545"},className:"w-100",children:Object(m.jsx)(O.f,{disabled:!0,after:Object(m.jsx)("div",{children:Object(m.jsx)(D,{value:t,color:a})}),children:Object(m.jsxs)("div",{className:"d-flex",children:[Object(m.jsx)("div",{className:"center__y",children:Object(m.jsx)("img",{src:te,style:{marginRight:16}})}),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{style:{fontSize:16,width:200,overflowX:"scroll"},children:i}),Object(m.jsx)("div",{className:"text__gray",children:n>10&&Object(m.jsxs)("div",{className:"d-flex",children:[Object(m.jsx)("div",{style:{height:18,marginRight:5},className:"center__y",children:Object(m.jsx)(ce.a,{fill:"C1C1C1"})}),Object(m.jsx)("div",{className:"center__y",style:{fontSize:15,height:18},children:"\u041c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043d\u0435\u0442\u043e\u0447\u043d\u043e\u0439"})]})})]})]})})})})),ne=function(e){var t=e.point1,c=e.point2,i=Math.PI,n=Math.pow(Math.pow(t.latitude-c.latitude,2)+Math.pow(c.longitude-c.longitude,2),.5)/180*i*6371;return+String(n).slice(0,3)},ae=function(e){var t=e.id,c=e.snackbar,n=e.bgApp,a=e.isGoodWind,s=e.city,r=e.go,l=e.isInit,o=e.nativeCityId,j=e.isCitySubscribed,b=e.subscribeNoticification,u=e.unsubsubscribeNoticification,x=e.doStory,_=Object(i.useState)(!1),g=Object(h.a)(_,2),y=g[0],v=g[1],S=Object(i.useState)(!1),I=Object(h.a)(S,2),F=I[0],E=I[1],R=Object(i.useState)([]),P=Object(h.a)(R,2),D=P[0],z=P[1];Object(i.useEffect)((function(){return s&&(Z(s.name).then((function(e){e.data&&z(e.data.stations)})),v(!1)),function(){v(!1)}}),[s]);var q=function(){r("FORECAST_POLLUTION_FOR_THE_DAY")},W=s?D.map((function(e,t){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ie,{distance:ne({point1:e.coordinates,point2:s.coordinates}),stationName:e.name,value:e.aqi,mode:e.aqi>100?"danger":e.aqi>50?"okay":"good"},"".concat(t).concat(e.name)),t+1!==D.length&&Object(m.jsx)(O.v,{className:"spacing",separator:!0,size:16},"station_spacing".concat(t))]})})):[],H=s?s.current.pollutants.map((function(e,t){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(L,{bgApp:n,title:Y(e.pollutantName),value:e.concentration,aqi:e.aqi,tooltipDescription:B(e.pollutantName),bar:e.aqi>100?"bad_bar":e.aqi>50?"okay_bar":"good_bar"},"".concat(t).concat(e.pollutantName)),t+1!==s.current.pollutants.length&&Object(m.jsx)(O.v,{className:"spacing",separator:!0,size:32},"pollutant_spacing".concat(t))]})})):[],K=(new Date).getDay(),V=s?s.forecasts.daily.map((function(e,t){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(U,{onClick:q,day:K+t+1,value:e.aqi,mode:e.aqi>100?"danger":e.aqi>50?"okay":"good"},"".concat(t,"-").concat(e.temperature).concat(e.aqi)),t+1!==s.forecasts.daily.length&&Object(m.jsx)(O.v,{className:"spacing",separator:!0,size:16},"weather_spacing".concat(t))]})})):[];return Object(m.jsx)(O.q,{id:t,children:Object(m.jsxs)(O.j,{style:{paddingTop:42},className:n,children:[F&&Object(m.jsx)("div",{onClick:function(){E(!1)},style:{display:"flex",justifyContent:"center",flexDirection:"column",position:"fixed",zIndex:1e3,width:"100%",height:"100%"},children:Object(m.jsx)(A,{})}),Object(m.jsxs)(O.g,{className:l?"bg__init card":"card "+(s&&s.current.aqi<=50?"home__good__weather":s&&s.current.aqi<=100?"home__okay__weather":"home__bad__weather"),children:[Object(m.jsx)("div",{className:"home__main__title",children:l?Object(m.jsx)("div",{style:{height:24,width:61},className:"bg__init__home"}):Object(m.jsxs)("div",{style:{fontSize:24,fontWeight:"inherit",lineHeight:2.2,color:"rgba(0,0,0,0.5)"},className:"text__SF-Pro-Rounded-Semibold",children:[s&&s.current.aqi," AQI"]})}),Object(m.jsxs)("div",{className:"center__x text__Inter-Medium",style:{color:"rgba(0,0,0,0.5)"},children:[l&&Object(m.jsx)("div",{style:{height:16,width:97,marginTop:10},className:"bg__init__home"}),Object(m.jsx)("div",{style:{fontSize:17},className:"center__y",children:s&&o!==s.id&&!l&&Object(m.jsx)(C.a,{fill:"rgba(0,0,0,0.5)",style:{marginRight:3}})}),!l&&s&&s.name]}),Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"mt-4 home__main__bottom__side",children:[Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"home__search__cell__rounded home__search__cell__rounded_active",onClick:function(){return r("POLLUTION_CITIES")},style:{opacity:.5},children:Object(m.jsx)(O.c,{style:{backgroundColor:"rgba(255, 255, 255, 0.35)"},shadow:!1,children:!l&&Object(m.jsx)(N.a,{fill:"#000"})})})}),Object(m.jsxs)("div",{className:"home__main__bottom__right__side",children:[Object(m.jsx)("div",{style:{opacity:.5},onClick:s?j?u:b:function(){},className:"home__search__cell__rounded home__search__cell__rounded_active",children:Object(m.jsx)(O.c,{style:{backgroundColor:"rgba(255, 255, 255, 0.35)"},shadow:!1,children:!l&&Object(m.jsx)(p.a,{fill:"#000"})})}),Object(m.jsx)("div",{className:"ml-1",style:{opacity:.5},onClick:s?x:function(){},children:Object(m.jsx)(O.c,{className:"home__search__cell__rounded home__search__cell__rounded_active",style:{backgroundColor:"rgba(255, 255, 255, 0.35)"},shadow:!1,children:!l&&Object(m.jsx)(f.a,{fill:"#000"})})})]})]})})]}),Object(m.jsxs)(O.g,{children:[s&&!l&&Object(m.jsx)(G,{bgApp:n,doStory:x,pollution:s.recommendations.pollution,isGoodWind:a}),l&&Object(m.jsx)(O.e,{className:"card__app",mode:"shadow",children:Object(m.jsxs)("div",{className:"d-flex",children:[Object(m.jsx)("div",{className:"bg__init",style:{height:24,width:24,borderRadius:2e4}}),Object(m.jsx)("div",{className:"bg__init ml-2",style:{height:17,width:122}})]})})]}),Object(m.jsxs)(O.g,{children:[Object(m.jsx)(O.k,{className:"text__SF-Pro-Rounded-Semibold",children:l?Object(m.jsx)("div",{style:{height:12,width:85},className:"bg__init"}):Object(m.jsx)("span",{className:"text__gray",children:"\u0417\u0410\u0413\u0420\u042f\u0417\u041d\u0418\u0422\u0415\u041b\u0418"})}),Object(m.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(m.jsxs)("div",{className:"card__app",children:[l&&[3,2,1,0].map((function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 50px"},children:[Object(m.jsx)("div",{style:{width:91,height:17},className:"bg__init"}),Object(m.jsx)("div",{style:{width:24,height:24,display:"flex",justifyContent:"end"},className:"bg__init"})]},"pollutant".concat(e)),0!==e&&Object(m.jsx)(O.v,{className:"spacing",separator:!0,size:32},"pollutant_key".concat(e))]})})),!l&&Object(d.a)(H).slice(0,4),!y&&H.length>4&&Object(m.jsx)(O.f,{onClick:function(){return v(!0)},children:Object(m.jsx)(T,{bgApp:n,description:Object(m.jsx)(O.l,{children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435"}),children:Object(m.jsx)(k.a,{fill:"#4475F1"})})}),y&&!l&&Object(m.jsx)(m.Fragment,{children:Object(d.a)(H).slice(4,6)})]})})]}),Object(m.jsxs)(O.g,{children:[Object(m.jsx)(O.k,{className:"text__SF-Pro-Rounded-Semibold",children:l?Object(m.jsx)("div",{style:{height:12,width:85},className:"bg__init"}):Object(m.jsx)("span",{className:"text__gray",children:"\u041f\u0420\u041e\u0413\u041d\u041e\u0417 \u041d\u0410 \u041d\u0415\u0414\u0415\u041b\u042e"})}),Object(m.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(m.jsxs)("div",{className:"",children:[l&&[5,6,7,8,9,4,10].map((function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"24px 1fr 50px",gridGap:"10px"},children:[Object(m.jsx)("div",{style:{width:24,height:24},className:"bg__init"}),Object(m.jsx)("div",{style:{width:91,height:17},className:"bg__init"}),Object(m.jsx)("div",{style:{width:52,height:24,display:"flex",justifyContent:"end"},className:"bg__init"})]},"weather".concat(e)),10!==e&&Object(m.jsx)(O.v,{className:"spacing",separator:!0,size:16},"weather_spacing".concat(e))]})})),!l&&V]})})]}),0!==D.length&&Object(m.jsxs)(O.g,{children:[Object(m.jsx)(O.k,{className:"text__SF-Pro-Rounded-Semibold",children:l?Object(m.jsx)("div",{style:{height:12,width:85},className:"bg__init"}):Object(m.jsx)("span",{className:"text__gray",children:"\u0421\u0422\u0410\u041d\u0426\u0418\u0418"})}),Object(m.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(m.jsxs)("div",{className:"",children:[l&&[5,6,7,8,9,4,10].map((function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"24px 1fr 50px",gridGap:"10px"},children:[Object(m.jsx)("div",{style:{width:24,height:24},className:"bg__init"}),Object(m.jsx)("div",{style:{width:91,height:17},className:"bg__init"}),Object(m.jsx)("div",{style:{width:52,height:24,display:"flex",justifyContent:"end"},className:"bg__init"})]},"station".concat(e)),10!==e&&Object(m.jsx)(O.v,{separator:!0,className:"spacing",size:16},"station_spacing".concat(e,"}"))]})})),!l&&W]})})]}),Object(m.jsxs)(O.i,{style:{paddingTop:4,paddingLeft:4},children:[Object(m.jsx)(O.g,{className:"text__SF-Pro-Rounded-Semibold",children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0430"}),Object(m.jsx)(O.g,{className:"",children:Object(m.jsx)("img",{src:w})})]}),Object(m.jsx)(O.h,{children:c})]})})},se=(c(173),c(183)),re=c(195),le=c(196),de=function(e){var t=e.day,c=e.month,n=e.city,a=e.id,s=e.handlerClose,r=e.isGoodWind;return Object(m.jsx)(O.n,{onClose:s,header:Object(m.jsx)(O.o,{right:Object(m.jsx)(O.r,{onClick:s,children:Object(m.jsx)(se.a,{})})}),settlingHeight:100,id:a,children:Object(m.jsx)(i.Fragment,{children:Object(m.jsxs)(O.j,{children:[Object(m.jsxs)(O.g,{className:"w-100 text__dark_gray",children:[Object(m.jsx)("h3",{className:"center__x",children:"6 AQI"}),Object(m.jsxs)("div",{className:"center__x",children:[Object(m.jsxs)("div",{className:"d-flex",children:[Object(m.jsx)(C.a,{style:{marginTop:3,marginRight:3}}),n]}),Object(m.jsxs)("div",{className:"d-flex ml-2",children:[Object(m.jsx)(re.a,{style:{marginTop:3,marginRight:3}}),t," ",c]})]})]}),Object(m.jsx)(O.g,{children:Object(m.jsx)(O.e,{mode:"shadow",children:Object(m.jsxs)("div",{className:"d-flex text__dark_gray p-2",children:[Object(m.jsx)("div",{className:"center__y",children:Object(m.jsx)(le.a,{})}),Object(m.jsx)("div",{className:"ml-2",children:r?"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f\u043c \u041e\u041e\u041d.":"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u043f\u043b\u043e\u0445\u043e\u0435 \u0438 \u043f\u0440\u0435\u0432\u044b\u0448\u0430\u0435\u0442 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u044f \u041e\u041e\u041d."})]})})}),Object(m.jsxs)(O.g,{children:[Object(m.jsx)(O.k,{children:Object(m.jsx)("span",{className:"text__gray",children:"\u0417\u0410\u0413\u0420\u042f\u0417\u041d\u0418\u0422\u0415\u041b\u0418"})}),Object(m.jsx)(O.e,{mode:"shadow",children:Object(m.jsx)("div",{className:"p-2"})})]}),Object(m.jsx)(O.v,{size:64})]})})})},oe=c(44),je=c(197),be=function(e){var t,c=e.city,n=e.country,a=e.value,s=e.onClick,r=e.id,l=Object(i.useState)("bg__good"),d=Object(h.a)(l,2),o=d[0],j=d[1];return Object(i.useEffect)((function(){a&&j(a>=100?"bg__danger":a>=50?"bg__okay":"bg__good")}),[a]),Object(m.jsxs)("div",{onClick:s,className:"highlight_on_touch text__Inter-Regular",style:{paddingLeft:16,paddingRight:16,paddingBottom:4,paddingTop:4,display:"grid",gridTemplateColumns:"1fr 50px"},children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{style:{fontSize:16},children:c}),Object(m.jsx)("div",{style:{marginTop:6,fontSize:15,color:"#606060"},children:(t=r,["5bc822af41fdcdf1939e6641","5bc822af41fdcdf1939e6642","5bc822ae41fdcdf1939e6628","5bc822ae41fdcdf1939e660e","5bc822ae41fdcdf1939e662b","5bc821bd41fdcdf1939dd63e","5bc822a241fdcdf1939e6147","5bac90b524b967f0b5308d0f","5bc822ae41fdcdf1939e660e","5bac90b624b967f0b5308d12","5bc8229e41fdcdf1939e5f4c","5bc822a241fdcdf1939e6172","5bc8229d41fdcdf1939e5ee0","5bac90ab24b967f0b5308cf4","5bac90b624b967f0b5308d11","5bc8229c41fdcdf1939e5e72","5bc8229c41fdcdf1939e5e5c","5bac90b724b967f0b5308d13","5bc822a041fdcdf1939e5ff2","5bac90b624b967f0b5308d10","5bc8229f41fdcdf1939e5f88","5bc822a341fdcdf1939e61d1","5bc822af41fdcdf1939e667b"].some((function(e){return e===t}))?"\u0420\u043e\u0441\u0441\u0438\u044f":n)})]}),a&&Object(m.jsx)("div",{className:"center__y",children:Object(m.jsx)(D,{color:o,value:a,children:a})})]})},ue=function(e){var t=e.id,c=e.bgApp,n=e.countryId,a=e.handlerClose,s=e.setDefaultCity,r=e.countryName,l=e.myCity,d=e.myCityId,o=e.isAllowedPlace,j=e.requestPermissionLocation,u=Object(i.useState)(""),x=Object(h.a)(u,2),p=x[0],f=x[1],_=Object(i.useState)([]),g=Object(h.a)(_,2),y=g[0],v=g[1],C=Object(i.useState)([]),N=Object(h.a)(C,2),w=N[0],k=N[1],S=Object(i.useState)(!0),A=Object(h.a)(S,2),I=A[0],F=A[1];Object(i.useEffect)((function(){F(!0),Z(p.length>2?p:r).then((function(e){var t=e.data;v(t.cities),F(!1)})).catch((function(e){F(!1)}))}),[p]),Object(i.useEffect)((function(){F(!0),Z(r).then((function(e){var t=e.data;v(t.cities),function(e){return X.post("rank".concat(window.location.search),{id:e}).then((function(e){return e.data})).catch((function(e){return e.response.data}))}(n).then((function(e){var t=e.data;k(t),F(!1)}))})).catch((function(e){F(!1)}))}),[]);var E=y.length>0?y.map((function(e,t){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"",children:Object(m.jsx)(be,Object(b.a)({onClick:function(){s(e.id),a()},city:e.name},e))},e.id),t+1!==y.length&&Object(m.jsx)(O.v,{separator:!0,className:"spacing",size:8})]})})):Object(m.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:"\u0413\u043e\u0440\u043e\u0434\u043e\u0432 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."}),R=w.length>0?w.map((function(e,t){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"",children:Object(m.jsx)(be,Object(b.a)(Object(b.a)({value:e.aqi?e.aqi:10,onClick:function(){s(e.id),a()},city:e.name},e),{},{country:r}))},e.id),t+1!==y.length&&Object(m.jsx)(O.v,{className:"spacing",separator:!0,size:8})]})})):Object(m.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:"\u0413\u043e\u0440\u043e\u0434\u043e\u0432 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."});return Object(m.jsx)(O.n,{settlingHeight:100,header:Object(m.jsx)(O.o,{className:"bg__app__light"===c?"modal__app__light":"modal__app__dark",right:Object(m.jsx)(O.r,{onClick:a,children:Object(m.jsx)(se.a,{})})}),id:t,children:Object(m.jsxs)(O.j,{className:c,children:[Object(m.jsx)("div",{children:Object(m.jsx)(O.t,{value:p,onChange:function(e){f(e.target.value)},className:c})}),Object(m.jsx)(O.g,{children:Object(m.jsx)(O.e,{mode:"shadow",className:"card__app",style:{padding:0,overflow:"hidden"},children:Object(m.jsx)(O.f,{onClick:function(){o?(s(d),a()):j()},children:Object(m.jsxs)("div",{className:"card__app",children:[!I&&Object(m.jsx)(T,{bgApp:c,description:Object(m.jsx)("div",{children:o?Object(m.jsxs)(m.Fragment,{children:[" ",Object(m.jsx)("div",{style:{fontSize:16},children:l}),Object(m.jsx)("div",{style:{fontSize:15},className:"text__gray",children:"\u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"})," "]}):Object(m.jsxs)("div",{style:{color:"#4475F1",fontSize:16},children:[Object(m.jsx)("div",{children:"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f"}),Object(m.jsx)("div",{children:"\u043a \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u044e"})]})}),children:Object(m.jsx)(je.a,{className:"",fill:"#4475F1"})}),I&&Object(m.jsx)(T,{bgApp:c,description:Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{style:{width:122,height:16},className:"bg__init"}),Object(m.jsx)("div",{style:{width:88,height:12},className:"bg__init mt-1"})]}),children:Object(m.jsx)("div",{style:{height:24,width:24,borderRadius:2e4},className:"bg__init"})})]})})})}),Object(m.jsxs)(O.g,{children:[Object(m.jsx)(O.k,{className:"text__SF-Pro-Rounded-Semibold",children:I?Object(m.jsx)("div",{className:"bg__init",style:{width:85,height:12}}):Object(m.jsx)("span",{className:"text__gray",children:p.length>0?"\u0412\u0421\u0415":"\u0421 \u041d\u0418\u0417\u041a\u0418\u041c\u0418 \u041f\u041e\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u042f\u041c\u0418"})}),Object(m.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(m.jsxs)(O.j,{children:[I?p.length>0?Object(m.jsx)(Oe,{}):Object(m.jsx)(he,{}):Object(m.jsx)(m.Fragment,{}),I?Object(m.jsx)(m.Fragment,{}):p.length>0?E:R]})})]}),Object(m.jsxs)(O.g,{children:[Object(m.jsx)(O.k,{className:"text__SF-Pro-Rounded-Semibold",children:I?Object(m.jsx)("div",{className:"bg__init",style:{width:85,height:12}}):Object(m.jsx)("span",{className:"text__gray",children:p.length>0?"\u0421 \u041d\u0418\u0417\u041a\u0418\u041c\u0418 \u041f\u041e\u041a\u0410\u0417\u0410\u0422\u0415\u041b\u042f\u041c\u0418":"\u0412\u0421\u0415"})}),Object(m.jsx)(O.e,{mode:"shadow",className:"card__app",children:Object(m.jsx)(O.j,{children:Object(m.jsxs)(O.j,{className:"",children:[I?p.length>0?Object(m.jsx)(he,{}):Object(m.jsx)(Oe,{}):Object(m.jsx)(m.Fragment,{}),I?Object(m.jsx)(m.Fragment,{}):p.length>0?R:E]})})})]}),Object(m.jsx)(O.v,{size:70})]})})},he=function(e){Object(oe.a)(e);var t=[2,3,4,5,1].map((function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(O.g,{className:"px-2",style:{display:"grid",gridTemplateColumns:"1fr 50px"},children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{style:{width:122,height:16},className:"bg__init"}),Object(m.jsx)("div",{style:{width:88,height:12},className:"bg__init mt-1"})]}),Object(m.jsx)("div",{style:{width:44,height:24,borderRadius:2e4},className:"bg__init mt-1"})]},"clearCity".concat(e)),1!==e&&Object(m.jsx)(O.v,{className:"spacing",separator:!0,size:8})]})}));return Object(m.jsx)(m.Fragment,{children:t})},Oe=function(e){Object(oe.a)(e);var t=[2,3,4,5,1].map((function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(O.g,{className:"px-2",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{style:{width:122,height:16},className:"bg__init"}),Object(m.jsx)("div",{style:{width:88,height:12},className:"bg__init mt-1"})]})},"city".concat(e)),1!==e&&Object(m.jsx)(O.v,{className:"spacing",separator:!0,size:8})]})}));return Object(m.jsx)(m.Fragment,{children:t})},xe=c(198),pe=function(e){var t=e.id,c=e.handleClose,i=e.cityFromSearch,n=e.cityOfUser,a=e.setCitySearch,s=e.toHome;return Object(m.jsxs)(O.m,{onClose:c,id:t,children:[Object(m.jsx)(O.f,{onClick:function(){a(i.id),s()},children:Object(m.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"140px 28px 1fr"},children:[Object(m.jsx)("div",{children:"\u0413\u043e\u0440\u043e\u0434 \u0438\u0437 \u043f\u043e\u0438\u0441\u043a\u0430"}),Object(m.jsx)("div",{className:"center__x",children:Object(m.jsx)(xe.a,{fill:"#808080"})}),Object(m.jsxs)("div",{style:{display:"flex",justifyContent:"end"},children:[Object(m.jsx)("div",{style:{marginTop:2},className:"center__y",children:Object(m.jsx)(C.a,{fill:"#808080",className:"mr-1"})}),Object(m.jsx)("div",{className:"center__y",children:i.name})]})]})}),Object(m.jsx)(O.f,{onClick:function(){a(n.id),s()},children:Object(m.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"140px 28px 1fr"},children:[Object(m.jsxs)("div",{children:["\u0422\u0435\u043a\u0443\u0449\u0435\u0435",Object(m.jsx)("div",{children:"\u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"})]}),Object(m.jsx)("div",{className:"center__x",children:Object(m.jsx)(xe.a,{fill:"#808080"})}),Object(m.jsx)("div",{style:{display:"flex",justifyContent:"end",marginTop:2},children:n.name})]})})]})},fe=c(20),_e=c(29),me=c.n(_e),ge=function(e){var t=e.text,c=e.resultOperation,i=e.closeHandler;return Object(m.jsx)(O.u,{onClose:i||function(){},before:Object(m.jsx)("img",{src:c?K:H}),children:Object(m.jsx)("div",{className:"text__SF-Pro-Rounded-Regular",style:{fontSize:15},children:t})})},ye=c.p+"static/media/place.7859cca4.svg",ve=(c.p,c.p,c.p,c.p,c.p+"static/media/chevron_right.41330dfc.svg"),Ce=c(199),Ne=function(e){var t=e.id,c=e.subscribeNoticification,i=(e.bgApp,e.closeHandler);return Object(m.jsx)(O.m,{id:t,onClose:i,icon:Object(m.jsx)(Ce.a,{fill:"#4475F1"}),header:Object(m.jsx)("div",{className:"text__Inter-Bold",children:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f?"}),subheader:Object(m.jsxs)("div",{className:"text__Inter-Regular",children:["\u041c\u044b \u0431\u0443\u0434\u0435\u043c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u044f\u0442\u044c \u0432\u0430\u0441 \u043e\u0431 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u043c \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u0440\u0430\u0437 \u0432 \u043d\u0435\u0434\u0435\u043b\u044e, \u0430 \u0442\u0430\u043a\u0436\u0435:",Object(m.jsx)("div",{style:{marginTop:10},children:"- \u0415\u0441\u043b\u0438 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430 \u0441\u0442\u0430\u043d\u0435\u0442 \u043d\u0435\u043f\u0440\u0438\u0435\u043c\u043b\u0438\u043c\u044b\u043c"}),Object(m.jsx)("div",{style:{marginTop:5},children:"- \u041e \u0440\u0435\u0437\u043a\u0438\u0445 \u0441\u043a\u0430\u0447\u043a\u0430\u0445 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u0437\u0430\u0433\u0440\u044f\u0437\u043d\u0438\u0442\u0435\u043b\u0435\u0439"})]}),actions:Object(m.jsx)(O.d,{size:"l",mode:"primary",onClick:function(){c(),i()},className:"text__Inter-Medium",children:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c"})})},we=c(35),ke=function(e){return e.initial.bgApp},Se=function(e){return e.initial.platform},Ae="INFO",Ie="POLLUTION_CITIES",Fe="HOME",Te="FORECAST_POLLUTION_FOR_THE_DAY",Ee="MY_CITIES",Re="TURN_NOTICIFICATIONS",Le={IS_CHECK_INFO:"IS_CHECK_INFO",IS_ALLOWED_PLACE:"IS_ALLOWED_PLACE",DEFAULT_CITY_ID:"DEFAULT_CITY_ID",DEFAULT_COUNTRY_NAME:"DEFAULT_COUNTRY_NAME",DEFAULT_COUNTRY_ID:"DEFAULT_COUNTRY_ID"},Pe="5b163b6f7fa2b15e076ad2a6",De="qNvxAidZLbwhRmQXR",ze="\u0420\u043e\u0441\u0441\u0438\u044f",Ue=function(e){var t=e.x,c=me()(ye),i=Object(h.a)(c,1)[0];return Object(m.jsx)(fe.a,{x:t,y:762.15,image:i})},qe=function(){var e=me()(ve),t=Object(h.a)(e,1)[0];return Object(m.jsx)(fe.a,{x:1005.8,y:1167.05,image:t})},We=function(){var e=Object(i.useState)(!1),t=Object(h.a)(e,2),c=t[0],a=t[1],s=Object(i.useState)(Fe),r=Object(h.a)(s,2),o=r[0],x=(r[1],Object(i.useState)(null)),p=Object(h.a)(x,2),f=(p[0],p[1],Object(i.useState)(Object(m.jsx)(O.s,{size:"large"}))),_=Object(h.a)(f,2),g=_[0],v=(_[1],Object(i.useState)(null)),C=Object(h.a)(v,2),N=C[0],w=C[1],k=Object(i.useState)(null),S=Object(h.a)(k,2),A=S[0],I=S[1],F=Object(i.useState)({isCheckInfo:!1,isAllowedPlace:!1,defaultCityId:Pe,defaultCountryId:De,ecoCity:null,nativeCity:null,subscribedCities:[],defaultCountryName:ze}),T=Object(h.a)(F,2),E=T[0],R=T[1],L=function(){w(null)},P=Object(we.b)(Se),D=Object(we.b)(ke);Object(i.useEffect)(Object(u.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=function(){return(c=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.send("VKWebAppStorageGet",{keys:Object.values(Le)});case 2:t=e.sent,t.keys.forEach((function(e){var t=e.value?JSON.parse(e.value):null;switch(e.key){case Le.IS_CHECK_INFO:t?R((function(e){return Object(b.a)(Object(b.a)({},e),{},{isCheckInfo:!0})})):w(Ae);break;case Le.IS_ALLOWED_PLACE:t&&R((function(e){return Object(b.a)(Object(b.a)({},e),{},{isAllowedPlace:!0})}));break;case Le.DEFAULT_COUNTRY_ID:t&&R((function(t){return Object(b.a)(Object(b.a)({},t),{},{defaultCountryId:e.value})}));case Le.DEFAULT_CITY_ID:t&&R((function(t){return Object(b.a)(Object(b.a)({},t),{},{defaultCityId:e.value})}));break;case Le.DEFAULT_COUNTRY_NAME:t&&R((function(t){return Object(b.a)(Object(b.a)({},t),{},{defaultCountryName:e.value})}))}}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)},t=function(){return c.apply(this,arguments)},t();case 3:case"end":return e.stop()}}),e)}))),[]);var z=function(){try{l.a.send("VKWebAppStorageSet",{key:Le.IS_CHECK_INFO,value:"true"}),R((function(e){return Object(b.a)(Object(b.a)({},e),{},{isCheckInfo:!0})})),L()}catch(e){}};Object(i.useEffect)(Object(u.a)(j.a.mark((function e(){var t,c,i,n,s,r,d,o,u,h,O;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E.isAllowedPlace){e.next=39;break}return e.prev=1,a(!0),e.next=5,l.a.send("VKWebAppGetGeodata",{key:"location"});case 5:return t=e.sent,c=t.lat,i=t.long,e.next=10,ee(c,i);case 10:return n=e.sent,s=n.city,r=Pe,d=De,o=ze,u=s,e.next=18,Z(u);case 18:return h=e.sent.data,O=null,h.cities.forEach((function(e){e.name!==u||O||(r=e.id,O=e)})),e.next=23,Z(O.country);case 23:e.sent.data.countries.forEach((function(e){e.name===O.country&&(d=e.id,o=e.name)})),l.a.send("VKWebAppStorageSet",{key:Le.DEFAULT_COUNTRY_NAME,value:o}),R((function(e){return Object(b.a)(Object(b.a)({},e),{},{defaultCountryId:o})})),l.a.send("VKWebAppStorageSet",{key:Le.DEFAULT_COUNTRY_ID,value:d}),R((function(e){return Object(b.a)(Object(b.a)({},e),{},{defaultCountryId:d})})),l.a.send("VKWebAppStorageSet",{key:Le.DEFAULT_CITY_ID,value:r}),R((function(e){return Object(b.a)(Object(b.a)({},e),{},{defaultCityId:r})})),R((function(e){return Object(b.a)(Object(b.a)({},e),{},{nativeCity:O})})),a(!1),e.next=39;break;case 35:e.prev=35,e.t0=e.catch(1),l.a.send("VKWebAppStorageSet",{key:Le.DEFAULT_CITY_ID,value:E.defaultCityId}),a(!1);case 39:case"end":return e.stop()}}),e,null,[[1,35]])}))),[E.isAllowedPlace]),Object(i.useEffect)(Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.next=3,$(E.defaultCityId);case 3:(t=e.sent.data)&&(R((function(e){return Object(b.a)(Object(b.a)({},e),{},{ecoCity:t})})),E.nativeCity||R((function(e){return Object(b.a)(Object(b.a)({},e),{},{nativeCity:t})}))),a(!1);case 6:case"end":return e.stop()}}),e)}))),[E.defaultCityId]);var U=function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.location.hash.slice(1)){e.next=7;break}return a(!0),e.next=4,$(window.location.hash.slice(1));case 4:(t=e.sent.data)&&R((function(e){return Object(b.a)(Object(b.a)({},e),{},{ecoCity:t})})),a(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)(Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U();case 1:case"end":return e.stop()}}),e)}))),[window.location.hash]),Object(i.useEffect)(Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.get("subscribe".concat(window.location.search)).then((function(e){return e.data.data}));case 2:t=e.sent,R((function(e){return Object(b.a)(Object(b.a)({},e),{},{subscribedCities:Object(d.a)(t)})}));case 4:case"end":return e.stop()}}),e)}))),[]);var q=function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.send("VKWebAppGetGeodata",{key:"location"}).then((function(e){l.a.send("VKWebAppStorageSet",{key:Le.IS_ALLOWED_PLACE,value:JSON.stringify(!0)}).then((function(e){R((function(e){return Object(b.a)(Object(b.a)({},e),{},{isAllowedPlace:!0})}))}))})).catch((function(e){R((function(e){return Object(b.a)(Object(b.a)({},e),{},{isAllowedPlace:!0})}))}));case 2:z();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=Object(i.useRef)(null),H=Object(i.useRef)(null),K=n.a.useCallback(Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},t="pc"===P?{background_type:"image",blob:H.current.toDataURL()}:{background_type:"none"},e.next=5,l.a.send("VKWebAppShowStoryBox",Object(b.a)(Object(b.a)({},t),{},{stickers:[{sticker_type:"renderable",sticker:{can_delete:!1,content_type:"image",blob:W.current.toDataURL(),clickable_zones:[{action_type:"link",action:{link:"https://vk.com/app7991717#".concat(E.ecoCity.id),tooltip_text_key:"tooltip_open_default"}}],transform:{gravity:"center",relation_width:1}}}]})).catch((function(e){I(Object(m.jsx)(ge,{closeHandler:V,resultOperation:!0,text:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}))})).then((function(e){e.result?I(Object(m.jsx)(ge,{closeHandler:V,resultOperation:!0,text:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u043d\u0430"})):I(Object(m.jsx)(ge,{closeHandler:V,resultOperation:!1,text:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),I(Object(m.jsx)(ge,{closeHandler:V,resultOperation:!1,text:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[W,E.ecoCity,H]),V=function(){I(null)},M=function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.send("VKWebAppAllowNotifications");case 3:if(!e.sent.result||!E.ecoCity){e.next=7;break}return e.next=7,t=E.ecoCity.id,X.post("subscribe".concat(window.location.search),{id:t});case 7:R((function(e){return Object(b.a)(Object(b.a)({},e),{},{subscribedCities:[].concat(Object(d.a)(e.subscribedCities),[{cityId:E.ecoCity.id}])})})),I(Object(m.jsx)(ge,{closeHandler:V,resultOperation:!0,text:"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u044b"})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),I(Object(m.jsx)(ge,{closeHandler:V,resultOperation:!1,text:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}));case 14:case"end":return e.stop()}var t}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.send("VKWebAppDenyNotifications");case 3:if(!e.sent.result||!E.ecoCity){e.next=7;break}return e.next=7,t=E.ecoCity.id,X.delete("subscribe".concat(window.location.search),{data:{id:t}});case 7:R((function(e){return Object(b.a)(Object(b.a)({},e),{},{subscribedCities:Object(d.a)(e.subscribedCities.filter((function(e){return e.cityId!==E.ecoCity.id})))})})),I(Object(m.jsx)(ge,{resultOperation:!0,closeHandler:V,text:"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0432\u044b\u043a\u043b\u044e\u0447\u0435\u043d\u044b"})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),I(Object(m.jsx)(ge,{closeHandler:V,resultOperation:!1,text:"\u0412\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c"}));case 14:case"end":return e.stop()}var t}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),Y=Object(m.jsxs)(O.p,{onClose:L,activeModal:N,children:[Object(m.jsx)(pe,{toHome:L,cityFromSearch:E.ecoCity,cityOfUser:E.nativeCity,setCitySearch:function(e){return R((function(t){return Object(b.a)(Object(b.a)({},t),{},{defaultCityId:e})}))},handleClose:function(){w(Ie)},id:Ee}),Object(m.jsx)(y,{bgApp:D,checkInfo:z,requestPermissionLocation:q,id:Ae,handlerClose:L}),Object(m.jsx)(de,{id:Te,handlerClose:L,day:3,month:"\u041d\u043e\u044f\u0431\u0440\u044c",city:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433"}),Object(m.jsx)(Ne,{bgApp:D,id:Re,closeHandler:L,subscribeNoticification:M}),Object(m.jsx)(ue,{requestPermissionLocation:q,isAllowedPlace:E.isAllowedPlace,bgApp:D,myCityId:E.nativeCity?E.nativeCity.id:Pe,myCity:E.nativeCity?E.nativeCity.name:"\u0421\u0430\u043d\u043a\u0442-\u041f\u0435\u0442\u0435\u0440\u0431\u0443\u0440\u0433",onClickMyCities:function(){w(Ee)},setDefaultCity:function(e){return R((function(t){return Object(b.a)(Object(b.a)({},t),{},{defaultCityId:e})}))},countryName:E.defaultCountryName,countryId:E.defaultCountryId,handlerClose:L,id:Ie})]});return Object(m.jsxs)(O.a,{children:[Object(m.jsx)(O.b,{activePanel:o,popout:g,children:Object(m.jsx)(O.w,{activePanel:Fe,modal:Y,children:Object(m.jsx)(ae,{snackbar:A,subscribeNoticification:function(){return w(Re)},unsubsubscribeNoticification:G,isCitySubscribed:!!E.ecoCity&&E.subscribedCities.some((function(e){return e.cityId===E.ecoCity.id})),bgApp:D,doStory:K,nativeCityId:E.nativeCity?E.nativeCity.id:Pe,isInit:c,go:function(e){w(e)},city:E.ecoCity?E.ecoCity:null,id:Fe,isGoodWind:!E.ecoCity||!E.ecoCity.current||E.ecoCity.current.aqi<=50})})}),Object(m.jsxs)("div",{id:"canvas",style:{width:0,height:0,opacity:0,overflow:"hidden"},children:[Object(m.jsx)(fe.d,{width:253,height:250,ref:H,children:Object(m.jsx)(fe.b,{children:Object(m.jsx)(fe.c,{fill:"white",width:253,height:250})})}),Object(m.jsxs)(fe.d,{ref:W,width:1362,height:1427,children:[Object(m.jsx)(fe.b,{children:Object(m.jsx)(fe.c,{fillLinearGradientStartPoint:{x:0,y:-100},fillLinearGradientEndPoint:{x:670,y:1200},fillLinearGradientColorStops:E.ecoCity&&E.ecoCity.current.aqi>100?[0,"rgba(255,153,182,1)",1,"rgba(204,183,254,1)"]:E.ecoCity&&E.ecoCity.current.aqi>50?[0,"#FDCFB2",1,"#BF8FF5"]:[0,"#B3FF86",1,"#EEFFC8"],width:1362,height:1427,cornerRadius:118.56})}),Object(m.jsxs)(fe.b,{children:[Object(m.jsx)(fe.e,{fontFamily:"SF-Pro-Rounded-Heavy",text:"\u041a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u043e\u0437\u0434\u0443\u0445\u0430:",x:254.58,fontSize:96,y:286.71,fill:"rgba(0, 0, 0, 0.5)",width:860,height:115}),Object(m.jsx)(fe.e,{fontFamily:"SF-Pro-Rounded-Heavy",text:E.ecoCity&&E.ecoCity.current.aqi>100?"\u041f\u043b\u043e\u0445\u043e\u0435":E.ecoCity&&E.ecoCity.current.aqi>50?"\u041d\u0435\u043f\u043b\u043e\u0445\u043e\u0435":"\u0425\u043e\u0440\u043e\u0448\u0435\u0435",x:E.ecoCity&&E.ecoCity.current.aqi>100?340:E.ecoCity&&E.ecoCity.current.aqi>50?240:269.58,fontSize:188,y:421.71,fill:"rgba(0, 0, 0, 0.5)",width:1e3,height:224}),Object(m.jsx)(fe.e,{fontFamily:"SF-Pro-Rounded-Regular",text:E.ecoCity?E.ecoCity.name:"SPb",x:(1362-(E.ecoCity?45*E.ecoCity.name.length:10))/2,fontSize:99,y:755,fill:"rgba(0, 0, 0, 0.5)",width:1e3,height:100}),Object(m.jsx)(fe.c,{x:231,y:1084,width:901,fill:"rgba(255,255,255,0.45)",height:220,cornerRadius:165.98}),Object(m.jsx)(fe.e,{text:"\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435",width:631,height:102,x:311,fontSize:84,fontFamily:"SF-Pro-Rounded-Regular",fill:"rgba(0, 0, 0, 0.5)",y:1153}),Object(m.jsx)(Ue,{x:(1362-(E.ecoCity?45*E.ecoCity.name.length:10)-140)/2}),Object(m.jsx)(qe,{})]})]})]})]})},He=c(46),Ke="initialReducer/SET_PLATFORM",Ve="initialReducer/SET_BG_APP",Me={platform:"mobile",bgApp:"bg__app__light"},Ge=function(e){return{type:Ke,platform:e}},Ye=function(e){return{type:Ve,bgApp:e}},Be=Object(He.a)({initial:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ke:return Object(b.a)(Object(b.a)({},e),{},{platform:t.platform});case Ve:return Object(b.a)(Object(b.a)({},e),{},{bgApp:t.bgApp});default:return e}}}),Qe=Object(He.b)(Be),Je=Qe.dispatch,Xe=function(){var e=Object(u.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.a.subscribe((function(e){var t=e.detail,c=t.type,i=t.data;if("VKWebAppUpdateConfig"===c){var n=document.createAttribute("scheme");n.value=i.scheme?i.scheme:"client_light";var a=new RegExp("light");i.scheme.match(new RegExp("vkcom"))||i.scheme.match(a)?(Je(Ye("bg__app__light")),i.scheme.match(new RegExp("vkcom"))?Je(Ge("pc")):Je(Ge("mobile")),l.a.send("VKWebAppSetViewSettings",{status_bar_style:"light",action_bar_color:"#F5F5F5"})):(Je(Ye("bg__app__dark")),l.a.send("VKWebAppSetViewSettings",{status_bar_style:"dark",action_bar_color:"#373737"})),document.body.attributes.setNamedItem(n)}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Xe(),l.a.send("VKWebAppInit");var Ze=function(){return Object(m.jsx)(we.a,{store:Qe,children:Object(m.jsx)(We,{})})};s.a.render(Object(m.jsx)(Ze,{}),document.getElementById("root"))}},[[182,1,2]]]);
//# sourceMappingURL=main.48b06905.chunk.js.map